<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-key="title">GeoReady Pro | Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ†</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght300;400;600;700;900&family=Tajawal:wght400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    /* ================================= Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ================================= */
    :root {
      --primary-blue: #0056b3;
      --secondary-blue: #007bff;
      --accent-cyan: #17a2b8;
      --success-green: #28a745;
      --warning-orange: #fd7e14;
      --danger-red: #dc3545;
      --dark-navy: #1a1d29;
      --light-gray: #f8f9fa;
      --white: #ffffff;
      --gradient-primary: linear-gradient(135deg, #0056b3 0%, #007bff 100%); /* Blue Gradient */
      --gradient-secondary: linear-gradient(135deg, #17a2b8 0%, #28a745 100%); /* Teal to Green Gradient */
      --shadow-soft: 0 8px 30px rgba(0,0,0,0.08);
      --shadow-medium: 0 15px 45px rgba(0,0,0,0.15);
      --shadow-strong: 0 20px 60px rgba(0,0,0,0.25);
    }

    /* ================================= Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ================================= */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Cairo', 'Tajawal', sans-serif;
      line-height: 1.6;
      color: var(--dark-navy);
      background: var(--light-gray);
      overflow-x: hidden;
      transition: background-color 0.3s;
    }

    body[dir="rtl"] { text-align: right; }
    body[dir="ltr"] { text-align: left; }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* ================================= Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„ØªÙ†Ù‚Ù„ ================================= */
    header {
      background: var(--gradient-primary);
      color: var(--white);
      padding: 100px 0 80px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hero-title {
      font-size: 4.5rem;
      font-weight: 900;
      margin-bottom: 20px;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.4);
      animation: fadeInUp 1s ease-out;
    }

    .btn {
      padding: 15px 30px;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 700;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .btn-primary {
      background: var(--white);
      color: var(--primary-blue);
      box-shadow: var(--shadow-soft);
    }

    .btn-primary:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: var(--shadow-medium);
    }
    
    .btn-success {
      background: var(--success-green);
      color: var(--white);
    }

    /* ================================= Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø«Ø§Ø¨Øª ================================= */
    .navbar {
      background: var(--white);
      padding: 20px 0;
      box-shadow: var(--shadow-soft);
      position: sticky;
      top: 0;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .nav-links a:hover, .nav-links a.active {
      background: var(--primary-blue);
      color: var(--white);
    }

    /* ================================= Ø´Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø· ================================= */
    .score-badge {
      position: fixed;
      top: 20px;
      left: 20px;
      background: var(--gradient-secondary);
      color: var(--white);
      padding: 10px 20px;
      border-radius: 25px;
      box-shadow: var(--shadow-medium);
      z-index: 2000;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 1.1rem;
    }

    /* ================================= Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© (Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª) ================================= */
    .progress-section {
      background: var(--dark-navy);
      padding: 50px;
      border-radius: 25px;
      color: var(--white);
      text-align: center;
    }

    .level-badge {
      background: rgba(255,255,255,0.2);
      padding: 20px 30px;
      border-radius: 15px;
      backdrop-filter: blur(5px);
    }

    .progress-fill {
      height: 100%;
      background: var(--success-green);
      border-radius: 10px;
      transition: width 0.8s ease-in-out;
      position: relative;
    }

    .level-up-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      background: var(--warning-orange);
      color: var(--white);
      padding: 50px;
      border-radius: 30px;
      box-shadow: var(--shadow-strong);
      z-index: 4000;
      opacity: 0;
      transition: all 0.5s ease;
      text-align: center;
    }
    .level-up-popup.show {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    
    /* ================================= Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…ØµØ­Ø­ ================================= */
    .test-container {
      background: var(--white);
      border-radius: 20px;
      padding: 30px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 30px;
    }

    .test-option {
      padding: 15px;
      margin-bottom: 10px;
      border: 2px solid #eee;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .test-option:hover {
      background: var(--light-gray);
    }

    .test-option.selected {
      border-color: var(--primary-blue);
      background: rgba(0, 86, 179, 0.05);
    }
    
    .test-option.correct {
      background-color: #d4edda;
      border-color: var(--success-green);
    }

    .test-option.wrong {
      background-color: #f8d7da;
      border-color: var(--danger-red);
    }
    
    .feedback-icon {
      position: absolute;
      top: 50%;
      left: 10px; /* Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ© */
      transform: translateY(-50%);
      font-size: 1.2rem;
    }
    
    /* ================================= Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙˆØª (GeoBot) ================================= */
    .qa-modal {
      /* ... ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø³Ø§Ø¨Ù‚Ø© ... */
    }
    
    .qa-container {
      /* ... ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø³Ø§Ø¨Ù‚Ø© ... */
    }

    .qa-body {
      padding: 30px;
      flex: 1;
      overflow-y: auto;
    }

    .chat-box {
      border: 1px solid #ddd;
      height: 400px;
      overflow-y: auto;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 10px;
      background: var(--light-gray);
    }

    .chat-message {
      display: flex;
      margin-bottom: 15px;
    }

    .chat-user {
      justify-content: flex-end;
    }

    .chat-bot {
      justify-content: flex-start;
    }

    .message-bubble {
      max-width: 70%;
      padding: 10px 15px;
      border-radius: 18px;
      line-height: 1.5;
    }

    .chat-user .message-bubble {
      background: var(--primary-blue);
      color: var(--white);
      border-bottom-left-radius: 0;
    }

    .chat-bot .message-bubble {
      background: var(--white);
      color: var(--dark-navy);
      border: 1px solid #eee;
      border-bottom-right-radius: 0;
    }
    
    .input-group {
      display: flex;
      gap: 10px;
    }

    .input-group input {
      flex-grow: 1;
      padding: 12px 20px;
      border: 2px solid #eee;
      border-radius: 50px;
      font-size: 1rem;
    }

    .input-group button {
      flex-shrink: 0;
      border-radius: 50px;
    }
    
    /* ================================= ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªØ´ÙˆÙŠÙ‚ÙŠØ© ================================= */
    .interactive-section {
      background: var(--dark-navy);
      color: var(--white);
      padding: 100px 0;
    }

    .modern-card {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255,255,255,0.2);
    }

    .feature-icon {
      background: var(--gradient-secondary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 3.5rem;
    }
    
    .tab-header {
      background: var(--gradient-secondary);
    }
    
    .tab-btn.active {
      background: rgba(0,0,0,0.2);
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
    
    /* ================================= Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª (Ù…Ø®ØªØµØ±Ø© Ù„Ø¹Ø¯Ù… Ø§Ù„ØªÙƒØ±Ø§Ø±) ================================= */
    /* ... (CSS for navbar, score-badge, footer, etc. from the previous code remains the same) ... */
    /* Ù„ØºØ© LTR */
    body[dir="ltr"] .score-badge {
      left: auto;
      right: 20px;
    }

    body[dir="ltr"] .language-switcher {
      right: auto;
      left: 20px;
    }

    body[dir="ltr"] .undo-redo-container {
      left: auto;
      right: 20px;
    }

    body[dir="ltr"] .qa-modal {
      /* ØªØµØ­ÙŠØ­ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙÙŠ ÙˆØ¶Ø¹ LTR */
    }

    body[dir="ltr"] .feedback-icon {
      left: auto;
      right: 10px;
    }
  </style>
  <script>
    // ================================= Ù‚Ø§Ù…ÙˆØ³ ØªØ±Ø¬Ù…Ø© Ø¨Ø³ÙŠØ· (Ù„Ù„ØªØ­Ø¯ÙŠ) =================================
    const translations = {
        'ar': {
            'title': 'GeoReady Pro | Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ†',
            'heroTitle': 'ğŸŒ GeoReady Pro',
            'heroSubtitle': 'Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© | Ù…Ù† Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø¥Ù„Ù‰ Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ù„',
            'startJourney': 'Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©',
            'explorePaths': 'Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª',
            'qaCenter': 'Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (GeoBot)',
            'dashboard': 'Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©',
            'learningPaths': 'Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªØ¹Ù„Ù…',
            'interactiveTools': 'Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©',
            'certificates': 'Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª',
            'community': 'Ø§Ù„Ù…Ø¬ØªÙ…Ø¹',
            'score': 'Ù†Ù‚Ø§Ø·',
            'totalPoints': 'Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„ÙƒÙ„ÙŠØ© (XP)',
            'currentLevel': 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ',
            'completedModules': 'ÙˆØ­Ø¯Ø© Ù…ÙƒØªÙ…Ù„Ø©',
            'earnedCerts': 'Ø´Ù‡Ø§Ø¯Ø© Ù…Ø­Ù‚Ù‚Ø©',
            'levelUp': 'ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰',
            'level1': '01 - Ù…Ø¨ØªØ¯Ø¦',
            'level2': '02 - Ù…ØªØ¯Ø±Ø¨',
            'nextLevelXP': 'Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨',
            'pathPetroleum': 'Ù…Ø³Ø§Ø± Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…',
            'pathMining': 'Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ù†ÙŠØ©',
            'quizTitle': 'Ø§Ø®ØªØ¨Ø§Ø± Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„',
            'quizQuestion1': 'Ù…Ø§ Ù‡ÙŠ Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ù†ÙØ·ØŸ',
            'quizOption1_1': 'Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ù†Ø§Ø±ÙŠØ©',
            'quizOption1_2': 'Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ø±Ø³ÙˆØ¨ÙŠØ© Ø§Ù„ØºÙ†ÙŠØ© Ø¨Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©',
            'quizOption1_3': 'Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ù…ØªØ­ÙˆÙ„Ø©',
            'quizOption1_4': 'Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØµØ®ÙˆØ±',
            'submitAnswer': 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ù„ØªØ­Ù‚Ù‚',
            'correctAnswer': 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! (+{points} XP)',
            'wrongAnswer': 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ØªÙ… ØªØ­Ø¯ÙŠØ¯Ù‡Ø§ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø±.',
            'selectAnswer': 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„',
            'geobotTitle': 'ğŸ¤– GeoBot: Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ',
            'askGeobot': 'Ø§Ø³Ø£Ù„ GeoBot Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹...',
            'send': 'Ø¥Ø±Ø³Ø§Ù„',
            'geobotWelcome': 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ GeoBotØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ. ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø¤Ø§Ù„ÙŠ Ø¹Ù† Ø£ÙŠ Ø¬Ø²Ø¡ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØµØ©.',
            'geobotResponsePrefix': 'Ø£Ù‡Ù„Ø§Ù‹! Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ÙƒØŒ Ø¥Ù„ÙŠÙƒ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ù€ "{query}": '
        },
        'en': {
            'title': 'GeoReady Pro | Comprehensive Geological Training Platform for Professionals',
            'heroTitle': 'ğŸŒ GeoReady Pro',
            'heroSubtitle': 'Integrated Geological Training Platform | From University to Job Market',
            'startJourney': 'Start Your Career Journey',
            'explorePaths': 'Explore Paths',
            'qaCenter': 'Q&A Center (GeoBot)',
            'dashboard': 'Dashboard',
            'learningPaths': 'Learning Paths',
            'interactiveTools': 'Interactive Tools',
            'certificates': 'Certificates',
            'community': 'Community',
            'score': 'Points',
            'totalPoints': 'Total Experience Points (XP)',
            'currentLevel': 'Current Level',
            'completedModules': 'Completed Modules',
            'earnedCerts': 'Certificates Earned',
            'levelUp': 'Congratulations! You Reached Level',
            'level1': '01 - Beginner',
            'level2': '02 - Intern',
            'nextLevelXP': 'XP Required',
            'pathPetroleum': 'Advanced Petroleum Geology Track',
            'pathMining': 'Mining and Mineral Resources Track',
            'quizTitle': 'Petroleum Geology Fundamentals Quiz',
            'quizQuestion1': 'What are the main source rocks for oil?',
            'quizOption1_1': 'Igneous rocks',
            'quizOption1_2': 'Sedimentary rocks rich in organic matter',
            'quizOption1_3': 'Metamorphic rocks',
            'quizOption1_4': 'All rock types',
            'submitAnswer': 'Submit Answer and Check',
            'correctAnswer': 'Correct Answer! (+{points} XP)',
            'wrongAnswer': 'Wrong Answer. The correct answer is highlighted in green.',
            'selectAnswer': 'Please select an answer before submitting',
            'geobotTitle': 'ğŸ¤– GeoBot: Your Smart Assistant',
            'askGeobot': 'Ask GeoBot any info about the site...',
            'send': 'Send',
            'geobotWelcome': 'Welcome! I am GeoBot, your smart assistant. You can ask me about any part of this platform.',
            'geobotResponsePrefix': 'Hello! Based on your question, here is some information about "{query}": '
        },
        'fr': {
            'title': 'GeoReady Pro | Plateforme ComplÃ¨te de Formation GÃ©ologique pour Professionnels',
            'heroTitle': 'ğŸŒ GeoReady Pro',
            'heroSubtitle': 'Plateforme IntÃ©grÃ©e de Formation GÃ©ologique | De l\'UniversitÃ© au MarchÃ© du Travail',
            'startJourney': 'Commencez Votre Parcours',
            'explorePaths': 'Explorez les FiliÃ¨res',
            'qaCenter': 'Centre Q&A (GeoBot)',
            'dashboard': 'Tableau de Bord',
            'learningPaths': 'FiliÃ¨res d\'Apprentissage',
            'interactiveTools': 'Outils Interactifs',
            'certificates': 'Certificats',
            'community': 'CommunautÃ©',
            'score': 'Points',
            'totalPoints': 'Points d\'ExpÃ©rience Totaux (XP)',
            'currentLevel': 'Niveau Actuel',
            'completedModules': 'UnitÃ©s TerminÃ©es',
            'earnedCerts': 'Certificats Obtenus',
            'levelUp': 'FÃ©licitations! Vous avez atteint le niveau',
            'level1': '01 - DÃ©butant',
            'level2': '02 - Stagiaire',
            'nextLevelXP': 'XP Requis',
            'pathPetroleum': 'FiliÃ¨re GÃ©ologie PÃ©troliÃ¨re AvancÃ©e',
            'pathMining': 'FiliÃ¨re Mines et Ressources MinÃ©rales',
            'quizTitle': 'Quiz Fondamentaux de GÃ©ologie PÃ©troliÃ¨re',
            'quizQuestion1': 'Quelles sont les principales roches mÃ¨res du pÃ©trole ?',
            'quizOption1_1': 'Roches ignÃ©es',
            'quizOption1_2': 'Roches sÃ©dimentaires riches en matiÃ¨re organique',
            'quizOption1_3': 'Roches mÃ©tamorphiques',
            'quizOption1_4': 'Tous les types de roches',
            'submitAnswer': 'Soumettre et VÃ©rifier la RÃ©ponse',
            'correctAnswer': 'RÃ©ponse Correcte! (+{points} XP)',
            'wrongAnswer': 'Mauvaise RÃ©ponse. La bonne rÃ©ponse est surlignÃ©e en vert.',
            'selectAnswer': 'Veuillez choisir une rÃ©ponse avant de soumettre',
            'geobotTitle': 'ğŸ¤– GeoBot: Votre Assistant Intelligent',
            'askGeobot': 'Demandez Ã  GeoBot toute info sur le site...',
            'send': 'Envoyer',
            'geobotWelcome': 'Bienvenue! Je suis GeoBot, votre assistant intelligent. Vous pouvez me poser des questions sur n\'importe quelle partie de cette plateforme.',
            'geobotResponsePrefix': 'Bonjour! D\'aprÃ¨s votre question, voici quelques informations concernant "{query}": '
        }
    };
    
    let currentLang = 'ar';

    function setLanguage(lang) {
        currentLang = lang;
        const dict = translations[lang];
        document.body.dir = (lang === 'ar' ? 'rtl' : 'ltr');

        // 1. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø³Ù…Ø© data-key)
        document.querySelectorAll('[data-key]').forEach(el => {
            const key = el.getAttribute('data-key');
            if (dict[key]) {
                if (el.tagName === 'TITLE') {
                    document.title = dict[key];
                } else if (el.tagName === 'INPUT' && el.placeholder) {
                    el.placeholder = dict[key];
                } else {
                    el.textContent = dict[key];
                }
            }
        });
        
        // 2. ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù„ØºØ©
        document.querySelectorAll('.language-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.getAttribute('data-lang') === lang) {
                btn.classList.add('active');
            }
        });
        
        // 3. ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        document.getElementById('startJourneyBtn').textContent = dict['startJourney'];
        document.getElementById('explorePathsBtn').textContent = dict['explorePaths'];
        document.getElementById('openQaModalBtn').textContent = dict['qaCenter'];
        
        // 4. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ÙƒÙˆØ±Ø¯ÙŠÙˆÙ† ÙˆØ§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© (ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ø£Ùˆ Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ÙƒÙˆÙ†)
        document.getElementById('pathPetroleumTitle').textContent = dict['pathPetroleum'];
        document.getElementById('quizTitle1').textContent = dict['quizTitle'];
    }

    // ================================= Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª =================================
    const STORAGE_KEY = 'geoready_progress_pro_v3';
    
    // ØªØ¹Ø±ÙŠÙ Ù…Ø³ØªÙˆÙŠØ§Øª XP Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
    const LEVEL_REQUIREMENTS = {
        1: 50,  // Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ù† 01 Ø¥Ù„Ù‰ 02
        2: 150, // Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ù† 02 Ø¥Ù„Ù‰ 03
        3: 300, 
        4: 500
    };

    let appState = {
      score: 0, 
      level: 1, // ğŸ‘ˆ ÙŠØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„ (Ø§Ù„Ù…Ø¨ØªØ¯Ø¦)
      completedActivities: [],
      history: [],
      historyIndex: -1
    };
    
    function calculateLevel(score) {
        let level = 1;
        for (const [lvl, req] of Object.entries(LEVEL_REQUIREMENTS)) {
            if (score >= req) {
                level = parseInt(lvl) + 1;
            } else {
                break;
            }
        }
        return level;
    }

    function loadProgress() {
        try {
            const raw = localStorage.getItem(STORAGE_KEY);
            if (raw) {
                appState = { ...appState, ...JSON.parse(raw) };
            }
            // Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ÙÙŠ Ø­Ø§Ù„ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø®Ù„Ù„ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ†
            appState.level = calculateLevel(appState.score); 
            
        } catch (e) {
            console.error('Error loading progress:', e);
        }
        updateAllUI();
    }

    function saveProgress() {
        try {
            appState.lastSaved = new Date().toISOString();
            localStorage.setItem(STORAGE_KEY, JSON.stringify(appState));
        } catch (e) {
            console.error('Error saving progress:', e);
        }
    }

    function addPoints(points, source, details = {}) {
        saveToHistory(); // Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø© Ù‚Ø¨Ù„ Ø§Ù„ØªØºÙŠÙŠØ±
        
        const oldLevel = appState.level;
        appState.score += points;
        
        const newLevel = calculateLevel(appState.score);
        
        appState.completedActivities.push({
            source,
            points,
            date: new Date().toISOString(),
            ...details
        });
        
        if (newLevel > oldLevel) {
            appState.level = newLevel;
            showLevelUpPopup(newLevel); // ğŸ‘ˆ Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ù‚ÙŠØ©
        }
        
        saveProgress();
        updateAllUI();
        showAchievement(translations[currentLang]['correctAnswer'].replace('{points}', points));
    }
    
    function updateAllUI() {
        updateScoreBadge();
        updateDashboardStats();
        updateUndoRedoButtons();
    }

    function updateScoreBadge() {
        document.getElementById('scoreValue').textContent = appState.score.toLocaleString();
        document.getElementById('totalPoints').textContent = appState.score.toLocaleString();
    }

    function updateDashboardStats() {
        const nextLevelReq = LEVEL_REQUIREMENTS[appState.level] || Infinity;
        const xpToNextLevel = nextLevelReq - appState.score;
        const xpInCurrentLevel = appState.score - (LEVEL_REQUIREMENTS[appState.level - 1] || 0);
        const levelSpan = nextLevelReq - (LEVEL_REQUIREMENTS[appState.level - 1] || 0);
        
        let percentage = (xpInCurrentLevel / levelSpan) * 100;
        if (appState.level >= Object.keys(LEVEL_REQUIREMENTS).length + 1) {
            percentage = 100; // Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰
        }
        
        document.getElementById('currentLevel').textContent = '0' + appState.level;
        
        const levelTextKey = appState.level === 1 ? 'level1' : appState.level === 2 ? 'level2' : 'level' + appState.level;
        document.getElementById('levelCurrentText').textContent = translations[currentLang][levelTextKey] || `Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${appState.level}`;

        const progressFill = document.querySelector('.progress-fill');
        if (progressFill) progressFill.style.width = `${percentage}%`;
        
        document.getElementById('progressText').textContent = 
            `${Math.round(percentage)}% Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ (${appState.score} / ${nextLevelReq} XP)`;
    }
    
    function showLevelUpPopup(level) {
        const popup = document.getElementById('levelUpPopup');
        document.getElementById('levelUpText').textContent = `${translations[currentLang]['levelUp']} ${level}!`;
        popup.classList.add('show');
        
        setTimeout(() => {
            popup.classList.remove('show');
        }, 5000);
    }

    // ================================= Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±Ø§Ø¬Ø¹ ÙˆØ§Ù„Ø¥Ø¹Ø§Ø¯Ø© =================================
    function saveToHistory() {
        // (Ù†ÙØ³ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
    }

    function restoreState(index) {
        // (Ù†ÙØ³ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
    }

    function undo() {
        // (Ù†ÙØ³ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
    }

    function redo() {
        // (Ù†ÙØ³ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
    }

    function updateUndoRedoButtons() {
        // (Ù†ÙØ³ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
    }
    
    // ================================= Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…ØµØ­Ø­ =================================
    function initTests() {
        document.querySelectorAll('.test-option').forEach(option => {
            option.addEventListener('click', function() {
                const testContainer = this.closest('.test-container');
                const options = testContainer.querySelectorAll('.test-option');
                
                // Ù…Ù†Ø¹ ØªØºÙŠÙŠØ± Ø§Ù„Ø®ÙŠØ§Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
                if (testContainer.querySelector('.submit-test').disabled) return;
                
                options.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        document.querySelectorAll('.submit-test').forEach(btn => {
            btn.addEventListener('click', function() {
                const testId = this.getAttribute('data-test');
                const testContainer = this.closest('.test-container');
                const selectedOption = testContainer.querySelector('.test-option.selected');
                
                if (!selectedOption) {
                    alert(translations[currentLang]['selectAnswer']);
                    return;
                }
                
                const points = parseInt(this.getAttribute('data-points') || 50);
                const isCorrect = selectedOption.getAttribute('data-correct') === 'true';

                // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù„Ù…Ù†Ø¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯
                this.disabled = true;
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„ÙÙˆØ±ÙŠØ©
                testContainer.querySelectorAll('.test-option').forEach(opt => {
                    opt.style.pointerEvents = 'none'; // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
                    const isOptionCorrect = opt.getAttribute('data-correct') === 'true';
                    
                    if (isOptionCorrect) {
                        opt.classList.add('correct'); // ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¨Ø§Ù„Ø£Ø®Ø¶Ø±
                        opt.innerHTML += `<span class="feedback-icon"><i class="fas fa-check-circle"></i></span>`;
                    }
                    
                    if (opt === selectedOption && !isCorrect) {
                        opt.classList.add('wrong'); // ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø© Ø¨Ø§Ù„Ø£Ø­Ù…Ø±
                        opt.innerHTML += `<span class="feedback-icon"><i class="fas fa-times-circle"></i></span>`;
                    }
                });
                
                // Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ÙÙ‚Ø·
                if (isCorrect) {
                    addPoints(points, `test_${testId}`, { testId, correct: true });
                } else {
                    showAchievement(translations[currentLang]['wrongAnswer']);
                }
            });
        });
    }

    // ================================= Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ÙƒÙˆØ±Ø¯ÙŠÙˆÙ† (Ø§Ù„Ø®Ø§Ù†Ø© > ØªÙØ§ØµÙŠÙ„ Ø£Ø®Ø±Ù‰) =================================
    function initAccordions() {
      document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', function() {
          const accordion = this.parentElement;
          const isActive = accordion.classList.contains('active');
          
          document.querySelectorAll('.accordion').forEach(acc => {
            if (acc !== accordion) {
              acc.classList.remove('active');
            }
          });
          
          // ØªÙØ¹ÙŠÙ„ Ø£Ùˆ Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆØ±Ø¯ÙŠÙˆÙ† (Ø§Ù„Ø®Ø§Ù†Ø© > ØªÙØ§ØµÙŠÙ„)
          accordion.classList.toggle('active', !isActive); 
          
          if (!isActive) {
              addPoints(5, 'accordion_view', { id: accordion.id }); // Ù…ÙƒØ§ÙØ£Ø© Ù„ÙØªØ­ ØªÙØ§ØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯Ø©
          }
        });
      });
    }

    // ================================= Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø°ÙƒÙŠ (GeoBot) =================================
    
    // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª GeoBot Ø§Ù„Ø¨Ø³ÙŠØ·Ø©
    const GEOSITE_DATA = {
        'Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„': 'Ù…Ø³Ø§Ø± Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙƒØ§Ù…Ù† ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙŠØ²Ù…ÙŠØ© ÙˆØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø­Ù‚ÙˆÙ„. ÙŠÙˆÙØ± 3500 XP Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.',
        'Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ': 'ØªØ¬Ø§Ø±Ø¨ Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ ØªØªÙŠØ­ Ù„Ùƒ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„ØµØ¹Ø¨Ø© ÙˆØ§Ù„Ù†Ø§Ø¦ÙŠØ© Ø¨ØªÙ‚Ù†ÙŠØ© 360 Ø¯Ø±Ø¬Ø©ØŒ Ù…Ù…Ø§ ÙŠÙƒØ³Ø¨Ùƒ 15 XP Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡.',
        'Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø©': 'Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø© (XP) Ù‡ÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ„Ø¹ÙŠØ¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§ØŒ ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ ØªØªØ¨Ø¹ ØªÙ‚Ø¯Ù…Ùƒ ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ù† Ù…Ø³ØªÙˆÙ‰ Ù„Ø¢Ø®Ø±. Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØªØ·Ù„Ø¨ 50 XP.',
        'Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ†': 'Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ÙŠØºØ·ÙŠ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø®Ø§Ù…Ø§ØªØŒ ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ØŒ ÙˆØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù†Ø§Ø¬Ù…. ÙˆÙ‡Ùˆ Ù…Ø³Ø§Ø± Ø´Ø§Ù…Ù„ ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙŠÙˆÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ØªÙ†Ù‚ÙŠØ¨ Ø§Ù„Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠ.',
        'Ø´Ù‡Ø§Ø¯Ø§Øª': 'Ù†Ù‚Ø¯Ù… Ø´Ù‡Ø§Ø¯Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø© Ù…Ø«Ù„ Ø´Ù‡Ø§Ø¯Ø© Ø®Ø¨ÙŠØ± Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„ ÙˆØ´Ù‡Ø§Ø¯Ø© Ù…Ø®ØªØµ ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ØŒ ÙˆØ§Ù„ØªÙŠ ØªÙ…Ù†Ø­ 1000 XP Ùˆ 800 XP Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ù„ÙŠ.'
    };

    function geoBotResponse(query) {
        query = query.toLowerCase().trim();
        
        if (query.length < 3) {
            return "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¤Ø§Ù„ Ø£ÙƒØ«Ø± ØªØ­Ø¯ÙŠØ¯Ø§Ù‹.";
        }
        
        let bestMatch = null;
        for (const keyword in GEOSITE_DATA) {
            if (query.includes(keyword.toLowerCase())) {
                bestMatch = keyword;
                break;
            }
        }
        
        if (bestMatch) {
            return GEOSITE_DATA[bestMatch];
        } else {
            return "Ø¢Ø³ÙØŒ Ù„Ø§ Ø£Ù…Ù„Ùƒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø­Ø¯Ø¯Ø© Ø­ÙˆÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹. ÙŠØ±Ø¬Ù‰ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ© Ø£Ø®Ø±Ù‰ (Ù…Ø«Ù„: Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„ØŒ Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØŒ Ø´Ù‡Ø§Ø¯Ø§Øª).";
        }
    }

    function addChatMessage(sender, message) {
        const chatBox = document.getElementById('chatBox');
        const messageElement = document.createElement('div');
        messageElement.className = `chat-message ${sender === 'user' ? 'chat-user' : 'chat-bot'}`;
        messageElement.innerHTML = `<div class="message-bubble">${message}</div>`;
        chatBox.appendChild(messageElement);
        
        // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø£Ø³ÙÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    document.getElementById('sendGeobotMsg').addEventListener('click', function() {
        const input = document.getElementById('geobotInput');
        const query = input.value.trim();
        
        if (query) {
            addChatMessage('user', query);
            input.value = '';
            
            // Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø· Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¨ÙˆØª (Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙØ§Ø¹Ù„)
            addPoints(2, 'geobot_query'); 
            
            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± Ø§Ù„Ø¨ÙˆØª
            setTimeout(() => {
                const response = geoBotResponse(query);
                addChatMessage('bot', translations[currentLang]['geobotResponsePrefix'].replace('{query}', query) + response);
            }, 1000);
        }
    });
    
    // ØªÙ‡ÙŠØ¦Ø© Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨ÙˆØª
    document.getElementById('openQaModalBtn').addEventListener('click', function() {
      document.getElementById('qaModal').classList.add('active');
      const chatBox = document.getElementById('chatBox');
      chatBox.innerHTML = ''; // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø´Ø§Øª
      addChatMessage('bot', translations[currentLang]['geobotWelcome']);
    });

    document.getElementById('closeQaModal').addEventListener('click', function() {
      document.getElementById('qaModal').classList.remove('active');
    });

    // ================================= Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ =================================
    document.addEventListener('DOMContentLoaded', function() {
      loadProgress(); // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹

      // ØªÙØ¹ÙŠÙ„ ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©
      document.querySelectorAll('.language-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const lang = this.getAttribute('data-lang');
          setLanguage(lang);
          // Ø¨Ø¹Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© ÙŠØ¬Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ø¯ÙŠØ« Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
          updateDashboardStats();
        });
      });
      
      setLanguage('ar'); // Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©

      initAccordions();
      initTests();
      
      // Ø±Ø¨Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¨Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·
      document.querySelectorAll('.start-tool, .start-activity, .start-certificate, .btn-primary').forEach(btn => {
        if (!btn.classList.contains('submit-test') && !btn.id.includes('Btn')) {
            btn.addEventListener('click', function() {
                const points = parseInt(this.getAttribute('data-points') || 5);
                const activityType = this.getAttribute('data-tool') || this.getAttribute('data-cert') || 'general_click';
                addPoints(points, activityType, { text: this.textContent.trim() });
            });
        }
      });
      
      // ØªÙØ¹ÙŠÙ„ Ø­Ø±ÙƒØ© Ø§Ù„ØªÙ†Ù‚Ù„
      window.addEventListener('scroll', function() {
        const navbar = document.getElementById('navbar');
        if (window.scrollY > 100) {
          navbar.classList.add('scrolled');
        } else {
          navbar.classList.remove('scrolled');
        }
      });
      
      // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª (Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚)
      document.querySelectorAll('.tab-btn').forEach(btn => {
          btn.addEventListener('click', function() {
              const tabId = this.getAttribute('data-tab');
              document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
              this.classList.add('active');
              document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
              document.getElementById(tabId).classList.add('active');
          });
      });
      
      // Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®
      saveToHistory();
      updateUndoRedoButtons();
    });
  </script>
</head>
<body dir="rtl">

  <div class="score-badge">
    <i class="fas fa-star"></i>
    <span data-key="score">Ù†Ù‚Ø§Ø·</span>: <span class="score-value" id="scoreValue">0</span>
  </div>

  <div class="language-switcher">
    <button class="language-btn" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
    <button class="language-btn" data-lang="en">English</button>
    <button class="language-btn" data-lang="fr">FranÃ§ais</button>
  </div>

  <div class="undo-redo-container">
    <button class="undo-btn" id="undoBtn" title="ØªØ±Ø§Ø¬Ø¹"><i class="fas fa-undo"></i></button>
    <button class="redo-btn" id="redoBtn" title="Ø¥Ø¹Ø§Ø¯Ø©"><i class="fas fa-redo"></i></button>
  </div>

  <header>
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title" data-key="heroTitle">ğŸŒ GeoReady Pro</h1>
        <p class="hero-subtitle" data-key="heroSubtitle">Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© | Ù…Ù† Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø¥Ù„Ù‰ Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ù„</p>
        <div class="hero-cta">
          <button id="startJourneyBtn" class="btn btn-primary" data-points="10"><i class="fas fa-rocket"></i> Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</button>
          <button id="explorePathsBtn" class="btn btn-outline" data-points="5"><i class="fas fa-compass"></i> Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª</button>
          <button id="openQaModalBtn" class="btn btn-outline" data-points="5"><i class="fas fa-question-circle"></i> Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (GeoBot)</button>
        </div>
      </div>
    </div>
  </header>

  <nav class="navbar" id="navbar">
    <div class="container">
      <div class="nav-content">
        <div class="logo">GeoReady Pro</div>
        <ul class="nav-links">
          <li><a href="#dashboard" class="active"><i class="fas fa-tachometer-alt"></i> <span data-key="dashboard">Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©</span></a></li>
          <li><a href="#learning-paths"><i class="fas fa-graduation-cap"></i> <span data-key="learningPaths">Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªØ¹Ù„Ù…</span></a></li>
          <li><a href="#interactive-tools"><i class="fas fa-tools"></i> <span data-key="interactiveTools">Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</span></a></li>
          <li><a href="#certificates"><i class="fas fa-certificate"></i> <span data-key="certificates">Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª</span></a></li>
          <li><a href="#community"><i class="fas fa-users"></i> <span data-key="community">Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</span></a></li>
        </ul>
      </div>
    </div>
  </nav>
  
  <hr>

  <section id="dashboard" class="dashboard-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll" data-key="dashboard">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</h2>
      
      <div class="dashboard-grid animate-on-scroll">
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-trophy"></i></div>
          <div class="stat-number" id="totalPoints">0</div>
          <div class="stat-label" data-key="totalPoints">Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„ÙƒÙ„ÙŠØ© (XP)</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-star"></i></div>
          <div class="stat-number" id="currentLevel">01</div>
          <div class="stat-label" data-key="currentLevel">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
          <div class="stat-number" id="completedModules">0</div>
          <div class="stat-label" data-key="completedModules">ÙˆØ­Ø¯Ø© Ù…ÙƒØªÙ…Ù„Ø©</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-certificate"></i></div>
          <div class="stat-number" id="earnedCerts">0</div>
          <div class="stat-label" data-key="earnedCerts">Ø´Ù‡Ø§Ø¯Ø© Ù…Ø­Ù‚Ù‚Ø©</div>
        </div>
      </div>

      <div class="progress-section animate-on-scroll">
        <h3>ğŸ¯ Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù</h3>
        <div class="level-display">
          <div class="level-badge">
            <h4>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ</h4>
            <div style="font-size: 2rem; font-weight: 900;" id="levelCurrentText">01 - Ù…Ø¨ØªØ¯Ø¦</div>
          </div>
          <div class="level-badge">
            <h4>Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</h4>
            <div style="font-size: 1.5rem;" data-key="nextLevelXP">50 XP</div>
          </div>
        </div>
        
        <div class="progress-bar-container">
          <div class="progress-bar">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
          <p id="progressText">0% Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ (0 / 50 XP)</p>
        </div>
      </div>
    </div>
  </section>
  
  <hr>

  <section class="interactive-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll">ğŸš€ Ø£Ø­Ø¯Ø« Ø·Ø±Ù‚ Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„ØªØ¯Ø±ÙŠØ¨</h2>
      <p class="section-subtitle animate-on-scroll" style="color: rgba(255,255,255,0.8);">Ø§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ØªØ¹Ù„Ù… ØªÙØ§Ø¹Ù„ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª ÙˆØ§Ù„Ù…Ù†Ù‡Ø¬ÙŠØ§Øª</p>
      
      <div class="tab-container animate-on-scroll">
        <div class="tab-header">
          <button class="tab-btn active" data-tab="virtual-reality">Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</button>
          <button class="tab-btn" data-tab="simulations">Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</button>
          <button class="tab-btn" data-tab="gamification">Ø§Ù„ØªÙ„Ø¹ÙŠØ¨</button>
        </div>
        <div class="tab-content">
          <div class="tab-pane active" id="virtual-reality">
            <p style="color: #ccc;">Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© Ù…Ù† Ø®Ù„Ø§Ù„ ØªØ¬Ø§Ø±Ø¨ Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø§Ù„Ù…Ø°Ù‡Ù„Ø©. ØªØ³Ù„Ù‚ Ø§Ù„Ø¬Ø¨Ø§Ù„ØŒ Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ù…Ù†Ø§Ø¬Ù…ØŒ ÙˆØ§ØºÙˆØµ ÙÙŠ Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„Ø£Ø±Ø¶ Ø¯ÙˆÙ† Ù…ØºØ§Ø¯Ø±Ø© Ù…Ù†Ø²Ù„Ùƒ.</p>
            <div class="feature-grid">
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-vr-cardboard"></i></div>
                <h4 class="feature-title">Ø±Ø­Ù„Ø§Øª Ù…ÙŠØ¯Ø§Ù†ÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</h4>
                <p class="feature-description" style="color: #ccc;">Ø²ÙŠØ§Ø±Ø© Ù…ÙˆØ§Ù‚Ø¹ Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù… Ø¨ØªÙ‚Ù†ÙŠØ© 360 Ø¯Ø±Ø¬Ø©.</p>
                <button class="btn btn-success start-tool" data-tool="vr-trip" data-points="15">Ø§Ø¨Ø¯Ø£ Ø¬ÙˆÙ„Ø© VR (+15 XP)</button>
              </div>
            </div>
          </div>
          </div>
      </div>
    </div>
  </section>

  <hr>

  <section id="learning-paths" class="learning-paths">
    <div class="container">
      <h2 class="section-title animate-on-scroll" data-key="learningPaths">ğŸ“ Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªØ®ØµØµÙŠØ©</h2>
      
      <div class="accordion-container">
        <div class="accordion" id="accordion-1">
          <div class="accordion-header"> <h3 id="pathPetroleumTitle" data-key="pathPetroleum">Ù…Ø³Ø§Ø± Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h3>
            <span class="accordion-icon"><i class="fas fa-chevron-down"></i></span>
          </div>
          <div class="accordion-content"> <div class="test-container" id="test-1">
              <h3 id="quizTitle1" class="test-title">Ø§Ø®ØªØ¨Ø§Ø± Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„</h3>
              <p class="test-question" data-key="quizQuestion1">Ù…Ø§ Ù‡ÙŠ Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ù†ÙØ·ØŸ</p>
              
              <ul class="test-options">
                <li class="test-option" data-correct="false" data-key="quizOption1_1">Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ù†Ø§Ø±ÙŠØ©</li>
                <li class="test-option" data-correct="true" data-key="quizOption1_2">Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ø±Ø³ÙˆØ¨ÙŠØ© Ø§Ù„ØºÙ†ÙŠØ© Ø¨Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©</li>
                <li class="test-option" data-correct="false" data-key="quizOption1_3">Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ù…ØªØ­ÙˆÙ„Ø©</li>
                <li class="test-option" data-correct="false" data-key="quizOption1_4">Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØµØ®ÙˆØ±</li>
              </ul>
              <button class="btn btn-primary submit-test" data-test="test-1" data-points="50" data-key="submitAnswer">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ù„ØªØ­Ù‚Ù‚</button>
            </div>
          </div>
        </div>

        <div class="accordion" id="accordion-2">
          <div class="accordion-header"> <h3 data-key="pathMining">Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ù†ÙŠØ©</h3>
            <span class="accordion-icon"><i class="fas fa-chevron-down"></i></span>
          </div>
          <div class="accordion-content"> <button class="btn btn-primary start-tool" data-tool="start-mining" data-points="15">Ø¨Ø¯Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ø§Ø± (+15 XP)</button>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <hr>

  <section id="interactive-tools" class="interactive-tools">
    <div class="container">
      <h2 class="section-title animate-on-scroll" data-key="interactiveTools">ğŸ› ï¸ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆØ§Ù„Ù…Ø­Ø§ÙƒÙŠØ§Øª</h2>
      
      <div class="tools-grid">
        <div class="tool-card animate-on-scroll">
          <div class="tool-icon"><i class="fas fa-cube"></i></div>
          <h3 class="tool-title">Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ù†Ù…Ø°Ø¬Ø© Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯</h3>
          <button class="btn btn-primary start-tool" data-tool="3d-modeler" data-points="10">ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø© (+10 XP)</button>
        </div>

        <div class="tool-card animate-on-scroll">
          <div class="tool-icon"><i class="fas fa-chart-area"></i></div>
          <h3 class="tool-title">Ù…Ø­Ù„Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙŠØ²Ù…ÙŠØ©</h3>
          <button class="btn btn-primary start-tool" data-tool="seismic-analyzer" data-points="25">ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø© (+25 XP)</button>
        </div>
      </div>
    </div>
  </section>

  <hr>
  
  <section id="certificates" class="certificates-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll" data-key="certificates">ğŸ† Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</h2>
      
      <div class="cert-grid">
        <div class="cert-card animate-on-scroll">
          <div class="cert-icon"><i class="fas fa-medal"></i></div>
          <h3 class="cert-title">Ø´Ù‡Ø§Ø¯Ø© Ø®Ø¨ÙŠØ± Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¨ØªØ±ÙˆÙ„</h3>
          <button class="btn btn-primary start-certificate" data-cert="cert-petroleum" data-points="1000">Ø§Ù„ØªÙ‚Ø¯Ù… Ù„Ù„Ø´Ù‡Ø§Ø¯Ø© (+1000 XP)</button>
        </div>
      </div>
    </div>
  </section>

  <hr>

  <section id="community" class="community-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll" data-key="community">ğŸ‘¥ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ ÙˆØ§Ù„Ø¯Ø¹Ù…</h2>
      
      <div class="community-grid">
        <div class="community-card animate-on-scroll">
          <div style="font-size: 3rem; margin-bottom: 25px; color: var(--primary-blue);">
            <i class="fas fa-comments"></i>
          </div>
          <h3 style="font-size: 1.5rem;">Ù…Ù†ØªØ¯ÙŠØ§Øª Ø§Ù„Ù†Ù‚Ø§Ø´</h3>
          <button class="btn btn-primary start-activity" data-activity="forums" data-points="5">Ø§Ù†Ø¶Ù… Ù„Ù„Ù…Ù†ØªØ¯ÙŠØ§Øª (+5 XP)</button>
        </div>
      </div>
    </div>
  </section>

  <footer>
    </footer>

  <div class="qa-modal" id="qaModal">
    <div class="qa-container">
      <div class="qa-header">
        <h2 data-key="geobotTitle">ğŸ¤– GeoBot: Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ</h2>
        <button class="close-btn" id="closeQaModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="qa-body">
        <div class="chat-box" id="chatBox">
          </div>
        <div class="input-group">
          <input type="text" id="geobotInput" data-key="askGeobot" placeholder="Ø§Ø³Ø£Ù„ GeoBot Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹..." onkeydown="if(event.key === 'Enter') document.getElementById('sendGeobotMsg').click()">
          <button class="btn btn-primary" id="sendGeobotMsg" data-points="2" data-key="send">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
      </div>
    </div>
  </div>

  <div class="achievement-popup" id="achievementPopup">
    </div>
  
  <div class="level-up-popup" id="levelUpPopup">
    <i class="fas fa-crown" style="font-size: 3rem; margin-bottom: 20px;"></i>
    <h2 id="levelUpText" style="font-size: 2.5rem; font-weight: 700;">ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2!</h2>
    <p style="font-size: 1.2rem; margin-top: 15px;">ØªÙ… ÙØªØ­ Ù…Ø­ØªÙˆÙ‰ ÙˆØªØ­Ø¯ÙŠØ§Øª Ø¬Ø¯ÙŠØ¯Ø©.</p>
  </div>
</body>
</html>
