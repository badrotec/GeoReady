<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GeoChallenge โ ูุณุงุฑ ุงูุฎุจูุฑ ุงูุฌููููุฌู</title>
<style>
  :root{
    --bg1:#041426; --card:#071726; --muted:#9fb0c8;
    --accent1:#06b6d4; --accent2:#7c3aed; --accent3:#ff8a3d;
    --good:#16a34a; --bad:#ef4444; --glass: rgba(255,255,255,0.03);
    --level1:#94a3b8; --level2:#7dd3fc; --level3:#c0c0c0; --level4:#ffd700;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, "Segoe UI", Arial, sans-serif; background:linear-gradient(180deg,#031022 0%,#071428 70%); color:#eef7ff; min-height:100vh}
  
  /* ุงูุชุนุฏูู 1: ุชูููู ุงูุนุฑุถ ุงูุฃูุตู ููู wrap ูุฌุนูู ุฃูุฑุจ ูุญูุงู ุงููุงุชู */
  .wrap{max-width:600px;margin:0 auto;padding:12px} /* ุชู ุชุบููุฑ max-width ู margin ู padding */
  
  /* ุงูุชุนุฏูู 2: ุชุตููู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุงูุฌุฏูุฏุฉ */
  .dashboard {display:flex; flex-direction:column; gap:16px}
  
  .header-main {text-align:center; margin-bottom:10px}
  .header-main h1 {margin:0; font-size:24px; background:linear-gradient(90deg, var(--accent1), var(--accent2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-weight:900}
  .header-main .subtitle {color:var(--muted); font-size:13px; margin-top:4px}
  
  /* ูุณุงุฑ ุงูุชูุฏู */
  .progress-path {background:var(--card); border-radius:12px; padding:16px; box-shadow:0 8px 30px rgba(2,6,23,0.5); margin-bottom:8px}
  .path-title {font-weight:800; font-size:16px; margin-bottom:12px; text-align:center}
  .progress-bar-container {height:24px; background:rgba(255,255,255,0.05); border-radius:12px; overflow:hidden; margin-bottom:12px; position:relative}
  .progress-bar-fill {height:100%; background:linear-gradient(90deg, var(--accent1), var(--accent2)); width:0%; border-radius:12px; transition:width 0.8s ease; position:relative; overflow:hidden}
  .progress-bar-fill::after {content:''; position:absolute; top:0; left:0; bottom:0; right:0; background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); animation:shimmer 2s infinite}
  @keyframes shimmer {0%{transform:translateX(-100%)} 100%{transform:translateX(100%)}}
  .progress-stats {display:flex; justify-content:space-between; font-size:12px; color:var(--muted)}
  .current-level {font-weight:700; color:var(--accent3); font-size:14px; text-align:center; margin-top:8px}
  
  /* ุฃูุณุงู ุงููููุน */
  .dashboard-sections {display:grid; grid-template-columns:repeat(2, 1fr); gap:12px}
  .dashboard-card {background:var(--card); border-radius:10px; padding:16px; cursor:pointer; transition:all 0.3s ease; box-shadow:0 4px 12px rgba(2,6,23,0.4); display:flex; flex-direction:column; align-items:center; text-align:center; min-height:120px; justify-content:center}
  .dashboard-card:hover {transform:translateY(-5px); box-shadow:0 8px 20px rgba(2,6,23,0.6)}
  .dashboard-card .icon {font-size:28px; margin-bottom:8px}
  .dashboard-card .title {font-weight:700; font-size:14px; margin-bottom:4px}
  .dashboard-card .desc {font-size:11px; color:var(--muted)}
  
  /* ุฒุฑ ุงูุฑุฌูุน */
  .back-button {position:absolute; top:12px; right:12px; background:rgba(255,255,255,0.05); border:none; width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:var(--muted); cursor:pointer; transition:all 0.2s ease; z-index:10}
  .back-button:hover {background:rgba(255,255,255,0.1); transform:scale(1.05)}
  
  /* ุจููุฉ ุงูุชูุณููุงุช ุงูุญุงููุฉ ูุน ุชุญุณููุงุช */
  header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:12px}
  .brand{display:flex;align-items:center;gap:8px}
  .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:900;color:#fff; font-size:18px}
  h1{margin:0;font-size:18px; line-height:1.2}
  .subtitle{color:var(--muted);font-size:12px}
  .controls{display:flex;gap:6px;align-items:center}
  button.btn{background:linear-gradient(90deg,var(--accent1),var(--accent2));border:none;padding:7px 10px;border-radius:6px;color:#fff;cursor:pointer;font-weight:700; font-size:13px; transition:all 0.2s ease}
  button.btn:hover {transform:translateY(-2px); box-shadow:0 4px 12px rgba(6,182,212,0.4)}
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 9px;border-radius:6px;color:var(--muted); font-size:13px; transition:all 0.2s ease}
  button.ghost:hover {background:rgba(255,255,255,0.05)}
  .lang-toggle{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:6px;cursor:pointer;color:var(--muted); font-size:13px; transition:all 0.2s ease}
  .lang-toggle:hover {background:rgba(255,255,255,0.06)}
  .container{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;padding:14px;box-shadow:0 8px 30px rgba(2,6,23,0.5)}
  
  .sections{display:grid;grid-template-columns:1fr;gap:10px;margin-bottom:12px}
  .section-card{background:var(--card);padding:12px;border-radius:8px;cursor:pointer;transition:transform .22s,box-shadow .22s;box-shadow:0 4px 12px rgba(2,6,23,0.4)}
  .section-card:hover{transform:none;box-shadow:0 6px 16px rgba(2,6,23,0.5)}
  .section-title{font-weight:800;font-size:15px}
  .section-desc{color:var(--muted);font-size:12px;margin-top:4px}
  
  .quiz-area{margin-top:8px;min-height:300px;position:relative;overflow:hidden}
  .question-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);transition:transform .35s,opacity .35s}
  .fade-in{animation:fadeIn .28s ease}
  @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
  
  .question-meta{display:flex;flex-direction:column-reverse; justify-content:space-between;align-items:center;margin-bottom:10px;gap:8px} 
  .qnum{font-weight:800;color:var(--accent3);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.02); font-size:14px}
  .timer{font-weight:900;padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.02); min-width:60px; text-align:center}
  
  .question-meta > div:last-child {display:flex;gap:12px;align-items:center; width:100%; justify-content:space-between;}
  
  .scorebox{min-width:120px;text-align:center; padding: 4px 0;}
  .score-value{font-size:18px;font-weight:900;color:var(--accent1)}
  .level-badge{display:inline-block;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,0.03);margin-top:4px;color:var(--muted); font-size:11px}
  
  .question-text{font-size:15px;margin:6px 0 10px}
  .answers{display:flex;flex-direction:column;gap:8px}
  .answer{background:var(--glass);padding:10px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);cursor:pointer;transition:transform .12s,background .12s;display:flex;align-items:center;gap:8px; font-size:14px}
  .answer:hover{transform:translateY(-2px); background:rgba(255,255,255,0.05)}
  .answer .opt-label{min-width:26px;text-align:center;font-weight:800; font-size:14px; background:rgba(255,255,255,0.05); border-radius:4px; padding:2px 0}
  
  .answer.correct {background:rgba(22,163,74,0.15); border-color:rgba(22,163,74,0.3)}
  .answer.wrong {background:rgba(239,68,68,0.15); border-color:rgba(239,68,68,0.3)}
  
  .progress-wrap{display:flex;align-items:center;gap:6px;margin-top:10px}
  .progress-bar{flex:1;height:8px;background:rgba(255,255,255,0.03);border-radius:8px;overflow:hidden}
  .progress-bar > div{height:100%;background:linear-gradient(90deg,var(--accent1),var(--accent2));width:0%}
  .small-muted{color:var(--muted);font-size:11px}
  
  .controls-bottom{display:flex;gap:6px;align-items:center;margin-top:10px; flex-wrap:wrap; justify-content:space-between}
  .controls-bottom .ghost { flex-grow:1; }
  .controls-bottom #timeTip { order:3; flex-basis:100%; text-align:center; margin-top:6px; }

  .result-panel{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:10px;background:linear-gradient(180deg, rgba(2,6,23,0.7), rgba(2,6,23,0.9));backdrop-filter:blur(3px); z-index:100}
  .result-card{background:linear-gradient(180deg,#071226,#08162a);padding:18px;border-radius:10px;width:95%;max-width:400px;border:1px solid rgba(255,255,255,0.04);text-align:center}
  .bigscore{font-size:36px;font-weight:900;color:var(--accent2);margin:6px 0}
  .res-details{color:var(--muted);margin-top:6px; font-size:13px}
  .res-actions{display:flex;gap:6px;justify-content:center;margin-top:12px}
  
  footer{font-size:11px; padding-bottom: 20px; text-align:center}

  /* ุงูุชุนุฏูู 3: ุงุณุชุนูุงูุงุช ุงููุณุงุฆุท (Media Queries) */
  @media(min-width:600px){ 
    .wrap{max-width:900px;margin:18px auto;padding:16px}
    .sections{grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:14px}
    .section-card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(2,6,23,0.6)}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
    .question-meta{display:flex;flex-direction:row; gap:10px; margin-bottom:12px; }
    .question-meta > div:last-child { width:auto; justify-content:flex-end; }
    .scorebox{min-width:220px; text-align:center; padding: 0;}
    h1{font-size:20px}
    .subtitle{font-size:13px}
    .dashboard-sections {grid-template-columns:repeat(4, 1fr)}
  }
  
  /* ุชุฃุซูุฑุงุช ุฅุถุงููุฉ */
  .pulse {animation:pulse 1.5s infinite}
  @keyframes pulse {0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
  
  .confetti {position:fixed; width:10px; height:10px; background:var(--accent3); opacity:0.7; z-index:1000; animation:confetti-fall 5s linear forwards}
  @keyframes confetti-fall {0%{transform:translateY(-100px) rotate(0deg); opacity:1}100%{transform:translateY(100vh) rotate(360deg); opacity:0}}
  
  .level-up {position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(7,23,38,0.9); padding:20px; border-radius:12px; text-align:center; z-index:1000; animation:levelUp 2s ease forwards; box-shadow:0 0 30px rgba(255,138,61,0.5); border:2px solid var(--accent3)}
  @keyframes levelUp {0%{opacity:0; transform:translate(-50%, -50%) scale(0.5)}20%{opacity:1; transform:translate(-50%, -50%) scale(1.1)}40%{transform:translate(-50%, -50%) scale(1)}80%{opacity:1}100%{opacity:0; transform:translate(-50%, -50%) scale(1)}}
</style>
</head>
<body>
  <div class="wrap">
    <!-- ุฒุฑ ุงูุฑุฌูุน (ูุธูุฑ ููุท ุฎุงุฑุฌ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ) -->
    <button class="back-button" id="backButton" style="display:none">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
    </button>
    
    <!-- ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (ููุญุฉ ุงูุชุญูู) -->
    <div class="dashboard" id="dashboard">
      <div class="header-main">
        <h1>GeoChallenge</h1>
        <div class="subtitle">ูุณุงุฑ ุงูุฎุจูุฑ ุงูุฌููููุฌู โข The Geologist's Path</div>
      </div>
      
      <div class="progress-path">
        <div class="path-title">ูุณุงุฑ ุชูุฏูู</div>
        <div class="progress-bar-container">
          <div class="progress-bar-fill" id="progressBarFill"></div>
        </div>
        <div class="progress-stats">
          <span>ุฎุฑูุฌ ุฌุฏูุฏ</span>
          <span>ุฎุจูุฑ ุฌููููุฌู</span>
        </div>
        <div class="current-level" id="currentLevel">ุฎุฑูุฌ ุฌุฏูุฏ (0%)</div>
      </div>
      
      <div class="dashboard-sections">
        <div class="dashboard-card" id="startChallengeBtn">
          <div class="icon">๐งช</div>
          <div class="title">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</div>
          <div class="desc">ุงุฎุชุจุฑ ูุนุฑูุชู ุงูุฌููููุฌูุฉ</div>
        </div>
        
        <div class="dashboard-card" id="scenariosBtn">
          <div class="icon">๐บ๏ธ</div>
          <div class="title">ุณููุงุฑูููุงุช ููุฏุงููุฉ</div>
          <div class="desc">ุชุญุฏูุงุช ุนูููุฉ ุญููููุฉ</div>
        </div>
        
        <div class="dashboard-card" id="glossaryBtn">
          <div class="icon">๐</div>
          <div class="title">ูุงููุณ ุงููุตุทูุญุงุช</div>
          <div class="desc">ูุฑุฌุน ุณุฑูุน ูููุตุทูุญุงุช</div>
        </div>
        
        <div class="dashboard-card" id="toolkitBtn">
          <div class="icon">๐๏ธ</div>
          <div class="title">ุฃุฏูุงุช ุงูุญูู</div>
          <div class="desc">ุชุนุฑู ุนูู ุฃุฏูุงุช ุงูุฌููููุฌู</div>
        </div>
      </div>
    </div>
    
    <!-- ุงูุฃูุณุงู ูุงูุงุฎุชุจุงุฑุงุช (ูุฎูู ูู ุงูุจุฏุงูุฉ) -->
    <main class="container" id="mainContainer" style="display:none">
      <header>
        <div class="brand">
          <div class="logo">GQ</div>
          <div>
            <h1>GeoChallenge โ ุงุฎุชุจุงุฑุงุช ุนูููุฉ</h1>
            <div class="subtitle">ุชุฏุฑูุจ ููุฏุงูู ุชูุงุนูู โ ุนุฑุจู / English</div>
          </div>
        </div>

        <div class="controls">
          <div class="lang-toggle" id="langToggle">ุงูุนุฑุจู / EN</div>
          <button class="ghost" id="leaderBtn">ุงููุชุงุฆุฌ</button>
        </div>
      </header>

      <section>
        <div class="sections" id="sectionList"></div>
      </section>

      <section class="quiz-area" id="quizArea" style="display:none">
        <div class="question-card fade-in" id="questionCard">
          <div class="question-meta">
            <div class="qnum" id="qLabel">ุงูุณุคุงู 1 / Q1</div>
            <div style="display:flex;gap:12px;align-items:center">
              <div class="scorebox">
                <div class="small-muted" id="scoreLabel">ุงูููุงุท</div>
                <div class="score-value" id="scoreVal">0</div>
                <div class="level-badge" id="levelBadge">ูุจุชุฏุฆ</div>
              </div>
              <div class="timer" id="timerLabel">00:30</div>
            </div>
          </div>

          <div class="question-text" id="qText">ูุต ุงูุณุคุงู โฆ</div>
          <div class="answers" id="answersBox"></div>

          <div class="progress-wrap">
            <div class="small-muted" id="progressLabel">ุงูุณุคุงู 1 ูู 30</div>
            <div class="progress-bar"><div id="progInner"></div></div>
            <div style="width:100px;text-align:right">
              <button class="btn" id="skipBtn">ุชุฌุงูุฒ</button>
            </div>
          </div>

          <div class="controls-bottom">
            <button class="ghost" id="backToMenu">ุงูุนูุฏุฉ ูููุงุฆูุฉ</button>
            <div style="flex:1"></div>
            <div class="small-muted" id="timeTip">ุงููุฏุฉ ููู ุณุคุงู: 30 ุซุงููุฉ</div>
          </div>
        </div>
      </section>
    </main>

    <footer>GeoChallenge โ ูููุฐุฌ ุชุฏุฑูุจู ูุญูู โข ูุญูุธ ุงููุชุงุฆุฌ ูู ุงููุชุตูุญ</footer>
  </div>

  <!-- ูุงูุฐุฉ ุงููุชุงุฆุฌ -->
  <div id="resultModal" class="result-panel" style="display:none">
    <div class="result-card">
      <h2 id="resTitle">ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</h2>
      <div class="bigscore" id="resScore">0 ููุทุฉ</div>
      <div class="res-details" id="resDetails"></div>
      <div class="res-actions">
        <button class="btn" id="retryBtn">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
        <button class="ghost" id="closeResBtn">ุฅุบูุงู</button>
      </div>
      <div style="margin-top:10px" class="small-muted" id="savedNote"></div>
    </div>
  </div>

<script>
/* GeoChallenge โ ุชุทููุฑ ูุงูู ูููููุน ูุน ูุธุงู ุงูุชูุฏู ูุงููุณุชููุงุช
   - ูุธุงู ุงูุชูุฏู ูุงููุณุชููุงุช ุงูุฌุฏูุฏ
   - ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ ูุน ุชุฃุซูุฑุงุช
   - ุฃุตูุงุช ูุชุฃุซูุฑุงุช ุจุตุฑูุฉ ูุญุณูุฉ
   - ุงูุญูุงุธ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ ูุงูุฃูุณุงู ุงูุฃุตููุฉ
*/

/* ---------- Language ---------- */
const LANGS = {
  ar: {
    start: "ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ",
    skip: "ุชุฌุงูุฒ",
    retry: "ุฅุนุงุฏุฉ ุงููุญุงููุฉ",
    close: "ุฅุบูุงู",
    score: "ุงูููุงุท",
    level: "ุงููุณุชูู",
    questionOf: "ุงูุณุคุงู {i} ูู {n}",
    savedNote: "ุชู ุญูุธ ุงููุชูุฌุฉ ูุญูููุง ูู ูุชุตูุญู.",
    leaderboardEmpty: "ูุง ูุชุงุฆุฌ ูุญููุธุฉ ุจุนุฏ.",
    newGraduate: "ุฎุฑูุฌ ุฌุฏูุฏ",
    juniorGeologist: "ุฌููููุฌู ูุจุชุฏุฆ",
    fieldGeologist: "ุฌููููุฌู ููุฏุงูู",
    expertGeologist: "ุฌููููุฌู ุฎุจูุฑ",
    congrats: "ุชูุงูููุง!"
  },
  en: {
    start: "Start Quiz",
    skip: "Skip",
    retry: "Retry",
    close: "Close",
    score: "Score",
    level: "Level",
    questionOf: "Question {i} of {n}",
    savedNote: "Saved locally in your browser.",
    leaderboardEmpty: "No saved results yet.",
    newGraduate: "New Graduate",
    juniorGeologist: "Junior Geologist",
    fieldGeologist: "Field Geologist",
    expertGeologist: "Expert Geologist",
    congrats: "Congratulations!"
  }
};
let lang = localStorage.getItem('geo_lang') || 'ar';
const langToggle = document.getElementById('langToggle');
function t(key, vars){ const s = LANGS[lang][key] || key; if(!vars) return s; return s.replace(/{(\w+)}/g,(m,k)=>vars[k]||m); }
function refreshLangUI(){ 
  document.getElementById('scoreLabel').textContent = t('score'); 
  document.getElementById('skipBtn').textContent = t('skip'); 
  document.getElementById('retryBtn').textContent = t('retry'); 
  document.getElementById('closeResBtn').textContent = t('close'); 
  langToggle.textContent = (lang==='ar')? 'ุงูุนุฑุจู / EN' : 'AR / English'; 
  updateProgressUI();
}

/* ---------- ูุธุงู ุงูุชูุฏู ูุงููุณุชููุงุช ---------- */
const LEVELS = [
  { name: t('newGraduate'), min: 0, max: 20, color: 'var(--level1)' },
  { name: t('juniorGeologist'), min: 21, max: 40, color: 'var(--level2)' },
  { name: t('fieldGeologist'), min: 41, max: 70, color: 'var(--level3)' },
  { name: t('expertGeologist'), min: 71, max: 100, color: 'var(--level4)' }
];

let userProgress = JSON.parse(localStorage.getItem('geo_progress') || '{"totalAnswered":0,"totalCorrect":0,"progressPercent":0,"currentLevel":0,"completedSections":[]}');

function updateProgress(pointsEarned = 0, sectionCompleted = false) {
  if (pointsEarned > 0) {
    userProgress.totalAnswered++;
    userProgress.totalCorrect++;
    // ุฒูุงุฏุฉ ุงูุชูุฏู ุจูุงุกู ุนูู ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ
    userProgress.progressPercent = Math.min(100, userProgress.progressPercent + (100 / 120)); // 120 ุณุคุงู ุฅุฌูุงูู
  } else if (pointsEarned < 0) {
    userProgress.totalAnswered++;
    // ุฎุตู ุฃูู ููุชูุฏู ุนูุฏ ุงูุฅุฌุงุจุงุช ุงูุฎุงุทุฆุฉ
    userProgress.progressPercent = Math.max(0, userProgress.progressPercent - (50 / 120));
  }
  
  if (sectionCompleted && currentSection && !userProgress.completedSections.includes(currentSection)) {
    userProgress.completedSections.push(currentSection);
    // ููุงูุฃุฉ ุฅุถุงููุฉ ุนูุฏ ุฅููุงู ูุณู ูุงูู
    userProgress.progressPercent = Math.min(100, userProgress.progressPercent + 5);
  }
  
  // ุชุญุฏูุซ ุงููุณุชูู ุงูุญุงูู
  const newLevel = getCurrentLevel();
  if (newLevel !== userProgress.currentLevel) {
    userProgress.currentLevel = newLevel;
    showLevelUpAnimation(newLevel);
  }
  
  localStorage.setItem('geo_progress', JSON.stringify(userProgress));
  updateProgressUI();
}

function getCurrentLevel() {
  for (let i = 0; i < LEVELS.length; i++) {
    if (userProgress.progressPercent >= LEVELS[i].min && userProgress.progressPercent <= LEVELS[i].max) {
      return i;
    }
  }
  return 0;
}

function updateProgressUI() {
  const progressBar = document.getElementById('progressBarFill');
  const currentLevelEl = document.getElementById('currentLevel');
  
  if (progressBar && currentLevelEl) {
    progressBar.style.width = `${userProgress.progressPercent}%`;
    const currentLevel = LEVELS[userProgress.currentLevel];
    currentLevelEl.textContent = `${currentLevel.name} (${Math.round(userProgress.progressPercent)}%)`;
    progressBar.style.background = currentLevel.color;
  }
}

function showLevelUpAnimation(levelIndex) {
  playLevelUp();
  const levelUpDiv = document.createElement('div');
  levelUpDiv.className = 'level-up';
  levelUpDiv.innerHTML = `
    <div style="font-size:24px; margin-bottom:10px">๐ ${t('congrats')}</div>
    <div style="font-size:18px; font-weight:bold; color:var(--accent3)">${LEVELS[levelIndex].name}</div>
    <div style="margin-top:10px">ููุฏ ุชูุฏูุช ุฅูู ูุณุชูู ุฌุฏูุฏ!</div>
  `;
  document.body.appendChild(levelUpDiv);
  
  // ุฅุถุงูุฉ ุชุฃุซูุฑ ูููููุชู
  createConfetti();
  
  setTimeout(() => {
    document.body.removeChild(levelUpDiv);
  }, 2000);
}

function createConfetti() {
  const colors = ['#06b6d4', '#7c3aed', '#ff8a3d', '#16a34a', '#ef4444'];
  for (let i = 0; i < 50; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = `${Math.random() * 100}vw`;
    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.width = `${Math.random() * 10 + 5}px`;
    confetti.style.height = `${Math.random() * 10 + 5}px`;
    confetti.style.animationDelay = `${Math.random() * 2}s`;
    document.body.appendChild(confetti);
    
    setTimeout(() => {
      if (confetti.parentNode) {
        document.body.removeChild(confetti);
      }
    }, 5000);
  }
}

/* ---------- Quiz data (4ร30) ----------
ุชู ุงูุงุญุชูุงุธ ุจุฌููุน ุงูุฃุณุฆูุฉ ุงูุฃุตููุฉ ููุง ูู
*/
const QUIZZES = {
  hydro: {
    title_ar: "ุงูููุฏุฑูุฌููููุฌูุง โ ุฃุณุงุณู", title_en: "Hydrogeology โ Basic",
    items: [
      { q_ar:"ูุง ุงููุฑู ุจูู ุงูุทุจูุฉ ุงููุงุฆูุฉ ุงูุญุฑุฉ ูุงููุญุจูุณุฉุ", q_en:"Difference between unconfined and confined aquifer?", choices_ar:["ุงูุญุฑุฉ ููุง ููุณูุจ ูุงุก ูุชุณุงูู ูุน ุงูุถุบุท ุงูุฌููุ ุงููุญุจูุณุฉ ุชุญุช ุถุบุท ุงุฑุชูุงุฒู","ุงูุญุฑุฉ ุฃูู ููุงุฐูุฉ ูู ุงููุญุจูุณุฉ","ุงููุญุจูุณุฉ ููู ุงูุณุทุญ ููุท","ุงูุญุฑุฉ ูููููุฉ ูู ุงูุตุฎูุฑ ุงููุงุฑูุฉ ููุท"], choices_en:["Unconfined has water table; confined under artesian pressure","Unconfined less permeable than confined","Confined exists only at surface","Unconfined made of igneous rocks only"], answerIndex:0 },
      { q_ar:"ูุง ููุน ุงูุตุฎูุฑ ุงูุชู ุชุดูู ุฃูุถู ุฎุฒุงูุงุช ูุงุฆูุฉุ", q_en:"Which rock types make the best aquifers?", choices_ar:["ุงูุฑูู ูุงูุญุตู ูุงูุญุฌุฑ ุงูุฌูุฑู ุงููุชุดูู","ุงูุตุฎูุฑ ุงูุทูููุฉ ุงููุฏูุฌุฉ","ุงูุตุฎูุฑ ุงูุจููุฑูุฉ ุบูุฑ ุงููุดููุฉ","ุงูุดูุนูุจ ุงูุจุฑูุงููุฉ"], choices_en:["Sands, gravels and fractured limestones","Compact clays","Unfractured crystalline rocks","Volcanic reefs"], answerIndex:0 },
      { q_ar:"ูุง ุงูููุตูุฏ ุจุงูู Aquicludeุ", q_en:"What is an aquiclude?", choices_ar:["ุทุจูุฉ ุชููุน ูุฑูุฑ ุงูููุงู ุนููููุง (ุทูููุฉ ุนุงุฏุฉ)","ุฎุฒุงู ูุงุฆู ุนุงูู ุงูููุงุฐูุฉ","ูุฌุฑู ููุฑู ุณุทุญู","ูุญุฏุฉ ุตุฎุฑูุฉ ุจุฑูุงููุฉ"], choices_en:["A layer that practically prevents water flow (usually clay)","A highly permeable aquifer","A surface river channel","A volcanic rock unit"], answerIndex:0 },
      { q_ar:"ูุง ูู ุงูููุณูุจ ุงูุณุงูู ููููุงู ุงูุฌูููุฉุ", q_en:"What is static water level?", choices_ar:["ูุณุชูู ุงููุงุก ูู ุงูุจุฆุฑ ุนูุฏ ุนุฏู ุงูุถุฎ","ุฃุนูู ููุทุฉ ูู ุงูุฎุฒุงู","ูุณุชูู ุงููุฏ ูุงูุฌุฒุฑ","ูุณุชูู ุงูุฃูุทุงุฑ ุงูุณูููุฉ"], choices_en:["Water level in well when not pumped","Deepest point of aquifer","Tidal level","Annual rainfall level"], answerIndex:0 },
      { q_ar:"ููู ูููุงุณ ุงูุชุตุฑูู ูู ุจุฆุฑ ููุชุฌุฉุ", q_en:"How is well discharge measured?", choices_ar:["ุจูููุงุณ ุงูุชุฏูู ุฃู ุชุฃุซูุฑ ูุณุชูู ุงูุงูุฎูุงุถ ุนุจุฑ ุงูุฒูู","ุจุงูุชุตููุฑ ุงูุฌูู ููุท","ุจูููุงุณ ุงูุญุฑุงุฑุฉ","ุจุงูุชุญููู ุงูุจููุฑู"], choices_en:["Using flow meter or measuring drawdown over time","By aerial imaging only","With thermometer","By crystal analysis"], answerIndex:0 },
      { q_ar:"ูุงุฐุง ูุนูู Recharge areaุ", q_en:"What is recharge area?", choices_ar:["ููุทูุฉ ุชุบุฐูุฉ ุงูุฎุฒุงู ูู ุงูุณุทุญ","ููุทูุฉ ุชุณุฑูุจ ููุงู ุงูุตุฑู ููุท","ุฎุฒุงู ุณุทุญู ูุบูู","ููุทูุฉ ุบูุฑ ูููุฉ"], choices_en:["Area where aquifer is recharged from surface","Only sewage leak zone","Closed surface pond","Unimportant area"], answerIndex:0 },
      { q_ar:"ูุง ุงูุนูุงูุฉ ุจูู ุงูููุงุฐูุฉ ูุงูุชูุตูู ุงูููุฏุฑูููููุ", q_en:"Relation between permeability and hydraulic conductivity?", choices_ar:["ุงูุชูุตูู ุงูููุฏุฑููููู ูุชุถูู ุงูููุงุฐูุฉ ุจุงูุฅุถุงูุฉ ูุฎูุงุต ุงูุณุงุฆู","ูุง ุนูุงูุฉ","ููุงุฐูุฉ ุฃูุจุฑ ุชุนูู ุชูุตูู ุฃุตุบุฑ","ููุง ููุณ ุงูุดูุก ุชูุงููุง"], choices_en:["Hydraulic conductivity includes permeability plus fluid properties","No relation","Higher permeability means lower conductivity","They are exactly same"], answerIndex:0 },
      { q_ar:"ูุง ุงูุงุฎุชุจุงุฑ ุงูููุฏุงูู ูุชุญุฏูุฏ ุงูููุงุฐูุฉุ", q_en:"Which field test determines permeability?", choices_ar:["ุงุฎุชุจุงุฑ ุงูุถุฎ (Pumping test) ุฃู Slug test","ุงููุณุญ ุงูุฌููููุฒูุงุฆู ููุท","ุงุฎุชุจุงุฑ ุงูุงูุจุนุงุซ ุงูุทููู","ุชุญุงููู ูููุฑูุณููุจูุฉ ููุท"], choices_en:["Pumping test or slug test","Only geophysical survey","Spectral emission test","Only microscopic analyses"], answerIndex:0 },
      { q_ar:"ูุง ุชุฃุซูุฑ ุงูุถุฎ ุงูููุฑุท ุนูู ููุณูุจ ุงูููุงูุ", q_en:"Effect of overpumping on groundwater levels?", choices_ar:["ุงูุฎูุงุถ ููุณูุจ ุงูููุงู ูุชุดููู ูุฎุฑูุท ุงูุฎูุงุถ","ุงุฑุชูุงุน ุฏุงุฆู ูููุณูุจ ุงููุงุก","ูุง ุชุฃุซูุฑ","ุฒูุงุฏุฉ ุงูุชูููู ุงูุญููู"], choices_en:["Water level decline and drawdown cone","Permanent rise in water level","No effect","Increased bioactivity"], answerIndex:0 },
      { q_ar:"ูุง ุงููุฑู ุจูู ุงูุจุฆุฑ ุงูุชุฌุฑูุจูุฉ ูุงูุจุฆุฑ ุงูุฅูุชุงุฌูุฉุ", q_en:"Difference between exploratory and production well?", choices_ar:["ุงูุชุฌุฑูุจูุฉ ููุงุฎุชุจุงุฑ ูุงูููุงุณุงุชุ ูุงูุฅูุชุงุฌูุฉ ููุงุณุชุบูุงู ูุงูุชุฒููุฏ ุจุงูููุงู","ููุงููุง ููุณ ุงููุธููุฉ","ุงูุชุฌุฑูุจูุฉ ุฃูุจุฑ ุญุฌูุง","ุงูุงูุชุงุฌูุฉ ุชุณุชุฎุฏู ููุจุญูุซ ููุท"], choices_en:["Exploration for testing; production for supply","Both same","Exploration larger","Production used only for research"], answerIndex:0 },
      { q_ar:"ูุง ุงูุบุฑุถ ูู ุงุฎุชุจุงุฑ ุงูุถุฎุ", q_en:"Purpose of pumping test?", choices_ar:["ุชุญุฏูุฏ ููุงุฐูุฉ ุงูุฎุฒุงู ููุนุงูู ุงูุชุฎุฒูู ูุณููู ุงูุถุฎ","ูุนุฑูุฉ ุชุฑููุจ ุงูุตุฎูุฑ ุงูุจููุฑูุฉ","ุชุญุฏูุฏ ููุน ุงููุนุงุฏู ุงูุซูููุฉ","ุชุญุฏูุฏ ูุณุชูู ุงููููุญุฉ ููุท"], choices_en:["Determine aquifer permeability and storage coefficients","Identify crystalline rock types","Find heavy minerals","Only determine salinity"], answerIndex:0 },
      { q_ar:"ููู ุชุญุฏุฏ ุงุชุฌุงู ุชุฏูู ุงูููุงู ุงูุฌูููุฉุ", q_en:"How determine groundwater flow direction?", choices_ar:["ุจุฑุณู ุฎุทูุท ุชุณุงูู ุงูููุณูุจ (potentiometric contours) ุจูู ุงูุขุจุงุฑ","ุจุญุณุงุจ ุณุฑุนุฉ ุงูุฑูุงุญ","ุจููุงุณุงุช ุงูุญุฑุงุฑุฉ ููุท","ุนู ุทุฑูู ุตูุฑ ุงูุงููุงุฑ ููุท"], choices_en:["By plotting potentiometric contours from wells","By wind speed calculation","By temperature only","Using satellite images only"], answerIndex:0 },
      { q_ar:"ูุงุฐุง ุชุนูู ุฒูุงุฏุฉ ุงููููุญุฉ ูุน ุงูุฒูู ูู ุจุฆุฑุ", q_en:"What does rising salinity over time indicate?", choices_ar:["ุชุฏุงุฎู ููุงู ูุงูุญุฉ (ุจุญุฑูุฉ) ุฃู ุชููุซ ูุตุฏุฑ ุนููู","ุชุญุณูู ุฌูุฏุฉ ุงูููุงู","ุฒูุงุฏุฉ ุงูุฃูุณุฌูู","ุชุบูุฑ ุงูุทูุณ ููุท"], choices_en:["Sea water intrusion or deep saline source contamination","Improved water quality","Increased oxygen","Weather change only"], answerIndex:0 },
      { q_ar:"ูุง ุงูุบุฑุถ ูู ุงูุชุญููู ุงูููุฏุฑูููููุงุฆูุ", q_en:"Purpose of hydrochemical analysis?", choices_ar:["ุชุญุฏูุฏ ูุตุฏุฑ ุงูููุงูุ ุงูุชููุซุ ููุงุจููุฉ ุงูุงุณุชุฎุฏุงู","ููุงุณ ุงูุถุบุท ููุท","ุชุญููู ุงูุตุฎูุฑ","ุชุญุฏูุฏ ููุน ุงูุจูุชูุฑูุง ููุท"], choices_en:["Identify water source, contamination and suitability","Measure pressure only","Analyze rocks","Identify bacteria only"], answerIndex:0 },
      { q_ar:"ูุง ุตูุบุฉ ูุงููู ุฏุงุฑุณู ุงูุฃุณุงุณูุฉุ", q_en:"Basic Darcy's law equation?", choices_ar:["Q = -K A (dh/dl)","Q = m v","P = ฯgh","Q = A v^2"], choices_en:["Q = -K A (dh/dl)","Q = m v","P = ฯgh","Q = A v^2"], answerIndex:0 },
      { q_ar:"ูุง ุฃุซุฑ ุชููุซ ุงูุณุทุญ ุนูู ุงูููุงู ุงูุฌูููุฉุ", q_en:"Effect of surface contamination on groundwater?", choices_ar:["ุชุณุฑุจ ุงููููุซุงุช ุฅูู ุงูุฎุฒุงู ุนุจุฑ ููุงุทู ุงูุชุบุฐูุฉ ููุง ูุถุฑ ุจุงูููุงู","ูุง ุชุฃุซูุฑ ุนุงุฏุฉ","ูุฒูุฏ ููุงุฐูุฉ ุงูุชุฑุจุฉ","ููุฎูุถ ูุณุชูู ุงููุงุก ููุท"], choices_en:["Pollutants percolate to aquifer via recharge zones","Usually no effect","Increases soil permeability","Only lowers water level"], answerIndex:0 },
      { q_ar:"ููู ุชุญุฏุฏ ุญุฏูุฏ ุงูุฎุฒุงู ูู ุงูุฎุฑุงุฆุทุ", q_en:"How delineate aquifer boundaries from maps?", choices_ar:["ุจููุงุฑูุฉ ุงูุชููููุงุช ุงูุญุงููุฉ ููุณุงุญุงุช ุงูุตุฎูุฑ ุงููููุฐูุฉ ูุฎุทูุท ุงูุชูุงุณ","ูู ูููุงุณ ุงูุฎุฑูุทุฉ ููุท","ุจูุงุณุทุฉ ุงูุตูุฑ ุงูุฌููุฉ ููุท","ุนู ุทุฑูู ููุงุณ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ููุท"], choices_en:["By mapping permeable formations and contact extents","From map scale only","Using aerial photos alone","By measuring temperature only"], answerIndex:0 },
      { q_ar:"ูุง ุงููุฑู ุจูู ุงููุณุงููุฉ ุงููููุฉ ูุงููุนุงูุฉุ", q_en:"Difference between total porosity and effective porosity?", choices_ar:["ุงููุนุงูุฉ ูู ุงููุฑุงุบุงุช ุงููุชุตูุฉ ุงููุงุจูุฉ ูุชุฏูู ุงููุงุกุ ุงููููุฉ ุชุดูู ูู ุงููุฑุงุบุงุช","ููุง ูุชูุงุซูุชุงู","ุงููููุฉ ุฃุตุบุฑ ุฏุงุฆูุงู","ุงููุณุงููุฉ ูุง ุชุชุนูู ุจุงููุงุก"], choices_en:["Effective porosity is connected pores allowing flow; total includes all pores","They are identical","Total is always smaller","Porosity unrelated to water"], answerIndex:0 },
      { q_ar:"ูุง ูุนูู Drawdownุ", q_en:"What is drawdown?", choices_ar:["ุงูุฎูุงุถ ูุณุชูู ุงููุงุก ูุชูุฌุฉ ุงูุถุฎ ูู ุงูุจุฆุฑ","ุงุฑุชูุงุน ูุณุชูู ุงููุงุก","ุชุบูุฑ ุฏุฑุฌุฉ ุงููููุญุฉ","ุชุบูุฑ ูู ุงูุถุบุท ุงูุฌูู"], choices_en:["Decline in water level due to pumping","Rise in water level","Change in salinity","Change in atmospheric pressure"], answerIndex:0 },
      { q_ar:"ูุง ุงูุนูุงูู ุงููุคุซุฑุฉ ุนูู ุฌูุฏุฉ ุงูููุงู ุงูุฌูููุฉุ", q_en:"Factors affecting groundwater quality?", choices_ar:["ููุน ุงูุตุฎูุฑุ ุงูุฃูุดุทุฉ ุงูุจุดุฑูุฉุ ุงูุชููุซ ุงูุฒุฑุงุนูุ ุงูุชุฏุงุฎู ุงููุงูุญ","ููู ุงูุชุฑุจุฉ ููุท","ูุฌูุฏ ุงูุฃุดุฌุงุฑ ููุท","ุงูุฒูุงุฒู ููุท"], choices_en:["Rock type, human activity, agricultural pollution, saline intrusion","Soil color only","Presence of trees only","Only earthquakes"], answerIndex:0 },
      { q_ar:"ูุง ูุธููุฉ ุงููุฑุงูุจ (Piezometer)ุ", q_en:"Function of a piezometer?", choices_ar:["ููุงุณ ุถุบุท ุงููุงุก ุฃู ููุณูุจ ุงูููุงู ูู ููุทุฉ ูุญุฏุฏุฉ","ููุงุณ ุณุฑุนุฉ ุงูุฑูุงุญ","ููุงุณ ุชูุตูููุฉ ุงูุชุฑุจุฉ ููุฑุจุงุฆูุงู","ููุงุณ ุชุฑููุฒ ุงููุนุงุฏู"], choices_en:["Measure water pressure or level at a point","Measure wind speed","Measure soil electrical conductivity","Measure mineral concentration"], answerIndex:0 },
      { q_ar:"ูุงุฐุง ูุญุฏุซ ุฅุฐุง ุงุฑุชูุน ุงูุถุบุท ุงูุงุฑุชูุงุฒูุ", q_en:"What if artesian pressure rises?", choices_ar:["ูุฏ ููุชุฌ ุจุฆุฑ ุงุฑุชูุงุฒู ูุชุฏูู ุฏูู ุงูุญุงุฌุฉ ููุถุฎ","ููุฎูุถ ูุณุชูู ุงููุงุก ูู ูู ุงูุขุจุงุฑ","ุชุชููู ุญุฑูุฉ ุงูููุงู","ูุฒูุฏ ุงูุชุฑุณูุจ ููุท"], choices_en:["May produce flowing artesian well without pumping","Water levels fall in all wells","Water movement stops","Only deposition increases"], answerIndex:0 },
      { q_ar:"ููู ุชุญุฏุฏ ุทุจูุงุช ุงูููุงู ูู ุณุฌูุงุช ุงูุฌููููุฑุจุงุกุ", q_en:"How detect aquifers from resistivity logs?", choices_ar:["ุงูุฎูุงุถ ุงูููุงููุฉ ูุดูุฑ ูุตุฎูุฑ ูุดุจุนุฉ ุจุงููุงุก ููุงุฑูุฉ ุจุงูุตุฎูุฑ ุงูุฌุงูุฉ","ุฒูุงุฏุฉ ุงูููุงููุฉ ุฏุงุฆููุง ุนูุงูุฉ ุนูู ุงููุงุก","ูุง ุนูุงูุฉ ููููุงููุฉ ุจุงููุงุก","ุจุงุณุชุฎุฏุงู ูููุงุณ ุงูุตูุช ููุท"], choices_en:["Lower resistivity indicates water-saturated rocks vs dry ones","Higher resistivity always means water","No relation between resistivity and water","Use sonic log only"], answerIndex:0 },
      { q_ar:"ูุง ุชุฃุซูุฑ ุงูุญูุฑ ุงูุนููู ุนูู ุชูุงุฒู ุงููุธุงู ุงููุงุฆูุ", q_en:"Impact of deep drilling on groundwater balance?", choices_ar:["ูููู ุฃู ูุบูุฑ ุงูุถุบูุท ููุณูุญ ุจุชุฏุงุฎู ููุงู ุนูููุฉ ุฃู ููุญูุฉ","ูุญุฏุซ ููุท ุชุฃุซูุฑ ุญุฑุงุฑู","ูุญุณู ุฏุงุฆููุง ุฌูุฏุฉ ุงูููุงู","ููุณ ูู ุชุฃุซูุฑ ุนููู"], choices_en:["It may change pressures and cause deep or saline water intrusion","Only thermal effect","Always improves water quality","No practical effect"], answerIndex:0 },
      { q_ar:"ูุง ุงูุนูุงูุฉ ุจูู ููุน ุงูุตุฎูุฑ ูุงูุชูุตูู ุงูููุฏุฑูููููุ", q_en:"Relation between rock type and hydraulic conductivity?", choices_ar:["ุงูุตุฎูุฑ ุงูุฎุดูุฉ (ุฑููุ ุญุตู) ุชููู ุชูุตููุงู ุฃุนูู ูู ุงูุทูู","ุงูุทูู ุฃูุซุฑ ููุงุฐูุฉ","ุงูุตุฎูุฑ ุงูุจููุฑูุฉ ุฃุนูู ุชูุตูู","ูุง ุนูุงูุฉ"], choices_en:["Coarse rocks (sand, gravel) have higher conductivity than clay","Clay is more permeable","Crystalline rocks have highest conductivity","No relation"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุฑ ุงูุชุฑุจุฉ ูู ุชุบุฐูุฉ ุงูุฎุฒุงูุงุชุ", q_en:"Role of soil in aquifer recharge?", choices_ar:["ุชุนูู ููุฑุดุญ ูุชุชุญูู ูู ูุนุฏู ุชุณุฑุจ ุงูููุงู ูููุงุฆูุง","ุชูุชุต ูู ุงูููุงู ููุง ุชุณูุญ ุจุงูุชุบุฐูุฉ","ุชุณูู ููุท ูู ุงูุชููุซ","ูุง ุฏูุฑ ููุง"], choices_en:["Acts as filter and controls infiltration rate and water quality","Absorbs all water preventing recharge","Only contributes to pollution","No role"], answerIndex:0 },
      { q_ar:"ููู ุชูุชุดู ุชุณุฑูุจ ูู ุฎุฒุงู ุชุญุช ุงูุฃุฑุถุ", q_en:"How detect leak from underground storage?", choices_ar:["ุจูุฑุงูุจุฉ ุชุบููุฑ ุงูููููุงุก ูุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ุฃู ุงููุณุญ ุงูุฌููููุฒูุงุฆู","ุจููุงุณ ุงูุถูุถุงุก ููุท","ูู ุฎูุงู ุงูุฃุดุนุฉ ุชุญุช ุงูุญูุฑุงุก ููุท","ุจุงูุนููุงุช ุงููููุฑูุจููููุฌูุฉ ููุท"], choices_en:["Monitor chemical/temperature changes or use geophysical surveys","By noise measurement only","By infrared only","By microbiological samples only"], answerIndex:0 },
      { q_ar:"ูุง ุงูููุตูุฏ ุจุงูุชูุงุฒู ุงูููุฏุฑูููุฌูุ", q_en:"What is hydrological balance?", choices_ar:["ุชูุงุฒู ุจูู ูุฏุฎูุงุช ุงููุงุก (ูุทููุ ุชุบุฐูุฉ) ููุฎุฑุฌุงุชู (ุชุฏููุ ุชุจุฎุฑุ ุถุฎ)","ูููุฉ ุงููุงุก ูู ุงูุจุฆุฑ ููุท","ูุนุฏู ุงูุชุฑุณูุจ ุงูููููุงุฆู","ุชูุงุฒู ุงูููุญ ููุท"], choices_en:["Balance between water inputs (rain,recharge) and outputs (flow,evaporation,pumping)","Amount in one well only","Rate of chemical deposition","Salt balance only"], answerIndex:0 },
      { q_ar:"ูุง ุฃูู ูุคุดุฑุงุช ุชููุซ ุงููุชุฑุงุช ูู ุงูุขุจุงุฑุ", q_en:"Indicators of nitrate contamination in wells?", choices_ar:["ุชุฑููุฒ ูุชุฑุงุช ูุฑุชูุนุ ุทุนู ูุฑ ุฃู ูุดุงูู ุตุญูุฉุ ูุฑุจ ููุงุทู ุฒุฑุงุนูุฉ ุฃู ุตุฑู ุตุญู","ููู ุงููุงุก ุงูุฃุฒุฑู","ุฒูุงุฏุฉ ูู ุงูุถุบุท ููุท","ุงูุฎูุงุถ ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ"], choices_en:["High nitrate concentration, health effects, proximity to agriculture/sewage","Blue colored water","Only pressure increase","Temperature drop only"], answerIndex:0 },
      { q_ar:"ูุง ุงุณุชุฎุฏุงู GIS ูู ุงูููุฏุฑูุฌููููุฌูุงุ", q_en:"Use of GIS in hydrogeology?", choices_ar:["ุฑุณู ุฎุฑุงุฆุท ุงูุชุบุฐูุฉุ ุฎุทูุท ุงูููุณูุจุ ููุฐุฌุฉ ุงูุชุดุงุฑ ุงููููุซุงุช ูุชุญููู ุงููุณุงุญุงุช","ูุชุญููู ุงููุนุงุฏู ุชุญุช ุงููุฌูุฑ ููุท","ูุง ูุงุฆุฏุฉ","ูุงุณุชุฎุฏุงูุงุช ุงูุทูุณ ููุท"], choices_en:["Mapping recharge, potentiometric contours, pollutant spread modeling and spatial analysis","Microscopic mineral analysis only","No use","Only for weather uses"], answerIndex:0 }
    ]
  },

  petro: {
    title_ar:"ุงูุจุชุฑูุบุฑุงููุง โ ุงูุชุนุฑู ุนูู ุงูุตุฎูุฑ", title_en:"Petrography โ Rock ID",
    items: [
      { q_ar:"ูุง ุงููุฑู ุจูู ุงูุตุฎูุฑ ุงููุงุฑูุฉ ุงูุฌูููุฉ ูุงูุณุทุญูุฉุ", q_en:"Difference intrusive vs extrusive igneous rocks?", choices_ar:["ุงูุฌูููุฉ ุชุจุฑุฏ ุจุจุทุก ุจููุฑุงุช ูุจูุฑุฉุ ุงูุณุทุญูุฉ ุชุจุฑุฏ ุณุฑูุนุงู ุจููุฑุงุช ุฏูููุฉ","ุงูุณุทุญูุฉ ุฃูุฏู ุฏุงุฆูุงู","ุงูุฌูููุฉ ูุง ุชุญุชูู ูุนุงุฏู","ุงูุณุทุญูุฉ ุชููู ูู ุงูุจุญุฑ ููุท"], choices_en:["Intrusive cool slowly (large crystals); extrusive cool fast (fine crystals)","Extrusive always older","Intrusive contain no minerals","Extrusive only form in ocean"], answerIndex:0 },
      { q_ar:"ูุง ููููุงุช ุงูุฌุฑุงููุช ุงูุฑุฆูุณูุฉุ", q_en:"Main components of granite?", choices_ar:["ููุงุฑุชุฒุ ููุณุจุงุฑ ุจูุชุงุณูุ ุจูุงุบููููุงุฒ ูููุฏุงุฑ ูู ุงููููุง","ููุณูุช ูุฏูููููุช","ุฃูููููู ูุจูุฑููุณูู ููุท","ุทูู ูุฑูู"], choices_en:["Quartz, K-feldspar, plagioclase and some mica","Calcite and dolomite","Only olivine and pyroxene","Clay and sand"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุงูุฉ ุงููุณูุฌ ุงูุจูุฑููุฑูุ", q_en:"Significance of porphyritic texture?", choices_ar:["ูุดูุฑ ูุชุจุฑูุฏ ุจูุฑุญูุชูู: ุจููุฑุงุช ูุจูุฑุฉ ุซู ูุตูููุฉ ุฏูููุฉ","ุฏููู ุนูู ุงูุชุญูู","ุฏูุงูุฉ ุนูู ุชุฑุณุจ ุจุญุฑู","ุนูุงูุฉ ุนูู ุชุขูู"], choices_en:["Indicates two-stage cooling: large crystals in fine matrix","Evidence of metamorphism","Indicative of marine deposition","Sign of erosion"], answerIndex:0 },
      { q_ar:"ููู ุชูุฑู ุงูุจุงุฒูุช ูุงูุฃูุฏูุฒูุช ููุฏุงููุงูุ", q_en:"How distinguish basalt and andesite in hand sample?", choices_ar:["ุงูุจุงุฒูุช ุฏุงููุ ุญุจูุจุงุช ุฏูููุฉุ ุงูุฃูุฏูุฒูุช ุฃูุชุญ ููููุงู ููุญุชูู ููุฒุงุช ุฃูู","ุงูุจุงุฒูุช ูุงุชุญ ุฏุงุฆูุงู","ุงูุฃูุฏูุฒูุช ุฒุฌุงุฌู ููุท","ูุง ูุฑู ุนูููุงู"], choices_en:["Basalt dark, fine-grained; andesite lighter with intermediate composition","Basalt always light","Andesite only glassy","No practical difference"], answerIndex:0 },
      { q_ar:"ููู ุชููุฒ ุงูููุณูุช ูู ุงูุฏูููููุช ููุฏุงููุงูุ", q_en:"Field test to distinguish calcite vs dolomite?", choices_ar:["ุงูููุณูุช ูุชูุงุนู ููุฑูุง ูุน HCl ุงููุฎููุ ุงูุฏูููููุช ูุญุชุงุฌ ููุงุฎุชุจุงุฑ ุงููุทุญูู ุฃู ุงูุชุณุฎูู","ููุงููุง ูุชูุงุนู ุจููุณ ุงูุทุฑููุฉ","ุงูุฏูููููุช ูุฐูุจ ูู ุงููุงุก","ูุง ูููู ุงูุชูุฑูู ุฅูุง ุจุงููุฎุชุจุฑ"], choices_en:["Calcite reacts immediately with dilute HCl; dolomite requires powdered or heated sample","Both react identically","Dolomite dissolves in water","Only lab test distinguishes"], answerIndex:0 },
      { q_ar:"ูุง ุนูุงูุฉ ุงูุตุฎุฑ ุงูุฑุณูุจู ุงููุฑุจูููุ", q_en:"Key sign of carbonate sedimentary rock?", choices_ar:["ูุฌูุฏ ููุณูุช ุฃู ูุดุฑุฉ ุฃุญูุงุฆูุฉ ููุญุต ุงูุชูุงุนู ูุน ุงูุญูุถ","ููู ุฑูุงุฏู ููุท","ูุณูุฌ ุฒุฌุงุฌู","ุทุจูุงุช ุฑูููุฉ ููุท"], choices_en:["Presence of calcite/biogenic shells and acid reaction","Gray color only","Glassy texture","Only sandy layers"], answerIndex:0 },
      { q_ar:"ููู ุชูุฑู ุงูุญุฌุฑ ุงูุฑููู ุนู ุงูุตุฎุฑ ุงูุทูููุ", q_en:"How to tell sandstone from shale?", choices_ar:["ุงูุญุฌุฑ ุงูุฑููู ุญุจูุจุงุช ูุฑุฆูุฉ ูุฎุดูุ ุงูุทููู ูุงุนู ููุชุดูู","ููุงููุง ูุงุนู","ุงูุทููู ุฎุดู","ูุง ูุฑู"], choices_en:["Sandstone has visible grains and is gritty; shale is smooth and fissile","Both smooth","Shale coarse","No difference"], answerIndex:0 },
      { q_ar:"ูุง ูู ุงูุชูุฑู ูู ุงูุตุฎูุฑ ุงููุชุญููุฉุ", q_en:"What is foliation in metamorphic rocks?", choices_ar:["ุชุฑุชูุจ ููุงุฒ ูููุนุงุฏู ูุชูุฌุฉ ุถุบุท ููุฌู","ุทุจูุงุช ุฑุณูุจูุฉ ุฃูููุฉ","ูุชูุฌุฉ ุจุฑุฏ ุณุฑูุน","ููุน ูู ุงูุชุฌููุฉ"], choices_en:["Parallel alignment of minerals due to directed pressure","Horizontal sedimentary layering","Result of rapid cooling","A weathering type"], answerIndex:0 },
      { q_ar:"ูุง ุงููุฑู ุจูู ุงูุดุณุช ูุงููุงูุณุ", q_en:"Difference between schist and gneiss?", choices_ar:["ุงูุดุณุช ุฐู ุชูุฑู ุฏููู ููููุงูููุง ูููุฒุฉุ ุงููุงูุณ ุฐู ูุทุงูุงุช ูุนุฏููุฉ ูุชุจุงุฏูุฉ","ุงูุดุณุช ุฃูุซุฑ ูุญุตูุฉ","ุงููุงูุณ ุทููู","ูุง ูุฑู"], choices_en:["Schist has fine foliation; gneiss shows alternating mineral bands","Schist more glassy","Gneiss is clay","No difference"], answerIndex:0 },
      { q_ar:"ูุง ุฃููุงุน ุงูููุณุจุงุฑ ุงูุดุงุฆุนุฉุ", q_en:"Common types of feldspar?", choices_ar:["ููุณุจุงุฑ ุจูุชุงุณู (ุฃูุฑุซูููุงุฒ/ูููุฑููููู) ูููุณุจุงุฑ ุจูุงุฌูููููุฒ","ููุณุจุงุฑ ูุฑุจููู ููุท","ููุณุจุงุฑ ุณููููุงุช ุฎุงุต","ูุง ููุณุจุงุฑ ูู ุงูุตุฎูุฑ"], choices_en:["K-feldspar (orthoclase/microcline) & plagioclase feldspar","Only carbonate feldspar","Special silicate feldspar","No feldspar in rocks"], answerIndex:0 },
      { q_ar:"ููู ุชุณุชูุชุฌ ุฃุตู ุงูุตุฎุฑ ูู ูุนุงุฏููุ", q_en:"How infer rock origin from mineralogy?", choices_ar:["ุงูุชุฑููุจ ุงููุนุฏูู ูุฏู ุฅู ูุงู ูุงุฑูุ ุฑุณูุจู ุฃู ูุชุญูู (ูุซุงู: ููุงุฑุชุฒ ุนุงูู ูุคุดุฑ ุงูุฑุณูุจู)","ุงููุนุงุฏู ูุง ุชููุฏ","ูู ููู ุงูุตุฎูุฑ ููุท","ุจุญุงุฌุฉ ูุตูุฑุฉ ุฌููุฉ ููุท"], choices_en:["Mineral composition indicates igneous/sedimentary/metamorphic origin (e.g., abundant quartz suggests sedimentary)","Minerals not helpful","By rock color only","Need aerial photo only"], answerIndex:0 },
      { q_ar:"ูุง ุฃุฏูุงุช ุงูุชุญููู ุงูุจุชุฑูุบุฑุงูู ุงูุฃุณุงุณูุฉุ", q_en:"Essential petrographic tools?", choices_ar:["ูุฌูุฑ ูุณุชูุทุจ ููุดุฑุงูุญ ุงูุฑูููุฉุ ูุงุฎุชุจุงุฑุงุช ุงูุญูู ุงูุจุณูุทุฉ","ูููุงุณ ุงูุถุบุท ููุท","ุงูุฃุดุนุฉ ุงูุณูููุฉ ููุท","ูุงููุฑุง ููุท"], choices_en:["Polarizing microscope for thin sections and simple field tests","Pressure gauge only","X-ray only","Camera only"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุงูุฉ ุงูููุงุฑุชุฒ ุงูุฏุงุฆุฑู ูู ุงูุฑููุ", q_en:"Significance of rounded quartz in sandstone?", choices_ar:["ูุฏู ุนูู ูุถุฌ ุนุงูู ูููู ุทููู (ูุณุงูุฉ ููู ุทูููุฉ)","ุฏููู ุนูู ุจุฑูุงููุฉ ูุฑูุจุฉ","ุฏููู ุนูู ุชุญููู ููุท","ูุง ุฏูุงูุฉ"], choices_en:["Indicates high maturity and long transport distance","Indicates nearby volcanism","Indicates metamorphism only","No significance"], answerIndex:0 },
      { q_ar:"ูุง ุงูููุตูุฏ ุจุงููุตูููุฉ (matrix) ูู ุงูุตุฎุฑ ุงูุฑุณูุจูุ", q_en:"What is matrix in sedimentary rock?", choices_ar:["ูุงุฏุฉ ุฏูููุฉ ุชููุฃ ุงููุฑุงุบุงุช ุจูู ุงูุญุจูุจุงุช (ุทูู/ุบุฑูู)","ููุน ูู ุงูุจููุฑุงุช ุงููุจูุฑุฉ","ูุฑุงุบุงุช ูู ุงูุตุฎุฑ","ุทุจูุฉ ุณุทุญูุฉ ููุท"], choices_en:["Fine material filling spaces between grains (clay/silt)","A type of large crystal","Voids in rock","Surface layer only"], answerIndex:0 },
      { q_ar:"ููู ุชุญุฏุฏ ุฏุฑุฌุฉ ุงูุชุญููุ", q_en:"How determine metamorphic grade?", choices_ar:["ุจูุฌูุฏ ูุนุงุฏู ูุคุดุฑูุฉ (index minerals) ูุซู ุงูุบุงุฑููุช ุฃู ุงููููุฑูุช","ุจุงููููุงุณ ููุท","ูู ููู ุงูุตุฎุฑ","ูู ุงูุณููู ููุท"], choices_en:["By index minerals (garnet, chlorite etc.)","By scale only","By rock color","By thickness only"], answerIndex:0 },
      { q_ar:"ูุง ุงููุฑู ุจูู ุงูุจุฑูุดูุง ูุงููููุฌููููุฑุงุชุ", q_en:"Breccia vs conglomerate?", choices_ar:["ุงูุจุฑูุดูุง ุญุจูุจุงุช ุฒุงููุฉุ ุงููููุฌููููุฑุงุช ุญุจูุจุงุช ูุณุชุฏูุฑุฉ","ุงูุงุซูุงู ูุชูุงุซูุงู","ุงูุจุฑูุดูุง ุฑุณูุจู ููููุงุฆู","ุงููููุฌููููุฑุงุช ูุชุญูู"], choices_en:["Breccia has angular clasts; conglomerate has rounded clasts","They are the same","Breccia is chemical","Conglomerate metamorphic"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุงูุฉ ููุงุนุงุช ุงูุบุงุฒ ูู ุตุฎุฑ ูุงุฑูุ", q_en:"Significance of gas vesicles in igneous rock?", choices_ar:["ุชุฏู ุนูู ุชุจุฑูุฏ ุณุฑูุน ูุชุญุฑุฑ ุบุงุฒุงุช (ูุณูุฌ ููุงุนู ูุซู ุงูุจูููุณ)","ุชุฏู ุนูู ุถุบุท ุนุงูู","ุชุฏู ุนูู ุชุญููู","ูุง ุฃูููุฉ ุนูููุฉ"], choices_en:["Indicate rapid cooling and gas escape (vesicular texture like pumice)","Indicate high pressure","Indicate metamorphism","No practical importance"], answerIndex:0 },
      { q_ar:"ุงููุฑู ุงููุธูุฑ ุจูู ุงูุจุงุฒูุช ูุงูุฌุงุจุฑูุ", q_en:"Appearance difference basalt vs gabbro?", choices_ar:["ุงูุจุงุฒูุช ูุงุนู ุงูุญุจูุจุงุช (ุณุทุญู) ุฏุงููุ ุงูุฌุงุจุฑู ุฐู ุจููุฑุงุช ุฎุดูุฉ (ุฌููู) ุฏุงูู ุฃูุถุงู","ุงูุฌุงุจุฑู ูุงุชุญ","ุงูุจุงุฒูุช ุจููุฑู ูุจูุฑ","ูุง ูุฑู"], choices_en:["Basalt fine-grained (extrusive) dark; gabbro coarse-grained (intrusive) dark","Gabbro light","Basalt large crystals","No difference"], answerIndex:0 },
      { q_ar:"ูุง ูุนูู Texture ูู ุงูุจุชุฑูุบุฑุงููุงุ", q_en:"What is texture in petrography?", choices_ar:["ุญุฌู ูุดูู ูุชุฑุชูุจ ุงูููููุงุช ุงููุนุฏููุฉ ูู ุงูุตุฎุฑ","ููู ุงูุตุฎุฑ ููุท","ูุนุฏู ุงูุชุญููู","ูููุงุณ ุงููุณุงููุฉ"], choices_en:["Size, shape and arrangement of mineral components","Rock color only","Metamorphic grade","Porosity measure"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุงูุฉ ุงูููู ูู ุงูุชุนุฑู ุงูููุฏุงููุ", q_en:"Field significance of rock color?", choices_ar:["ูููู ุฃู ูุดูุฑ ูุชุฑููุจ ูุนุฏูู ุฃู ุฃูุณุฏุฉ ุงูุญุฏูุฏ ุฃู ูุญุชูู ุนุถูู","ุงูููู ุบูุฑ ูููุฏ ุฃุจุฏุงู","ูุญุฏุฏ ุงูุนูุฑ ูุจุงุดุฑุฉ","ูุดูุฑ ููููุงุฐูุฉ ููุท"], choices_en:["May indicate mineralogy, iron oxidation or organic content","Color never useful","Determines age directly","Indicates permeability only"], answerIndex:0 },
      { q_ar:"ูุง ุงููุนุงุฏู ุงูุธูุงุฑ ูู ุงูุตุฎูุฑ ุงูููุณูุฉุ", q_en:"Main minerals in felsic rocks?", choices_ar:["ููุงุฑุชุฒ ูููุณุจุงุฑ ุจูุชุงุณู ููููุง","ุฃูููููู ูุจูุฑููุณูู","ูุงูุณูุช ููุท","ุทูู ุญุจูุจู"], choices_en:["Quartz, K-feldspar and mica","Olivine and pyroxene","Calcite only","Granular clay"], answerIndex:0 },
      { q_ar:"ูุง ุงููุฑู ูุง ุจูู ุงููุงููุฉ ูุงูููุณูุฉุ", q_en:"Mafic vs felsic difference?", choices_ar:["ุงููุงููุฉ ุบููุฉ ุจุงูุญุฏูุฏ ูุงููุบููุณููู (ุฏุงููุฉ)ุ ุงูููุณูุฉ ุบููุฉ ุจุงูุณููููุง (ูุงุชุญุฉ)","ูุง ูุฑู","ุงููุงููุฉ ุฎูููุฉ","ุงูููุณูุฉ ุฏุงุฆูุงู ุฒุฌุงุฌูุฉ"], choices_en:["Mafic rich in Fe-Mg (dark); felsic rich in silica (light)","No difference","Mafic light","Felsic always glassy"], answerIndex:0 },
      { q_ar:"ูุง ุงูุนูุงูุฉ ุจูู ุณุฑุนุฉ ุงูุชุจุฑูุฏ ูุญุฌู ุงูุจููุฑุงุชุ", q_en:"Cooling rate vs crystal size?", choices_ar:["ุชุจุฑูุฏ ุฃุณุฑุน โ ุจููุฑุงุช ุฃุตุบุฑุ ุชุจุฑูุฏ ุฃุจุทุฃ โ ุจููุฑุงุช ุฃูุจุฑ","ุณุฑุนุฉ ูุง ุชุคุซุฑ","ุชุจุฑูุฏ ุฃุณุฑุน โ ุจููุฑุงุช ุฃูุจุฑ","ูุง ุนูุงูุฉ"], choices_en:["Faster cooling โ smaller crystals; slower โ larger crystals","Rate doesn't affect","Faster โ larger crystals","No relation"], answerIndex:0 },
      { q_ar:"ูุง ุงูุนูุงูุงุช ุงูุฏุงูุฉ ุนูู ุฃุตู ูุงุฑู ููุงุจู ุฑุณูุจูุ", q_en:"Signs for igneous vs sedimentary origin?", choices_ar:["ุงููุงุฑู ูุฏูู ูุณูุฌ ูุชุฏุงุฎู ุฃู ุจููุฑุงุชุ ุงูุฑุณูุจู ูุธูุฑ ุทุจูุงุช ูุฃุญุงููุฑ","ุงููุงุฑู ูุญุชูู ุฃุญุงููุฑ","ุงูุฑุณูุจู ุจููุฑู ูุจูุฑ","ูุง ุชูููุฒ"], choices_en:["Igneous shows interlocking texture/crystals; sedimentary shows layers and fossils","Igneous contains fossils","Sedimentary large crystals","No distinction"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุฑ ุงูุชุญููู ุงููุฌูุฑูุ", q_en:"Role of microscopy in petrography?", choices_ar:["ุชุญุฏูุฏ ุงููุณูุฌ ูุงููุนุงุฏู ุจุฏูุฉ ูุชุญุฏูุฏ ุงูุฃุตู ูุงูุจูุฆุฉ ุงูุชูููููุฉ","ูุง ูุงุฆุฏุฉ ููุฏุงููุฉ","ูุณุชุฎุฏู ููุท ูู ุงูุชุนุฏูู","ูุญูู ุงูููุงู"], choices_en:["Identify texture and minerals precisely to determine origin and environment","No field use","Only used in mining","Purifies water"], answerIndex:0 },
      { q_ar:"ููู ุชุนุฑู ุงูุตุฎูุฑ ุงูุฑุณูุจูุฉ ุงูููููุงุฆูุฉุ", q_en:"How identify chemical sedimentary rocks?", choices_ar:["ุชููููุช ุจุชุฑุณูุจ ูุจุงุดุฑ ูู ูุญููู ูุงุฆู (ูุซุงู: ุฌุจุณุ ูุงููุช)","ุชููููุช ุจุงูุถุบุท ููุท","ุชููููุช ุจุงูุญุฑุงุฑุฉ ููุท","ุชููููุช ุจุงูุนูุงูู ุงูุญูููุฉ"], choices_en:["Formed by direct precipitation from aqueous solution (e.g., gypsum, halite)","Formed by pressure only","Formed by heat only","Formed by biological factors"], answerIndex:0 },
      { q_ar:"ูุง ุงููุฑู ุจูู ุงูุญุฌุฑ ุงูุฌูุฑู ูุงูุฏูููููุชุ", q_en:"Difference between limestone and dolomite?", choices_ar:["ุงูุฌูุฑู $\\text{CaCO}_3$ ูุชูุงุนู ููุฑุงู ูุน ุงูุญูุถุ ุงูุฏูููููุช $\\text{CaMg}(\\text{CO}_3)_2$ ูุชูุงุนู ุฃุถุนู","ูุง ูุฑู","ุงูุฏูููููุช ุฃูุฏู ุฏุงุฆูุงู","ุงูุฌูุฑู ุฃููู"], choices_en:["Limestone $\\text{CaCO}_3$ reacts immediately; Dolomite $\\text{CaMg}(\\text{CO}_3)_2$ reacts weakly","No difference","Dolomite always older","Limestone stronger"], answerIndex:0 },
      { q_ar:"ูุง ููุน ุงูุตุฎูุฑ ุงูุชู ุชุญุชูู ุนุงุฏุฉ ุนูู ุงูููุณูุงุชุ", q_en:"Rock type usually containing phosphate?", choices_ar:["ุตุฎูุฑ ุฑุณูุจูุฉ ุจุญุฑูุฉ (ููุณููุฑูุช)","ุตุฎูุฑ ูุงุฑูุฉ ุฌูููุฉ","ุตุฎูุฑ ูุชุญููุฉ ุนุงููุฉ ุงูุฏุฑุฌุฉ","ุตุฎูุฑ ุงูุจุงุฒูุช"], choices_en:["Marine sedimentary rocks (phosphorite)","Intrusive igneous rocks","High-grade metamorphic rocks","Basalt rocks"], answerIndex:0 },
      { q_ar:"ูุง ูุนูู recrystallization ูู ุงูุชุญููุ", q_en:"Meaning of recrystallization in metamorphism?", choices_ar:["ุฅุนุงุฏุฉ ููู ูุชุจููุฑ ุงููุนุงุฏู ุงูููุฌูุฏุฉ ูุชูููู ุจููุฑุงุช ุฃูุจุฑ ุฃู ูุนุงุฏู ุฌุฏูุฏุฉ ูุณุชูุฑุฉ","ุฐูุจุงู ุงูุตุฎุฑ ุจุงููุงูู","ูุณุฑ ุงูุตุฎุฑ ููุท","ุชุฑุณูุจ ุฌุฏูุฏ"], choices_en:["Regrowth of existing minerals into larger crystals or new stable minerals","Complete melting of rock","Only fracturing of rock","New deposition"], answerIndex:0 },
      { q_ar:"ูุง ูู ูุคุดุฑ ุงูููู ูู ุชุตููู ุงูุตุฎูุฑ ุงููุงุฑูุฉ (Mafic Index)ุ", q_en:"What is the Mafic Index in igneous classification?", choices_ar:["ูุณุจุฉ ุงููุนุงุฏู ุงููุงููุฉ (ุงูุฏุงููุฉ) ุฅูู ุฅุฌูุงูู ุงููุนุงุฏู ูู ุงูุตุฎุฑ","ูุณุจุฉ ุงูููุงู","ูุณุจุฉ ุงูููุงุฑุชุฒ ููุท","ูุณุจุฉ ุงููููุง"], choices_en:["Ratio of mafic (dark) minerals to total minerals in the rock","Water ratio","Quartz ratio only","Mica ratio"], answerIndex:0 }
    ]
  },

  maps: {
    title_ar:"ุงูุฎุฑุงุฆุท ุงูุฌููููุฌูุฉ โ ุงูุฃุณุงุณูุงุช", title_en:"Geological Maps โ Basics",
    items: [
      { q_ar:"ูุง ุงููุฑู ุจูู ุงูุฎุฑูุทุฉ ุงูุฌููููุฌูุฉ ูุงูุทุจูุบุฑุงููุฉุ", q_en:"Difference between geological and topographic maps?", choices_ar:["ุงูุทุจูุบุฑุงููุฉ ุชูุซู ุงุฑุชูุงุนุงุช (ููุชูุฑุงุช)ุ ุงูุฌููููุฌูุฉ ุชูุซู ููุน ูุงูุชุฏุงุฏ ุงูุตุฎูุฑ ูุงูุชุฑุงููุจ","ุงูุทุจูุบุฑุงููุฉ ูุฌููููุฌููู ููุท","ุงูุฌููููุฌูุฉ ุชุนุฑุถ ููุงุฎ ุงูููุทูุฉ","ูุง ูุฑู"], choices_en:["Topographic shows elevations (contours); geological shows rock types and structures","Topographic for geologists only","Geological shows climate","No difference"], answerIndex:0 },
      { q_ar:"ูุง ูุงุฆุฏุฉ ุฎุทูุท ุงูููุชูุฑุ", q_en:"Purpose of contour lines?", choices_ar:["ุชุญุฏูุฏ ุงูุงุฑุชูุงุนุงุช ูุดูู ุงูุชุถุงุฑูุณ ูุงูุงูุญุฏุงุฑุงุช","ุชุญุฏูุฏ ููุน ุงูุตุฎูุฑ","ููุงุณ ุณุฑุนุฉ ุงูููุงู","ุชุนุฑูู ุญุฏูุฏ ุงูุจูุฏ"], choices_en:["Show elevations and terrain shape/slopes","Indicate rock type","Measure water speed","Define country borders"], answerIndex:0 },
      { q_ar:"ููู ุชุญุฏุฏ ููู ุงูุทุจูุงุช ูู ุงูุฎุฑูุทุฉุ", q_en:"How determine dip of beds from map?", choices_ar:["ูู ุฎูุงู ููุงุฑูุฉ ุงุชุฌุงู ุชูุงุทุน ุงูุทุจูุงุช ูุน ุฎุทูุท ุงูููุชูุฑ ูุญุณุงุจ V-rule","ูู ุงูููู ููุท","ูู ูููุงุณ ุงูุฎุฑูุทุฉ","ูู ุงูุตูุฑ satellit ููุท"], choices_en:["By comparing strike lines with contours and using V-rule","By color only","By map scale","From satellite images only"], answerIndex:0 },
      { q_ar:"ูุง ูุนูู ุฑูุฒ ุงูุทุจูุฉ (ูุซู Ksh)ุ", q_en:"Meaning of unit code (eg Ksh)?", choices_ar:["ูุดูุฑ ููุนูุฑ ูุงูุตุฎุฑ (K=Crete, sh=shale)","ูู ุฑูุฒ ุนุดูุงุฆู","ูุญุฏุฏ ุงูุงุฑุชูุงุน","ุงููููุงุณ"], choices_en:["Indicates age and rock (e.g., K=Cretaceous, sh=shale)","Random code","Specifies elevation","Scale"], answerIndex:0 },
      { q_ar:"ููู ุชุญุฏุฏ ููุทุฉ ุงูุชูุงุก ุทุจูุฉ ูููุฑุ", q_en:"How locate contact point between layer and river?", choices_ar:["ุจุงุณุชุฎุฏุงู ูุงุนุฏุฉ V: ุงูุญูุงุกุงุช ุงูููุชูุฑ ูุงูุชุฏุงุฏ ุงูุทุจูุฉ ุชุธูุฑ ููุทุฉ ุงูุงูุชูุงุก","ูู ููู ุงููุงุก ููุท","ูู ุงูุฑูุงุญ","ุจูุงุณุทุฉ ูููุงุณ ุงููุฒู"], choices_en:["Using V-rule where contours and bed contacts intersect","By water color only","By wind","By weight scale"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุงูุฉ ุชูุงุทุน ุงูุทุจูุงุช ูุน ุงูุชุถุงุฑูุณุ", q_en:"Meaning of bed intersections with terrain?", choices_ar:["ุชุญุฏุฏ ููู ุงูุทุจูุงุช ูุงุชุฌุงููุง ูุชูุดู ุนู ุทูุงุช ูููุงูู","ุชุนูู ูุฌูุฏ ูุนุงุฏู ููุท","ุชุนูู ูุฌูุฏ ููุท ุฏููุงู","ูุง ูุงุฆุฏุฉ"], choices_en:["Determine dip/strike and indicate folds/faults","Means only minerals present","Means oil always present","No use"], answerIndex:0 },
      { q_ar:"ูุง ุงูุฅุณูุงุท ุงูุดุงุฆุน ูู ุงูุฎุฑุงุฆุท ุงูุฌููููุฌูุฉุ", q_en:"Common projection used in geological maps?", choices_ar:["ูุธุงู UTM ุฃู ุงูุฅุณูุงุท ุงููุฎุฑูุทู ูุงูุจุฑุช ูู ุงูุฎุฑุงุฆุท ุงูุฅูููููุฉ","ุฅุณูุงุท ูุฑูุงุชูุฑ ููุท","ุฅุณูุงุท ูุทุจู ููุท","ูุง ุญุงุฌุฉ ูุฅุณูุงุท"], choices_en:["UTM or Lambert conformal conic for regional maps","Mercator only","Polar projection only","No projection needed"], answerIndex:0 },
      { q_ar:"ูุง ุฃุฏูุงุช ูุฑุงุกุฉ ุงูุฎุฑูุทุฉ ููุฏุงููุงูุ", q_en:"Tools for reading map in field?", choices_ar:["ุจูุตูุฉ ุฌููููุฌูุฉุ ูููุงุณุ ูููุ GPS/ุงููุงุชู ุงูุฐูู","ูุฌูุฑ ููุท","ูุทุฑูุฉ ููุท","ูุงููุฑุง ููุท"], choices_en:["Geological compass, scale, pen, GPS/smartphone","Microscope only","Hammer only","Camera only"], answerIndex:0 },
      { q_ar:"ููู ุชูุฑุณู ุงูููุงุทุน ุงูุฌููููุฌูุฉุ", q_en:"How to draw geological cross-sections?", choices_ar:["ุจููู ููุงุท ุงูุงุชุตุงูุงุช ุงูุฃูููุฉ ุฅูู ุฑุณู ุฑุฃุณู ููู ุงููููุงุณ ูุชุญููู ุงูุจูุงูุงุช","ุจููุงุฑูุฉ ุงูุฃููุงู ููุท","ุจุงูุชุฎููู","ุจุงุณุชุฎุฏุงู ุงูุฑูุงุญ"], choices_en:["Project contacts from map to a vertical profile using scale","By color comparison only","By guessing","Using wind"], answerIndex:0 },
      { q_ar:"ูุงุฐุง ุชูุซู ุงูุทูุงุช ูุงูููุงูู ุนูู ุงูุฎุฑูุทุฉุ", q_en:"What do folds and faults represent on a map?", choices_ar:["ุทูุงุช: ุงูุซูุงุกุงุช ุงูุทุจูุงุชุ ููุงูู: ูุณูุฑ ูุน ุฅุฒุงุญุฉ ูููุชู ุงูุตุฎุฑูุฉ","ูููุด ููุทุฑู","ูุคุดุฑุงุช ููุงุฎูุฉ","ููุงูุน ููุฑุฏ ูุงุฆู ุฏุงุฆู"], choices_en:["Folds: bending of beds; Faults: breaks with displacement","Road markings","Climate indicators","Permanent water source locations"], answerIndex:0 },
      { q_ar:"ููู ุชููุงุณ ุงูุงุชุฌุงู (Strike) ูุงูุงูุญุฏุงุฑ (Dip)ุ", q_en:"How measure strike and dip?", choices_ar:["ุจุงูุจูุตูุฉ ุงูุฌููููุฌูุฉ: ุงุชุฌุงู ุฎุท ุฃููู ุนูู ุงูุทุจูุฉ ูุฒุงููุฉ ุงูุงูุญุฏุงุฑ ุงูุนููุฏูุฉ ุนููู","ุจูููุงุณ ุงูุญุฑุงุฑุฉ","ุจุงุณุชุฎุฏุงู ุงููุงุชู ููุท","ูู ููู ุงูุตุฎุฑ"], choices_en:["By geologic compass: strike is horizontal line; dip is vertical angle perpendicular to strike","By thermometer","Using phone only","By rock color"], answerIndex:0 },
      { q_ar:"ูุง ุงููุฑู ุจูู ุงููุงูู ุงูุนุงุฏู ูุงููุนููุณุ", q_en:"Normal vs reverse fault difference?", choices_ar:["ุงูุนุงุฏู: ุงููุชูุฉ ุงููุนููุฉ ุชุชุญุฑู ูุฃุณูู (ุดุฏ)ุ ุงููุนููุณ: ุชุชุญุฑู ููุฃุนูู (ุถุบุท)","ุงูุนูุณ ุจุงูุฃุฑูุงู","ุงููุงูู ููุณ ูู ุงุชุฌุงู","ููุงููุง ููุณ ุงูุดูุก"], choices_en:["Normal: hanging wall moves down (extension); Reverse: hanging wall moves up (compression)","Opposite by numbers","Fault has no direction","They are same"], answerIndex:0 },
      { q_ar:"ููู ุชููุฒ ุทูุฉ ูุญุฏุจุฉ ูู ููุนุฑุฉุ", q_en:"How tell anticline vs syncline?", choices_ar:["ุงูุทุจูุงุช ุงูุฃูุฏู ุนุงุฏุฉ ูู ูุฑูุฒ ุงูุทูุฉ ุงููุญุฏุจุฉ (anticline) ูุงูุฃุญุฏุซ ูู ุงูููุนุฑุฉ (syncline)","ุงููุญุฏุจุฉ ุฏุงุฆููุง ุฃุนุฑุถ","ุงูููุนุฑุฉ ุฃูุฏู","ูุง ูุฑู"], choices_en:["Older beds usually at center of anticline; younger in syncline","Anticline always broader","Syncline older","No difference"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุงูุฉ ุงูุฑููุฒ ุงููุฎุชููุฉ ุนูู ุงูุฎุฑูุทุฉุ", q_en:"Meaning of different map symbols?", choices_ar:["ุชูุถุญ ููุน ุงูุตุฎูุฑุ ุฎุท ุงูุชูุงุณุ ุงูููุงููุ ูุงููุธุงูุฑ ุงูุณุทุญูุฉ ููู ุงููLegend","ูุฌุฑุฏ ุฒุฎุฑูุฉ","ูุง ุฃูููุฉ","ุชุนุฑุถ ุดุจูุงุช ุงูุทุฑู ููุท"], choices_en:["Indicate rock types, contacts, faults and surface features as in the legend","Decoration only","No importance","Show road networks only"], answerIndex:0 },
      { q_ar:"ูุง ูุงุฆุฏุฉ ุงููููุงุณ ุงูุฎุทูุ", q_en:"Purpose of linear scale?", choices_ar:["ุชุญููู ุงููุณุงูุงุช ุนูู ุงูุฎุฑูุทุฉ ุฅูู ุงููุงูุน ุจุณูููุฉ","ุชุญุฏูุฏ ููุน ุงูุตุฎุฑ","ููุงุณ ุงูุนูู","ุชุญุฏูุฏ ุงูููุช"], choices_en:["Convert map distances to real ground distances","Determine rock type","Measure depth","Determine time"], answerIndex:0 },
      { q_ar:"ุนูุงูุฉ ููู ุงูุฎุฑูุทุฉ ุจููุน ุงูุตุฎูุฑุ", q_en:"Relation of map color to rock type?", choices_ar:["ุงูุฃููุงู ุชูุซู ุฃููุงุน/ุฃุนูุงุฑ ุงูุตุฎูุฑ ููู ูุนูุงุฑ ุงูุฎุฑูุทุฉ (ูุซูุงู ูุฑุจููุงุช ุจููู ูุนูู)","ุงูุฃููุงู ุนุดูุงุฆูุฉ","ุงูููู ูุฏู ุนูู ุงุฑุชูุงุน ููุท","ูุง ุนูุงูุฉ"], choices_en:["Colors represent rock types/ages per map convention (eg carbonates a certain color)","Colors random","Color indicates elevation only","No relation"], answerIndex:0 },
      { q_ar:"ููู ุชุณุชุฎุฏู ุงูุจูุตูุฉ ููุฏุงููุงูุ", q_en:"How use geologic compass in field?", choices_ar:["ูููุงุณ ุงููstrike ูุงููdipุ ุชูุฌูู ุงููุณุงุฑุงุชุ ููุงุณ ุงูุฒูุงุญ ุงููุงูู","ูููุงุณ ุณุฑุนุฉ ุงูุฑูุงุญ ููุท","ูููุงุณ ุงููุฒู","ูููุงุณ ุฌูุฏุฉ ุงูุชุฑุจุฉ ููุท"], choices_en:["Measure strike/dip, orient traverses, measure fault offset","Measure wind speed only","Measure weight","Measure soil quality only"], answerIndex:0 },
      { q_ar:"ุงููุฑู ุจูู ุงูุฎุฑูุทุฉ ุงููุญููุฉ ูุงูุฅูููููุฉุ", q_en:"Local vs regional map difference?", choices_ar:["ุงููุญููุฉ ูููุงุณ ูุจูุฑ ุชูุงุตูู ุฃุนููุ ุงูุฅูููููุฉ ูููุงุณ ุตุบูุฑ ุชุบุทูุฉ ุฃูุจุฑ","ูุง ูุฑู","ุงููุญููุฉ ุชุณุชุฎุฏู ููุฃููุงุฑ ููุท","ุงูุฅูููููุฉ ูุฑููุฉ ููุท"], choices_en:["Local large-scale with high detail; regional small-scale covering large area","No difference","Local for satellites only","Regional only paper"], answerIndex:0 },
      { q_ar:"ููู ุชุญุฏุฏ ุงูุนูุฑ ุงููุณุจู ููุทุจูุงุชุ", q_en:"How determine relative age of beds?", choices_ar:["ุจูุจุฏุฃ ุงูุชุฑุงูุจ: ุงูุฃูุฏู ูู ุงูุฃุณูู ูุง ูู ูุญุฏุซ ููุจ ุฃู ุงุฎุชูุงู","ุจุงูุฃููุงู ููุท","ุจูููุงุณ ุงูุฎุฑูุทุฉ","ุจุฌูุงุฒ ุฎุงุต"], choices_en:["By principle of superposition: older below unless overturned","By colors only","By map scale","By special device"], answerIndex:0 },
      { q_ar:"ูุง ูู ุงููLegendุ", q_en:"What is the legend?", choices_ar:["ููุชุงุญ ุงูุฎุฑูุทุฉ ุงูุฐู ูุดุฑุญ ุงูุฃููุงู ูุงูุฑููุฒ","ูุงุฆูุฉ ุงูุฃุณูุงุก ููุท","ุฎุฑูุทุฉ ูุฑุนูุฉ","ูููุงุณ ุงูุฒูู"], choices_en:["Map key explaining colors and symbols","List of names only","Inset map","Time scale"], answerIndex:0 },
      { q_ar:"ููู ุชูุณุชุฎุฑุฌ ููุงุทุน ุทูููุฉุ", q_en:"How extract longitudinal sections?", choices_ar:["ุจุฑุณู ุงูุทุจูุงุช ูุงูุงุชุตุงูุงุช ุนูู ุฎุท ุงูููุทุน ูุชุญููููุง ุฅูู ููุธุฑ ุฌุงูุจู ุจููุงููุณ","ุจุงูุชุฎููู","ุจุงุณุชุฎุฏุงู GPS ููุท","ุจุงููุฌูุฑ"], choices_en:["Plot formations and contacts along a line and project to vertical profile using scales","By guessing","Using GPS only","With microscope"], answerIndex:0 },
      { q_ar:"ูุงุฐุง ูุนูู ูู ูุงูุช ุงูุทุจูุงุช ููุงุฒูุฉ ููููุชูุฑุงุชุ", q_en:"If beds parallel contours what is dip?", choices_ar:["ุงูุทุจูุงุช ุฃูููุฉ (dip = 0)","ุงูุทุจูุงุช ุดุฏูุฏุฉ ุงูุงูุญุฏุงุฑ","ุบูุฑ ูุงุจู ููุชุญุฏูุฏ","ุชุนูู ูุงูู ูุจูุฑ"], choices_en:["Beds are horizontal (dip = 0)","Beds steeply dipping","Undeterminable","Indicates a large fault"], answerIndex:0 },
      { q_ar:"ููู ุชุญุฏุฏ ููุงุทู ุงูุชูุงุณ ุจูู ุงูุตุฎูุฑุ", q_en:"How locate contacts between rock units?", choices_ar:["ุจุจุญุซ ุนู ุฎุทูุท ูุงุตู ุนูู ุงูุฎุฑูุทุฉ ุจูู ูุญุฏุงุช ูุฎุชููุฉ ุงูููู ุฃู ุงูุฑููุฒ","ุจููุงุณ ุงูุตูุช","ุจูููุงุณ ุงูุถุบุท","ุจุงูููุงุฎ"], choices_en:["Look for boundary lines between differently colored/symbolized units on map","By sound measurement","By pressure gauge","By climate"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุงูุฉ ุงููUnconformityุ", q_en:"Significance of unconformity?", choices_ar:["ุชุดูุฑ ููุชุฑุงุช ุงููุทุงุน ูู ุงูุชุฑุณูุจ ุฃู ุชุนุฑูุฉ ุจูู ูุฌููุนุชูู ุตุฎุฑูุชูู","ุฏููู ุนูู ูุฌูุฏ ููุท ุฏุงุฆูุงู","ุฎุทุฃ ูู ุงูุฎุฑูุทุฉ","ูุคุดุฑ ููููุงู ููุท"], choices_en:["Indicates gaps in deposition or erosion between rock sequences","Always indicates oil","Map error","Only water indicator"], answerIndex:0 },
      { q_ar:"ููู ุชุณุงุนุฏ ุงูุตูุฑ ุงูุฌููุฉ ูู ุชุญุฏูุซ ุงูุฎุฑูุทุฉุ", q_en:"How aerial photos help update maps?", choices_ar:["ุชูุดู ุชุบููุฑ ุงูุบุทุงุก ุงููุจุงุชู ุฃู ุชุนุฑูุฉ ุงูุณุทุญ ูุชุณุงุนุฏ ูู ุชุญุฏูุฏ ุชุฑุงููุจ ุฌุฏูุฏุฉ","ูุง ุชุณุงุนุฏ","ุชุคุซุฑ ุนูู ุงููุณุงุญุฉ","ุชุญุฏุฏ ุฃุนูุงุฑ ุงูุตุฎูุฑ"], choices_en:["Reveal vegetation/erosion changes and help identify new structures","No help","Affect area","Determine rock ages"], answerIndex:0 },
      { q_ar:"ูุง ุฃูููุฉ ูุนุฑูุฉ ุงูุงุชุฌุงู ุงูุฌููููุฌู ูู ุงูุญูุฑุ", q_en:"Importance of knowing geological strike/dip in drilling?", choices_ar:["ูุชุญุฏูุฏ ุนูู ุงููุตูู ููุทุจูุฉ ุงููุทููุจุฉ ูุชุฌูุจ ุงูุญูุฑ ุงูููุงุฒู ููููุงูู","ููุนุฑูุฉ ุณุฑุนุฉ ุงูุฑูุงุญ ููุท","ููุนุฑูุฉ ููู ุงูุตุฎุฑ","ููุนุฑูุฉ ุงูููุช"], choices_en:["To determine the depth of the target layer and avoid drilling parallel to faults","To know wind speed only","To know rock color","To know time"], answerIndex:0 },
      { q_ar:"ูุง ูุนูู ุงูุฑููุฒ ุงูุฌููููุฒูุงุฆูุฉ ูู ุจุนุถ ุงูุฎุฑุงุฆุทุ", q_en:"Meaning of geophysical symbols on some maps?", choices_ar:["ุชุธูุฑ ุดุฐูุฐุงุช ุฌุงุฐุจูุฉ ุฃู ูุบูุงุทูุณูุฉ (ูุคุดุฑุงุช ุบูุฑ ูุจุงุดุฑุฉ ูุชุฑุงููุจ ุชุญุช ุณุทุญูุฉ)","ุชุธูุฑ ุงุฑุชูุงุน ุงููุจุงูู","ุชุธูุฑ ุญุฏูุฏ ุงูุฏูู","ุชุธูุฑ ุงูุฃููุงุฑ ููุท"], choices_en:["Show gravity or magnetic anomalies (indirect indicators of subsurface structures)","Show building heights","Show country borders","Show only rivers"], answerIndex:0 },
      { q_ar:"ูุง ุนูุงูุฉ ุงูุฎุฑุงุฆุท ุจุงููุณุญ ุงูุฌููููููุงุฆูุ", q_en:"Relation between maps and geochemical surveying?", choices_ar:["ุชุณุชุฎุฏู ุงูุฎุฑุงุฆุท ูุฎูููุฉ ูุชูููุน ููุงูุน ุงูุนููุงุช ููุชุงุฆุฌ ุงูุชุฑููุฒ ูุชุญุฏูุฏ ุงูููุงุทู ุงููุงุนุฏุฉ","ูุง ุนูุงูุฉ","ุชุณุชุฎุฏู ููุท ูุฌูุน ุงูุนููุงุช","ุชุณุชุฎุฏู ูุถุจุท ุงูููุช"], choices_en:["Maps serve as a base to plot sample locations and concentration results to identify prospective areas","No relation","Used only for sample collection","Used for time adjustment"], answerIndex:0 },
      { q_ar:"ูุง ูู ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ุนูุฏ ูุฑุงุกุฉ ุงูุฎุฑุงุฆุท ุงูุฌููููุฌูุฉุ", q_en:"Common mistakes reading geologic maps?", choices_ar:["ุฎูุท ุจูู ููุงุนุฏ Vุ ุชูุณูุฑ ูุงูู ุนูุณู ูุนุงุฏูุ ูุนุฏู ููุงุญุธุฉ ุงููLegend","ุงููุฑุงุกุฉ ุณุฑูุนุฉ ุฏุงุฆูุงู ุตุญูุญุฉ","ุงูุงุณุชุฎูุงู ุจุงูุฃููุงู","ุนุฏู ุงุณุชุฎุฏุงู ุงููุงุชู"], choices_en:["Misapplying V-rule, mistaking reverse for normal fault, ignoring legend","Quick read always correct","Disregarding colors","Not using phone"], answerIndex:0 },
      { q_ar:"ููู ุชูุญููู ุงูุฎุฑูุทุฉ ุงููุฑููุฉ ุฅูู ุฑูููุฉ ุจุงุณุชุฎุฏุงู GISุ", q_en:"How convert paper map to digital using GIS?", choices_ar:["ุนู ุทุฑูู ุงููุณุญ (Scanning) ุซู ุนูููุฉ ุชุญุฏูุฏ ุงูุฅุญุฏุงุซูุงุช (Georeferencing) ูุฑูููุฉ ุงูุชูุงุตูู","ุจุงุณุชุฎุฏุงู ุงูุขูุฉ ุงูุญุงุณุจุฉ ููุท","ุจุงุณุชุฎุฏุงู ููู ุฑุตุงุต ููุท","ุจุงุณุชุฎุฏุงู ูุณุทุฑุฉ"], choices_en:["By scanning then georeferencing and digitizing geological details","Using calculator only","Using pencil only","Using ruler"], answerIndex:0 }
    ]
  },

  general: {
    title_ar:"ุงูุฌููููุฌูุง ุงูุนุงูุฉ", title_en:"General Geology",
    items: [
      { q_ar:"ูุง ุงููุฑู ุจูู ุงููุงุฌูุง ูุงููุงูุงุ", q_en:"Magma vs lava?", choices_ar:["ุงููุงุฌูุง ุชุญุช ุงูุณุทุญุ ุงููุงูุง ุนูุฏ ุฎุฑูุฌูุง ุนูู ุงูุณุทุญ","ุงููุงุฌูุง ูุงุก ูุงููุงูุง ุญุฌุฑ","ูุง ูุฑู","ูุงุฌูุง = ุตุฎูุฑ ูุชุญููุฉ"], choices_en:["Magma is subsurface molten rock; lava is magma erupted at surface","Magma is water and lava rock","No difference","Magma = metamorphic rock"], answerIndex:0 },
      { q_ar:"ูุง ูู ุงูุฏูุฑุฉ ุงูุตุฎุฑูุฉุ", q_en:"What is the rock cycle?", choices_ar:["ุชุญูู ุงูุตุฎูุฑ ุงููุงุฑูุฉ ูุงูุฑุณูุจูุฉ ูุงููุชุญููุฉ ุนุจุฑ ุงูุนูููุงุช ุงูุฌููููุฌูุฉ","ุฏูุฑุฉ ุญูุงุฉ ุงููุจุงุช ููุท","ุธุงูุฑุฉ ุฌููุฉ","ุนูููุฉ ุจุดุฑูุฉ"], choices_en:["Transformation of igneous, sedimentary and metamorphic rocks via geologic processes","Plant life cycle only","Atmospheric phenomenon","Human activity"], answerIndex:0 },
      { q_ar:"ูุง ุฃููุงุน ุงูุชุฌููุฉุ", q_en:"Types of weathering?", choices_ar:["ุชุฌููุฉ ููุฒูุงุฆูุฉ ูููููุงุฆูุฉ ูุญูููุฉ","ุชุฌููุฉ ููุท ุจุงููุงุก","ุชุฌููุฉ ุญุฑุงุฑูุฉ ููุท","ุชุฌููุฉ ุจุชุฃุซูุฑ ุงูุฑูุงุญ ููุท"], choices_en:["Physical, chemical and biological weathering","Only water weathering","Only thermal weathering","Only wind weathering"], answerIndex:0 },
      { q_ar:"ููู ุชุชุดูู ุงูุทูุงุช ูุงูููุงููุ", q_en:"How form folds and faults?", choices_ar:["ูุชูุฌุฉ ููู ุถุบุท ุฃู ุดุฏ ุชุคุฏู ููุงูุซูุงุก ุฃู ุงููุณุฑ ุฏุงุฎู ุงููุดุฑุฉ","ุจูุดุงุทุงุช ุจุณูุทุฉ ููุท","ุชุชููู ูู ุงูุจุญุฑ ููุท","ุชุชููู ุจุงูุฅูุฌุฑุงู ููุท"], choices_en:["By compressional/tensional forces causing bending or breaking of crust","From trivial activities only","Form only in ocean","Form by erosion only"], answerIndex:0 },
      { q_ar:"ุงููุฑู ุจูู ุงููุดุฑุฉ ุงููุงุฑูุฉ ูุงููุญูุทูุฉุ", q_en:"Continental vs oceanic crust?", choices_ar:["ุงููุงุฑูุฉ ุฃุณูู ูุฃูู ูุซุงูุฉ ูุบููุฉ ุจุงูุตุฎูุฑ ุงูููุณูุฉุ ุงููุญูุทูุฉ ุฃุฑู ูุฃูุซุฑ ูุซุงูุฉ ูุจุงุฒูุชูุฉ","ูุง ูุฑู","ุงููุงุฑูุฉ ูุตููุนุฉ ูู ููุงู","ุงููุญูุทูุฉ ุชุญุชูู ุนูู ูู ุงููุนุงุฏู"], choices_en:["Continental crust thicker, less dense, felsic; oceanic thinner, denser, basaltic","No difference","Continental made of water","Oceanic contains all minerals"], answerIndex:0 },
      { q_ar:"ูุง ูู ุฃุตู ุงูุฌุจุงูุ", q_en:"Origin of mountains?", choices_ar:["ุชุตุงุฏู ุงูุตูุงุฆุญ ุฃู ุงููุดุงุท ุงูุจุฑูุงูู ูุฑูุน ุงููุดุฑุฉ","ุงูุฑูุงุญ ููุท","ุงูุชุนุฑูุฉ ููุท","ุงููุดุงุท ุงูุจุดุฑู"], choices_en:["Plate collisions, volcanism, or crustal uplift","Only wind","Only erosion","Human activity"], answerIndex:0 },
      { q_ar:"ูุง ุงูููุตูุฏ ุจุงูุตูุงุฆุญ ุงูุชูุชูููุฉุ", q_en:"What are tectonic plates?", choices_ar:["ูุทุน ูุจูุฑุฉ ูู ุงูุบูุงู ุงูุตุฎุฑู ุชุชุญุฑู ููู ุงูุณุชุงุฑ","ุชุฌูุนุงุช ูู ุงูุญุฌุงุฑุฉ","ุดุจูุงุช ุทุฑู","ูุตุทูุญ ุฌูุงุนู ููุฌุจุงู"], choices_en:["Large lithospheric plates moving over the mantle","Piles of rocks","Road networks","Collective term for mountains"], answerIndex:0 },
      { q_ar:"ูุง ุงูุนูุงูุฉ ุจูู ุงูุฒูุงุฒู ูุญุฏูุฏ ุงูุตูุงุฆุญุ", q_en:"Earthquakes & plate boundary relation?", choices_ar:["ูุนุธู ุงูุฒูุงุฒู ุชุญุฏุซ ุนูุฏ ุญุฏูุฏ ุงูุตูุงุฆุญ ูุชูุฌุฉ ุชุฑุงูู ูุฅุทูุงู ุงูุฅุฌูุงุฏ","ูุง ุนูุงูุฉ","ุญุตูุช ููุท ูุฏูููุง","ููุท ูู ุงููุญูุทุงุช"], choices_en:["Most quakes occur at plate boundaries due to stress accumulation/release","No relation","Only occurred in past","Only in oceans"], answerIndex:0 },
      { q_ar:"ูุง ููุน ุงูุตุฎูุฑ ุงููุงุชุฌุฉ ุนู ุงููุดุงุท ุงูุจุฑูุงููุ", q_en:"Rocks from volcanic activity?", choices_ar:["ุตุฎูุฑ ูุงุฑูุฉ ุณุทุญูุฉ ูุซู ุงูุจุงุฒูุช ูุงูุฑููููุช","ุตุฎูุฑ ุฑุณูุจูุฉ ููุท","ุตุฎูุฑ ูุชุญููุฉ ููุท","ุชุฑุจุฉ ููุท"], choices_en:["Extrusive igneous rocks like basalt and rhyolite","Only sedimentary rocks","Only metamorphic rocks","Soil only"], answerIndex:0 },
      { q_ar:"ููุงุฐุง ูุฏุฑุณ ุงููุนุงุฏูุ", q_en:"Why study minerals?", choices_ar:["ูุชุญุฏูุฏ ุชุฑููุจุฉ ุงูุตุฎูุฑุ ุงูููุงุฑุฏ ุงูุงูุชุตุงุฏูุฉุ ูููู ุฎูุงุตูุง ุงูููุฒูุงุฆูุฉ","ูุฃุบุฑุงุถ ุฌูุงููุฉ ููุท","ูุง ุญุงุฌุฉ","ูููู ุงูุทูุณ"], choices_en:["To identify rock composition, economic resources, and physical properties","Only aesthetic reasons","No need","To understand weather"], answerIndex:0 },
      { q_ar:"ููู ูุญุฏุฏ ุนูุฑ ุงูุตุฎูุฑุ", q_en:"How date rocks?", choices_ar:["ุจุงูุนูุฑ ุงููุณุจู (ุชุฑุงูุจ) ุฃู ุงูุชุฃุฑูุฎ ุงููุทูู (ูุธุงุฆุฑ ูุดุนุฉ)","ุจุญุณุงุณูู ุงูููู","ุจุงูุนูุฑ ุงูุธุงูุฑู","ุจุงูุชุญููู ุงูุตูุชู ููุท"], choices_en:["By relative dating (superposition) or absolute dating (radioisotopes)","By color sensitivity","By apparent age","By sonic only"], answerIndex:0 },
      { q_ar:"ุงููุฑู ุจูู ุงูุนูุฑ ุงููุณุจู ูุงููุทููุ", q_en:"Relative vs absolute age?", choices_ar:["ุงููุณุจู ูุถุน ุชุฑุชูุจุงู ุฒูููุงู ููุฃุญุฏุงุซุ ุงููุทูู ูุนุทู ุนูุฑูุง ุจุงูุณููุงุช","ููุณ ุงูุดูุก","ุงููุณุจู ุฑููู","ุงููุทูู ุชูุฑูุจู ููุท"], choices_en:["Relative gives sequence; absolute gives years","Same thing","Relative is numeric","Absolute approximate only"], answerIndex:0 },
      { q_ar:"ูุง ุฏูุฑ ุงูููุงู ูู ุงูุฌููููุฑููููุฌูุงุ", q_en:"Role of water in geomorphology?", choices_ar:["ูุญุฑู ุฑุฆูุณู ููุชุนุฑูุฉ ูุงูููู ูุงูุชุฑุณูุจ ูุชุดููู ุงูุฃูุฏูุฉ ูุงูุฏูุชุง","ูุง ุฏูุฑ","ูุคุซุฑ ููุท ุนูู ุงูุณุทุญ","ููู ููุท ูู ุงูุตุญุงุฑู"], choices_en:["Main agent of erosion, transport and deposition shaping landforms","No role","Only affects surface","Important only in deserts"], answerIndex:0 },
      { q_ar:"ูุง ุฃููุงุน ุงูุจุฑุงูููุ", q_en:"Types of volcanoes?", choices_ar:["ูุฎุฑูุท ุฑูุงุฏุ ุฏุฑุนูุ ุทุจูู/ุชุฑููุจู","ูุฎุฑูุทุงุช ุชุญุช ุงููุงุก ููุท","ุจุฑุงููู ุฌููุฏูุฉ","ุจุฑุงููู ุฑูููุฉ"], choices_en:["Cinder cones, shield volcanoes, stratovolcanoes","Underwater cones only","Ice volcanoes","Sand volcanoes"], answerIndex:0 },
      { q_ar:"ูุง ุงูููุตูุฏ ุจูStratigraphyุ", q_en:"What is stratigraphy?", choices_ar:["ุนูู ุฏุฑุงุณุฉ ุงูุทุจูุงุช ุงูุตุฎุฑูุฉ ูุชุฑุชูุจูุง ุงูุฒููู ูุงูููุงูู","ููุงุณ ุงูุณูู ููุท","ุชุญููู ุงููุนุงุฏู","ููุงุณ ุงููุซุงูุฉ"], choices_en:["Study of rock strata and their temporal/spatial relationships","Measuring thickness only","Mineral analysis","Density measurement"], answerIndex:0 },
      { q_ar:"ุงููุฑู ุจูู ุงููุงูู ูุงูุทูุฉุ", q_en:"Fault vs fold?", choices_ar:["ุงููุงูู ูุณุฑ ูุน ุฅุฒุงุญุฉุ ุงูุทูุฉ ุงูุซูุงุก ุฏูู ูุณุฑ","ูุชุดุงุจูุงู","ุงููุงูู ุฏุงุฆูุงู ุฃูุจุฑ","ุงูุทูุฉ ูุงุชุฌุฉ ุนู ุงูุชุฌููุฉ"], choices_en:["Fault is a fracture with displacement; fold is bending without fracture","They are similar","Fault always larger","Fold due to weathering"], answerIndex:0 },
      { q_ar:"ูุง ุงูุนูุงูู ุงููุคุซุฑุฉ ุนูู ุงูุชุนุฑูุฉุ", q_en:"Factors affecting erosion?", choices_ar:["ุงูููุงุฎุ ููุน ุงูุตุฎุฑุ ุงูุบุทุงุก ุงููุจุงุชูุ ุงูุงูุญุฏุงุฑ ุงูุชุถุงุฑูุณู","ููุท ุงูุฑูุงุญ","ููุท ุงูุฅูุณุงู","ููุท ุงูุฌููุฏ"], choices_en:["Climate, rock type, vegetation cover, slope","Only wind","Only humans","Only ice"], answerIndex:0 },
      { q_ar:"ูุง ููููุงุช ุงููุดุฑุฉ ุงูุฃุฑุถูุฉุ", q_en:"Materials making Earth's crust?", choices_ar:["ุงูุตุฎูุฑ ูุงููุนุงุฏู ุงูุณูููุงุชูุฉ ูุซู ุงูุณููููุง ูุงูููุณุจุงุฑ","ุงููุงุก ููุท","ุงูููุงุก","ุงูุนุถููุงุช ููุท"], choices_en:["Rocks and silicate minerals like silica & feldspar","Only water","Air","Only organics"], answerIndex:0 },
      { q_ar:"ูุง ุงูููุตูุฏ ุจุงูุชุฑุณูุจุ", q_en:"What is deposition?", choices_ar:["ุชุฑุณูุจ ุงูููุงุฏ ุงููููููุฉ (ูุชุงุช/ุฃููุงุญ) ุนูุฏูุง ุชูู ุงูุทุงูุฉ ุงูุญุงููุฉ","ุชููู ุงูุตุฎูุฑ ููุท","ุชุญูู ุงูุตุฎูุฑ","ุชุฌููุฏ ุงููุงุก"], choices_en:["Settling of transported materials (clasts/salts) when carrying energy drops","Only rock decay","Metamorphism","Freezing water"], answerIndex:0 },
      { q_ar:"ุฏูุฑ ุงููุงุฆูุงุช ูู ุชูููู ุงูุตุฎูุฑุ", q_en:"Role of organisms in rock formation?", choices_ar:["ุชูููู ุตุฎูุฑ ุนุถููุฉ ูุงููุณููุฑ ูุงูุญุฌุฑ ุงูุฌูุฑู ุงูุนุถูู ูู ุจูุงูุง ูุงุฆูุงุช","ูุง ุฏูุฑ","ุชุคุซุฑ ููุท ูู ุงูุชุฑุจุฉ","ุชููุน ุงูุชุฑุณูุจ"], choices_en:["Form organic rocks like phosphorites and biogenic limestones from remains","No role","Only affect soil","Prevent deposition"], answerIndex:0 },
      { q_ar:"ููู ุชุชุดูู ุงูุตุฎูุฑ ุงูุฑุณูุจูุฉุ", q_en:"How form sedimentary rocks?", choices_ar:["ุจุชุฌููุฉุ ูููุ ุชุฑุณูุจุ ุซู ุงูุชุตุฎุฑ (compaction/cementation)","ุจุงูุชุจุฑูุฏ ููุท","ุจุงูุงูุตูุงุฑ","ุจุงูุชุฌูุฏ"], choices_en:["By weathering, transport, deposition then lithification (compaction/cementation)","By cooling only","By melting","By freezing"], answerIndex:0 },
      { q_ar:"ูุง ุงูุชุญูู ุงููุชูุงุณูุ", q_en:"What is regional metamorphism?", choices_ar:["ุชุญูู ูุงุณุน ุงููุทุงู ูุชูุฌุฉ ุถุบุท ูุญุฑุงุฑุฉ ูุฑุชุจุทูู ุจุญุฑูุงุช ุชูุชูููุฉ","ุชุญูู ูุญุฏูุฏ ูุญููุงู","ุชุญูู ููููุงุฆู ููุท","ูุชูุฌุฉ ุชุฌููุฉ"], choices_en:["Widespread metamorphism due to pressure & heat from tectonics","Localized alteration only","Only chemical change","Due to weathering"], answerIndex:0 },
      { q_ar:"ุงููุฑู ุจูู ุงูุตุฎูุฑ ุงููุชุญููุฉ ูุงูุฑุณูุจูุฉุ", q_en:"Metamorphic vs sedimentary rocks?", choices_ar:["ุงููุชุญููุฉ ูุชูุฌุฉ ุชุบูุฑ ุตุฎุฑุฉ ุณุงุจูุฉ ุจุงูุญุฑุงุฑุฉ/ุถุบุทุ ุงูุฑุณูุจูุฉ ูู ุชุฑุณูุจ ูุชุฑุงูู","ููุณ ุงูุดูุก","ุงููุชุญููุฉ ุฑุณูุจูุฉ ููุท","ุงูุฑุณูุจูุฉ ูุชุญููุฉ ููุท"], choices_en:["Metamorphic from pre-existing rock altered by heat/pressure; sedimentary from deposition/compaction","Same thing","Metamorphic always sedimentary","Sedimentary always metamorphic"], answerIndex:0 },
      { q_ar:"ูุง ูุนุงุฏู ุงูุตุฎูุฑ ุงูุดุงุฆุนุฉุ", q_en:"Common rock-forming minerals?", choices_ar:["ููุงุฑุชุฒุ ููุณุจุงุฑุ ูููุงุ ูุงูุณูุชุ ุฃูููููู","ุฐูุจ ููุถุฉ ููุท","ุบุงุฒุงุช","ุจูุงุณุชูู"], choices_en:["Quartz, feldspar, mica, calcite, olivine","Gold & silver only","Gases","Plastic"], answerIndex:0 },
      { q_ar:"ููู ุชุชุนุฑู ุนูู ูุนุงุฏู ุงูุณููููุงุชุ", q_en:"How ID silicate minerals?", choices_ar:["ุจุตูุงุฏุฉุ ููู ุงูุดูุ ุงูููุนุงูุ ุงููุตู ุงูุจููุฑูุ ูุงูุชุญููู ุงููุฌูุฑู","ุจุงูุนูู ุงููุฌุฑุฏุฉ ููุท","ุจุงุณุชุฎุฏุงู ุญุฑุงุฑุฉ ุนุงููุฉ","ุจุงุณุชุฎุฏุงู ุงูุชุฑุจุฉ ููุท"], choices_en:["By hardness, streak, cleavage, crystal habit, and microscopy","By naked eye only","Using high heat","Using soil only"], answerIndex:0 },
      { q_ar:"ูุง ุงูุธูุงูุฑ ุงููุฑุชุจุทุฉ ุจุงูุฒูุงุฒูุ", q_en:"Phenomena associated with earthquakes?", choices_ar:["ุงูููุงุฑุงุช ุฃุฑุถูุฉุ ุชุณููุงูู ูู ุงููุญูุทุงุชุ ุชุณููู ุงูุชุฑุจุฉ","ุชุบูุฑ ุจุณูุท ูู ุงูุทูุณ","ุฒูุงุฏุฉ ุงููุญุงุตูู","ูุง ุดูุก"], choices_en:["Landslides, tsunamis in oceans, soil liquefaction","Slight weather change","Increased crops","Nothing"], answerIndex:0 },
      { q_ar:"ูุง ุงููุธุงู ุงูุฌููุฏููุงููููุ", q_en:"What is geodynamic system?", choices_ar:["ุฏุฑุงุณุฉ ุงูููู ูุงูุญุฑูุงุช ุงูุชู ุชุดูู ุงููุดุฑุฉ ุงูุฃุฑุถูุฉ (ุงูุชูุงุฑุงุช ุงูุญูููุฉุ ุญุฑูุฉ ุงูุตูุงุฆุญ)","ุนูู ุงูุทูุณ ููุท","ููุงุณ ุงูุถุบุท ุงูุฌูู","ุงูุธูุฉ ุงูุชุตุญุฑ"], choices_en:["Study of forces/motions shaping Earth's crust (mantle convection, plate movements)","Weather science only","Atmospheric pressure measurement","Desertification systems"], answerIndex:0 },
      { q_ar:"ูุง ุงูุบูุงู ุงูุตุฎุฑูุ", q_en:"What is the lithosphere?", choices_ar:["ุงูุบุทุงุก ุงูุฎุงุฑุฌู ุงูุตูุจ ูู ุงูุฃุฑุถ (ูุดุฑุฉ + ุงูุฌุฒุก ุงูุนููู ูู ุงูุณุชุงุฑ)","ุงูุบูุงู ุงูุฌูู ููุท","ุงููุญูุท ููุท","ุงูููุทูุฉ ุงูุญููุงููุฉ"], choices_en:["Outer rigid shell of Earth (crust + uppermost mantle)","Atmosphere only","Ocean only","Biosphere region"], answerIndex:0 },
      { q_ar:"ุงูุนูุงูุฉ ุจูู ุงูุฌููููุฌูุง ูุงูููุฏุณุฉ ุงููุฏููุฉุ", q_en:"Geology vs civil engineering relation?", choices_ar:["ูุนุทู ูุนูููุงุช ุนู ุซุจุงุช ุงูุชุฑุจุฉุ ููุงูุน ุงูููุงููุ ูููุนูุฉ ุงูุตุฎูุฑ ูุชุตููู ุงูุฃุณุงุณุงุช","ูุง ุนูุงูุฉ","ุงูููุฏุณุฉ ุชุญุฏุฏ ูู ุดูุก","ุฌููููุฌูุง ุชุณุชุฎุฏู ููุฒุฑุงุนุฉ ููุท"], choices_en:["Provides info on ground stability, fault locations, rock types for foundation design","No relation","Engineering defines everything","Geology only for agriculture"], answerIndex:0 },
      { q_ar:"ูุง ูุงุฆุฏุฉ ุฏุฑุงุณุฉ ุงูุฌููููุฌูุง ููููุงุฑุฏุ", q_en:"Value of geology for resources?", choices_ar:["ุชุญุฏูุฏ ููุงูุน ุงูุจุชุฑููุ ุงููุนุงุฏูุ ูุงูููุงู ุงูุฌูููุฉ ูุงุณุชุฎุฏุงููุง ุงููุณุชุฏุงู","ููุท ููุจุญุซ ุงููุธุฑู","ูุง ูุงุฆุฏุฉ","ููุท ูุชุตููู ุงูุทุฑู"], choices_en:["Locating petroleum, minerals, groundwater and guiding sustainable use","Only theoretical research","No use","Only for road design"], answerIndex:0 }
    ]
  }
};

/* ---------- App state ---------- */
let currentSection = null;
let currentIndex = 0;
let currentScore = 0;
let correctCount = 0;
let wrongCount = 0;
let timerSeconds = 30;
let timerInterval = null;
let leaderboard = JSON.parse(localStorage.getItem('geo_leaderboard')||'[]');

/* ---------- DOM refs ---------- */
const dashboard = document.getElementById('dashboard');
const mainContainer = document.getElementById('mainContainer');
const backButton = document.getElementById('backButton');
const startChallengeBtn = document.getElementById('startChallengeBtn');
const scenariosBtn = document.getElementById('scenariosBtn');
const glossaryBtn = document.getElementById('glossaryBtn');
const toolkitBtn = document.getElementById('toolkitBtn');

const sectionListEl = document.getElementById('sectionList');
const quizArea = document.getElementById('quizArea');
const qLabel = document.getElementById('qLabel');
const qText = document.getElementById('qText');
const answersBox = document.getElementById('answersBox');
const timerLabel = document.getElementById('timerLabel');
const scoreVal = document.getElementById('scoreVal');
const levelBadge = document.getElementById('levelBadge');
const progInner = document.getElementById('progInner');
const progressLabel = document.getElementById('progressLabel');
const skipBtn = document.getElementById('skipBtn');
const backToMenu = document.getElementById('backToMenu');

const resultModal = document.getElementById('resultModal');
const resScore = document.getElementById('resScore');
const resDetails = document.getElementById('resDetails');
const retryBtn = document.getElementById('retryBtn');
const closeResBtn = document.getElementById('closeResBtn');
const savedNote = document.getElementById('savedNote');
const leaderBtn = document.getElementById('leaderBtn');

/* ---------- Audio (WebAudio beeps) ---------- */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function beep(freq=880, dur=0.12, type='sine', gain=0.12){
  try{
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = type; o.frequency.value = freq;
    g.gain.value = gain;
    o.connect(g); g.connect(audioCtx.destination);
    o.start();
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + dur);
    setTimeout(()=> { try{ o.stop() }catch(e){} }, dur*1000+30);
  }catch(e){}
}
function playCorrect(){ beep(920,0.12,'sine',0.12); }
function playWrong(){ beep(220,0.18,'square',0.14); }
function playLevelUp(){ 
  beep(523,0.1,'sine',0.1);
  setTimeout(()=>beep(659,0.1,'sine',0.1),100);
  setTimeout(()=>beep(784,0.2,'sine',0.1),200);
}

/* ---------- ุงูุชููู ุจูู ุงูุตูุญุงุช ---------- */
function showMainContainer() {
  dashboard.style.display = 'none';
  mainContainer.style.display = 'block';
  backButton.style.display = 'flex';
}

function showDashboard() {
  dashboard.style.display = 'flex';
  mainContainer.style.display = 'none';
  backButton.style.display = 'none';
  quizArea.style.display = 'none';
  sectionListEl.style.display = 'grid';
  stopTimer();
  updateProgressUI();
}

/* ---------- Event Listeners ---------- */
backButton.addEventListener('click', showDashboard);
startChallengeBtn.addEventListener('click', () => {
  showMainContainer();
  renderSectionCards();
});
scenariosBtn.addEventListener('click', () => {
  showMainContainer();
  // ููุง ูููู ุฅุถุงูุฉ ูุญุชูู ุงูุณููุงุฑูููุงุช ุงูููุฏุงููุฉ
  sectionListEl.innerHTML = '<div style="text-align:center; padding:20px; color:var(--muted)">ูุฑูุจูุง: ุณููุงุฑูููุงุช ููุฏุงููุฉ ุชูุงุนููุฉ</div>';
});
glossaryBtn.addEventListener('click', () => {
  showMainContainer();
  // ููุง ูููู ุฅุถุงูุฉ ูุญุชูู ุงููุงููุณ
  sectionListEl.innerHTML = '<div style="text-align:center; padding:20px; color:var(--muted)">ูุฑูุจูุง: ูุงููุณ ุงููุตุทูุญุงุช ุงูุฌููููุฌูุฉ</div>';
});
toolkitBtn.addEventListener('click', () => {
  showMainContainer();
  // ููุง ูููู ุฅุถุงูุฉ ูุญุชูู ุฃุฏูุงุช ุงูุญูู
  sectionListEl.innerHTML = '<div style="text-align:center; padding:20px; color:var(--muted)">ูุฑูุจูุง: ุฃุฏูุงุช ุงูุฌููููุฌู ุงูููุฏุงูู</div>';
});

/* ---------- Helpers ---------- */
function shuffleArray(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }
function formatTime(s){ const mm=Math.floor(s/60), ss=s%60; return `${String(mm).padStart(2,'0')}:${String(ss).padStart(2,'0')}`; }
function tText(key, vars){ return t(key, vars); }

/* ---------- UI render ---------- */
function renderSectionCards(){
  sectionListEl.innerHTML = '';
  const keys = Object.keys(QUIZZES);
  keys.forEach(k=>{
    const data = QUIZZES[k];
    const isCompleted = userProgress.completedSections.includes(k);
    const card = document.createElement('div'); 
    card.className='section-card';
    if (isCompleted) {
      card.style.border = '2px solid var(--good)';
    }
    card.onclick = ()=> startSection(k);
    card.innerHTML = `
      <div class="section-title">${lang==='ar'?data.title_ar:data.title_en}</div>
      <div class="section-desc">${lang==='ar'?'30 ุณุคุงู ุนููู โ ุชุชุงุจุนู':'30 practical Q โ sequential'}</div>
      ${isCompleted ? '<div style="color:var(--good); font-size:10px; margin-top:4px">โ ููุชูู</div>' : ''}
    `;
    sectionListEl.appendChild(card);
  });
}

/* ---------- Start section ---------- */
function startSection(key){
  currentSection = key;
  currentIndex = 0;
  currentScore = 0;
  correctCount = 0;
  wrongCount = 0;
  quizArea.style.display = 'block';
  sectionListEl.style.display = 'none';
  showQuestion();
  window.scrollTo({top:0,behavior:'smooth'});
}

/* ---------- Show question ---------- */
let answered = false;
function showQuestion(){
  const items = QUIZZES[currentSection].items;
  const item = items[currentIndex];
  const n = items.length;
  qLabel.textContent = (lang==='ar')? `ุงูุณุคุงู ${currentIndex+1} / Q${currentIndex+1}` : `Q${currentIndex+1} / Question ${currentIndex+1}`;
  qText.textContent = (lang==='ar')? item.q_ar : item.q_en;
  progressLabel.textContent = t('questionOf', {i: currentIndex+1, n});
  answersBox.innerHTML = '';
  // choices array
  const choices = (lang==='ar')? item.choices_ar.slice() : item.choices_en.slice();
  // shuffle while preserving mapping to answerIndex by using objects
  const opts = choices.map((c,i)=>({text:c,origIndex:i}));
  shuffleArray(opts);
  opts.forEach((opt, idx)=>{
    const el = document.createElement('div'); el.className='answer';
    el.innerHTML = `<div class="opt-label">${['A','B','C','D'][idx]||String.fromCharCode(65+idx)}</div><div class="opt-text">${opt.text}</div>`;
    el.dataset.orig = opt.origIndex;
    el.onclick = ()=> selectAnswer(el, item.answerIndex);
    answersBox.appendChild(el);
  });
  // progress & score UI
  progInner.style.width = `${Math.round(((currentIndex+1)/n)*100)}%`;
  scoreVal.textContent = currentScore;
  updateLevelBadge();
  // timer
  startTimer();
  // visual
  const card = document.getElementById('questionCard');
  card.classList.remove('fade-in'); void card.offsetWidth; card.classList.add('fade-in');
  answered = false;
}

/* ---------- Answer selection ---------- */
function selectAnswer(el, correctIndex){
  if(answered) return;
  answered = true;
  stopTimer();
  const chosenOrig = Number(el.dataset.orig);
  const correctChoiceIndex = correctIndex;
  const isCorrect = (chosenOrig === correctChoiceIndex);
  if(isCorrect){
    el.classList.add('correct'); playCorrect();
    currentScore += 10; correctCount++;
    updateProgress(10); // ุชุญุฏูุซ ุงูุชูุฏู ุนูุฏ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ
  } else {
    el.classList.add('wrong'); playWrong();
    currentScore -= 5; wrongCount++;
    updateProgress(-5); // ุชุญุฏูุซ ุงูุชูุฏู ุนูุฏ ุงูุฅุฌุงุจุฉ ุงูุฎุงุทุฆุฉ
    // highlight correct option
    Array.from(answersBox.children).forEach(ch=>{
      if(Number(ch.dataset.orig) === correctChoiceIndex) ch.classList.add('correct');
      ch.onclick = null;
    });
  }
  scoreVal.textContent = currentScore;
  updateLevelBadge();
  setTimeout(()=> goNext(), 900);
}

/* ---------- Skip (unanswered) ---------- */
skipBtn.addEventListener('click', ()=>{
  if(!currentSection || answered) return;
  answered = true;
  stopTimer();
  // show correct
  const item = QUIZZES[currentSection].items[currentIndex];
  const correctIndex = item.answerIndex;
  Array.from(answersBox.children).forEach(ch=>{
    if(Number(ch.dataset.orig) === correctIndex) ch.classList.add('correct');
    ch.onclick = null;
  });
  updateProgress(0); // ูุง ุชุญุฏูุซ ููุชูุฏู ุนูุฏ ุงูุชุฌุงูุฒ
  setTimeout(()=> goNext(),700);
});

/* ---------- Timer ---------- */
function startTimer(){
  let tleft = timerSeconds || 30;
  timerLabel.textContent = formatTime(tleft);
  if(timerInterval) clearInterval(timerInterval);
  timerInterval = setInterval(()=>{
    tleft--;
    timerLabel.textContent = formatTime(tleft);
    if(tleft<=0){
      clearInterval(timerInterval);
      if(!answered){
        answered = true;
        // treat as wrong (deduct 5)
        playWrong();
        currentScore -= 5; wrongCount++;
        updateProgress(-5); // ุชุญุฏูุซ ุงูุชูุฏู ุนูุฏ ุงูุชูุงุก ุงูููุช
        scoreVal.textContent = currentScore;
        updateLevelBadge();
        // highlight correct
        const item = QUIZZES[currentSection].items[currentIndex];
        const corr = item.answerIndex;
        Array.from(answersBox.children).forEach(ch=>{
          if(Number(ch.dataset.orig) === corr) ch.classList.add('correct');
          ch.onclick = null;
        });
        setTimeout(()=> goNext(),900);
      }
    }
  },1000);
}
function stopTimer(){ if(timerInterval) clearInterval(timerInterval); timerInterval = null; }

/* ---------- Next question / finish ---------- */
function goNext(){
  stopTimer();
  const total = QUIZZES[currentSection].items.length;
  currentIndex++;
  if(currentIndex < total){
    showQuestion();
  } else {
    finishQuiz();
  }
}

/* ---------- Finish quiz ---------- */
function finishQuiz(){
  quizArea.style.display = 'none';
  stopTimer();
  const totalQuestions = QUIZZES[currentSection].items.length;
  const totalPossible = totalQuestions * 10;
  const percent = Math.max(0, Math.round((currentScore / totalPossible) * 100));
  resScore.textContent = `${currentScore} ููุทุฉ`;
  resDetails.innerHTML = `
    <div class="small-muted">${lang==='ar'?'ุงููุณู':'Section'}: ${lang==='ar'?QUIZZES[currentSection].title_ar:QUIZZES[currentSection].title_en}</div>
    <div style="margin-top:8px">${lang==='ar'?'ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ':'Correct'}: <strong>${correctCount}/${totalQuestions}</strong> โ ${lang==='ar'?'ุงูุฎุงุทุฆุฉ/ุงููุชุฌุงูุฒุฉ':'Wrong/Skipped'}: <strong>${wrongCount}</strong></div>
    <div style="margin-top:8px">${lang==='ar'?'ุงููุณุจุฉ':'Percent'}: <strong>${percent}%</strong></div>
  `;
  const level = determineLevel(currentScore);
  document.getElementById('resTitle').textContent = (lang==='ar'?'ุงููุชูุฌุฉ ุงูููุงุฆูุฉ':'Final Result') + ` โ ${level.name}`;
  // save result
  const entry = { id: Date.now(), section: currentSection, score: currentScore, when: new Date().toISOString(), level: level.name, lang };
  leaderboard.push(entry); leaderboard.sort((a,b)=> b.score - a.score);
  if(leaderboard.length>100) leaderboard = leaderboard.slice(0,100);
  localStorage.setItem('geo_leaderboard', JSON.stringify(leaderboard));
  
  // ุชุญุฏูุซ ุงูุชูุฏู ุนูุฏ ุฅููุงู ุงููุณู
  updateProgress(0, true);
  
  savedNote.textContent = t('savedNote');
  resultModal.style.display = 'flex';
}

/* ---------- Levels ---------- */
function determineLevel(score){
  if(score >= 250) return { name: (lang==='ar'?'ุฎุจูุฑ ๐':'Expert ๐'), color:'#ffd700' };
  if(score >= 150) return { name: (lang==='ar'?'ููุฏุงูู ๐ชจ':'Field Pro ๐ชจ'), color:'#c0c0c0' };
  if(score >= 50) return { name: (lang==='ar'?'ูุชูุฏู ๐ฐ':'Advanced ๐ฐ'), color:'#7dd3fc' };
  return { name: (lang==='ar'?'ูุจุชุฏุฆ':'Beginner'), color:'#94a3b8' };
}
function updateLevelBadge(){ const lv = determineLevel(currentScore); levelBadge.textContent = `${lang==='ar'?'ุงููุณุชูู':'Level'}: ${lv.name}`; }

/* ---------- Retry / close ---------- */
retryBtn.addEventListener('click', ()=> { resultModal.style.display='none'; startSection(currentSection); });
closeResBtn.addEventListener('click', ()=> { resultModal.style.display='none'; showDashboard(); });

/* ---------- Back to menu ---------- */
backToMenu.addEventListener('click', showDashboard);

/* ---------- Leaderboard ---------- */
leaderBtn.addEventListener('click', ()=>{
  const board = JSON.parse(localStorage.getItem('geo_leaderboard')||'[]');
  if(board.length===0){ alert(t('leaderboardEmpty')); return; }
  let out = (lang==='ar'?'ููุญุฉ ุงููุชุงุฆุฌ (ุฃุนูู 20):\n\n':'Leaderboard (top 20):\n\n');
  board.slice(0,20).forEach((e,i)=>{
    const title = (lang==='ar'? QUIZZES[e.section].title_ar : QUIZZES[e.section].title_en);
    const scoreText = (lang==='ar'? `${e.score} ููุทุฉ` : `${e.score} points`);
    out += `${i+1}. ${title} โ ${scoreText} โ ${e.level} โ ${new Date(e.when).toLocaleDateString(lang)}\n`;
  });
  alert(out);
});

/* ---------- Language Toggle ---------- */
langToggle.addEventListener('click', () => {
    lang = (lang === 'ar') ? 'en' : 'ar';
    localStorage.setItem('geo_lang', lang);
    document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
    refreshLangUI();
    renderSectionCards();
    updateLevelBadge();
});

/* ---------- Init ---------- */
function init(){
  refreshLangUI();
  updateProgressUI();
  scoreVal.textContent = '0';
  updateLevelBadge();
  // show dashboard by default
  showDashboard();
  // resume audio on gesture
  document.addEventListener('click', ()=> { if(audioCtx.state==='suspended') audioCtx.resume(); }, { once:true });
}
init();

</script>
</body>
</html>