<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoReady Pro | منصة التدريب الجيولوجي الشاملة للمحترفين</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    /* ================================= المتغيرات العامة ================================= */
    :root {
      --primary-blue: #0056b3;
      --secondary-blue: #007bff;
      --accent-cyan: #17a2b8;
      --success-green: #28a745;
      --warning-orange: #fd7e14;
      --danger-red: #dc3545;
      --dark-navy: #1a1d29;
      --light-gray: #f8f9fa;
      --white: #ffffff;
      --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --shadow-soft: 0 10px 40px rgba(0,0,0,0.1);
      --shadow-medium: 0 15px 50px rgba(0,0,0,0.15);
      --shadow-strong: 0 20px 60px rgba(0,0,0,0.2);
    }

    /* ================================= التنسيقات العامة ================================= */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Cairo', 'Tajawal', sans-serif;
      line-height: 1.6;
      color: var(--dark-navy);
      background: var(--light-gray);
      overflow-x: hidden;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* ================================= الهيدر والتنقل ================================= */
    header {
      background: var(--gradient-primary);
      color: var(--white);
      padding: 100px 0 80px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="rgba(255,255,255,0.1)"><polygon points="0,0 1000,80 1000,100 0,100"/></svg>');
      background-size: cover;
    }

    .hero-content {
      position: relative;
      z-index: 2;
    }

    .hero-title {
      font-size: 4.5rem;
      font-weight: 900;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      animation: fadeInUp 1s ease-out;
    }

    .hero-subtitle {
      font-size: 1.8rem;
      margin-bottom: 30px;
      opacity: 0.95;
      animation: fadeInUp 1s ease-out 0.2s both;
    }

    .hero-cta {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
      animation: fadeInUp 1s ease-out 0.4s both;
    }

    .btn {
      padding: 15px 30px;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .btn-primary {
      background: var(--white);
      color: var(--primary-blue);
      box-shadow: var(--shadow-soft);
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 45px rgba(0,0,0,0.15);
    }

    .btn-outline {
      background: transparent;
      color: var(--white);
      border: 2px solid var(--white);
    }

    .btn-outline:hover {
      background: var(--white);
      color: var(--primary-blue);
    }

    /* ================================= شريط التنقل الثابت ================================= */
    .navbar {
      background: var(--white);
      padding: 20px 0;
      box-shadow: var(--shadow-soft);
      position: sticky;
      top: 0;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .navbar.scrolled {
      padding: 15px 0;
      box-shadow: var(--shadow-medium);
    }

    .nav-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 2rem;
      font-weight: 900;
      color: var(--primary-blue);
    }

    .nav-links {
      display: flex;
      gap: 30px;
      list-style: none;
    }

    .nav-links a {
      color: var(--dark-navy);
      text-decoration: none;
      font-weight: 600;
      padding: 10px 15px;
      border-radius: 25px;
      transition: all 0.3s ease;
    }

    .nav-links a:hover, .nav-links a.active {
      background: var(--primary-blue);
      color: var(--white);
    }

    /* ================================= شارة النقاط ================================= */
    .score-badge {
      position: fixed;
      top: 20px;
      left: 20px;
      background: var(--gradient-primary);
      color: var(--white);
      padding: 10px 20px;
      border-radius: 25px;
      box-shadow: var(--shadow-medium);
      z-index: 2000;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 1.1rem;
    }

    .score-value {
      background: rgba(255,255,255,0.2);
      padding: 5px 10px;
      border-radius: 15px;
      min-width: 50px;
      text-align: center;
    }

    /* ================================= لوحة القيادة المتقدمة ================================= */
    .dashboard-section {
      padding: 80px 0;
      background: var(--white);
    }

    .section-title {
      text-align: center;
      font-size: 3rem;
      font-weight: 900;
      margin-bottom: 20px;
      color: var(--dark-navy);
    }

    .section-subtitle {
      text-align: center;
      font-size: 1.3rem;
      color: #666;
      margin-bottom: 60px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-bottom: 50px;
    }

    .stat-card {
      background: var(--white);
      padding: 40px 30px;
      border-radius: 20px;
      box-shadow: var(--shadow-soft);
      text-align: center;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .stat-card:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-medium);
      border-color: var(--primary-blue);
    }

    .stat-icon {
      font-size: 3rem;
      margin-bottom: 20px;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stat-number {
      font-size: 3.5rem;
      font-weight: 900;
      color: var(--primary-blue);
      margin-bottom: 10px;
    }

    .stat-label {
      font-size: 1.2rem;
      color: #666;
      font-weight: 600;
    }

    .progress-section {
      background: var(--gradient-primary);
      padding: 50px;
      border-radius: 25px;
      color: var(--white);
      text-align: center;
    }

    .level-display {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 30px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .level-badge {
      background: rgba(255,255,255,0.2);
      padding: 20px 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }

    .progress-bar-container {
      max-width: 600px;
      margin: 0 auto;
    }

    .progress-bar {
      height: 20px;
      background: rgba(255,255,255,0.3);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .progress-fill {
      height: 100%;
      background: var(--white);
      border-radius: 10px;
      transition: width 2s ease;
      position: relative;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* ================================= مسارات التعلم ================================= */
    .learning-paths {
      padding: 100px 0;
      background: var(--light-gray);
    }

    .paths-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 40px;
    }

    .path-card {
      background: var(--white);
      border-radius: 25px;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      transition: all 0.3s ease;
      position: relative;
    }

    .path-card:hover {
      transform: translateY(-15px);
      box-shadow: var(--shadow-strong);
    }

    .path-header {
      padding: 40px 30px;
      background: var(--gradient-primary);
      color: var(--white);
      text-align: center;
      position: relative;
    }

    .path-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      opacity: 0.9;
    }

    .path-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .path-level {
      background: rgba(255,255,255,0.2);
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 0.9rem;
      display: inline-block;
    }

    .path-content {
      padding: 40px 30px;
    }

    .path-modules {
      list-style: none;
      margin-bottom: 30px;
    }

    .path-modules li {
      padding: 15px 0;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .path-modules li:last-child {
      border-bottom: none;
    }

    .module-status {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #ddd;
      position: relative;
    }

    .module-status.completed {
      background: var(--success-green);
    }

    .module-status.completed::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: var(--white);
      font-size: 12px;
      font-weight: bold;
    }

    .path-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      padding: 20px;
      background: var(--light-gray);
      border-radius: 15px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-item-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-blue);
    }

    .stat-item-label {
      font-size: 0.9rem;
      color: #666;
    }

    /* ================================= الأدوات التفاعلية ================================= */
    .interactive-tools {
      padding: 100px 0;
      background: var(--white);
    }

    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
    }

    .tool-card {
      background: var(--light-gray);
      border-radius: 20px;
      padding: 40px 30px;
      text-align: center;
      transition: all 0.3s ease;
      border: 3px solid transparent;
    }

    .tool-card:hover {
      background: var(--white);
      border-color: var(--primary-blue);
      box-shadow: var(--shadow-medium);
    }

    .tool-icon {
      font-size: 3.5rem;
      margin-bottom: 25px;
      color: var(--primary-blue);
    }

    .tool-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--dark-navy);
    }

    .tool-description {
      color: #666;
      margin-bottom: 25px;
      line-height: 1.8;
    }

    .tool-features {
      list-style: none;
      margin-bottom: 30px;
    }

    .tool-features li {
      padding: 8px 0;
      color: #555;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .tool-features li::before {
      content: '●';
      color: var(--success-green);
      font-weight: bold;
    }

    /* ================================= المشاريع العملية ================================= */
    .projects-section {
      padding: 100px 0;
      background: var(--dark-navy);
      color: var(--white);
    }

    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 40px;
    }

    .project-card {
      background: rgba(255,255,255,0.1);
      border-radius: 20px;
      overflow: hidden;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
      transition: all 0.3s ease;
    }

    .project-card:hover {
      transform: translateY(-10px);
      background: rgba(255,255,255,0.15);
    }

    .project-image {
      height: 200px;
      background: var(--gradient-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      color: var(--white);
    }

    .project-info {
      padding: 30px;
    }

    .project-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 15px;
    }

    .project-description {
      opacity: 0.9;
      margin-bottom: 20px;
      line-height: 1.7;
    }

    .project-tags {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 25px;
    }

    .project-tag {
      background: rgba(255,255,255,0.2);
      padding: 5px 15px;
      border-radius: 15px;
      font-size: 0.9rem;
    }

    .project-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      font-size: 0.9rem;
      opacity: 0.8;
    }

    /* ================================= نظام الشهادات ================================= */
    .certificates-section {
      padding: 100px 0;
      background: var(--light-gray);
    }

    .cert-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
    }

    .cert-card {
      background: var(--white);
      border-radius: 20px;
      padding: 40px 30px;
      text-align: center;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .cert-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: var(--gradient-primary);
    }

    .cert-icon {
      font-size: 3rem;
      color: var(--warning-orange);
      margin-bottom: 20px;
    }

    .cert-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--dark-navy);
    }

    .cert-requirements {
      list-style: none;
      margin-bottom: 25px;
      text-align: right;
    }

    .cert-requirements li {
      padding: 8px 0;
      color: #666;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .cert-requirements li::before {
      content: '✓';
      color: var(--success-green);
      font-weight: bold;
      width: 20px;
      text-align: center;
    }

    /* ================================= المجتمع والدعم ================================= */
    .community-section {
      padding: 100px 0;
      background: var(--white);
    }

    .community-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 40px;
    }

    .community-card {
      background: var(--light-gray);
      border-radius: 20px;
      padding: 40px 30px;
      text-align: center;
      transition: all 0.3s ease;
    }

    .community-card:hover {
      background: var(--white);
      box-shadow: var(--shadow-medium);
      transform: translateY(-10px);
    }

    /* ================================= الفوتر ================================= */
    footer {
      background: var(--dark-navy);
      color: var(--white);
      padding: 60px 0 30px;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 40px;
      margin-bottom: 40px;
    }

    .footer-section h3 {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: var(--white);
    }

    .footer-section ul {
      list-style: none;
    }

    .footer-section ul li {
      padding: 8px 0;
    }

    .footer-section ul li a {
      color: #ccc;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-section ul li a:hover {
      color: var(--white);
    }

    .footer-bottom {
      border-top: 1px solid #444;
      padding-top: 30px;
      text-align: center;
      color: #ccc;
    }

    /* ================================= الاستجابة ================================= */
    @media (max-width: 768px) {
      .hero-title {
        font-size: 3rem;
      }
      
      .hero-subtitle {
        font-size: 1.3rem;
      }

      .nav-links {
        display: none;
      }

      .section-title {
        font-size: 2.2rem;
      }

      .paths-grid,
      .tools-grid,
      .projects-grid {
        grid-template-columns: 1fr;
      }

      .level-display {
        flex-direction: column;
        gap: 15px;
      }
    }

    /* ================================= الرسوم المتحركة ================================= */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes bounceIn {
      0%, 20%, 40%, 60%, 80% {
        transform: scale(0.6);
        opacity: 0;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .animate-on-scroll {
      opacity: 0;
      transform: translateY(50px);
      transition: all 0.8s ease;
    }

    .animate-on-scroll.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* ================================= عناصر تفاعلية إضافية ================================= */
    .floating-action {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background: var(--gradient-primary);
      color: var(--white);
      padding: 15px;
      border-radius: 50%;
      font-size: 1.5rem;
      box-shadow: var(--shadow-medium);
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .floating-action:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-strong);
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--danger-red);
      color: var(--white);
      font-size: 0.8rem;
      padding: 4px 8px;
      border-radius: 10px;
      min-width: 20px;
      text-align: center;
    }

    /* ================================= مكونات التلعيب المتقدمة ================================= */
    .achievement-popup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--success-green);
      color: var(--white);
      padding: 20px 25px;
      border-radius: 15px;
      box-shadow: var(--shadow-strong);
      transform: translateX(400px);
      transition: all 0.5s ease;
      z-index: 2000;
    }

    .achievement-popup.show {
      transform: translateX(0);
    }

    .achievement-popup .achievement-icon {
      font-size: 2rem;
      margin-left: 15px;
    }

    .leaderboard {
      background: var(--white);
      border-radius: 20px;
      padding: 30px;
      box-shadow: var(--shadow-soft);
    }

    .leaderboard-item {
      display: flex;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid #eee;
    }

    .leaderboard-item:last-child {
      border-bottom: none;
    }

    .rank-badge {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--gradient-primary);
      color: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-left: 15px;
    }

    /* ================================= الميزات الجديدة ================================= */
    /* شريط اللغات */
    .language-switcher {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 2000;
      background: var(--white);
      border-radius: 25px;
      padding: 10px 15px;
      box-shadow: var(--shadow-soft);
      display: flex;
      gap: 10px;
    }

    .language-btn {
      background: none;
      border: none;
      padding: 8px 15px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .language-btn.active {
      background: var(--primary-blue);
      color: var(--white);
    }

    /* نافذة الأسئلة */
    .qa-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 3000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .qa-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .qa-container {
      background: var(--white);
      border-radius: 25px;
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-strong);
    }

    .qa-header {
      background: var(--gradient-primary);
      color: var(--white);
      padding: 20px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .qa-header h2 {
      font-size: 1.5rem;
      margin: 0;
    }

    .close-btn {
      background: none;
      border: none;
      color: var(--white);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .qa-body {
      padding: 30px;
      flex: 1;
      overflow-y: auto;
    }

    .search-box {
      margin-bottom: 30px;
    }

    .search-input {
      width: 100%;
      padding: 15px 20px;
      border: 2px solid #eee;
      border-radius: 50px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      border-color: var(--primary-blue);
      outline: none;
    }

    .qa-results {
      max-height: 400px;
      overflow-y: auto;
    }

    .qa-item {
      background: var(--light-gray);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .qa-item:hover {
      background: #e9ecef;
    }

    .qa-question {
      font-weight: 600;
      margin-bottom: 10px;
    }

    .qa-answer {
      color: #666;
      max-height: 0;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .qa-item.active .qa-answer {
      max-height: 500px;
      margin-top: 15px;
    }

    .ask-question-form {
      margin-top: 30px;
      padding-top: 30px;
      border-top: 1px solid #eee;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .form-input, .form-textarea {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #eee;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
    }

    .form-input:focus, .form-textarea:focus {
      border-color: var(--primary-blue);
      outline: none;
    }

    /* تحسينات للعرض الحديث */
    .modern-card {
      background: var(--white);
      border-radius: 20px;
      padding: 30px;
      box-shadow: var(--shadow-soft);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .modern-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: var(--gradient-primary);
    }

    .modern-card:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-medium);
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 50px;
    }

    .feature-icon {
      font-size: 3rem;
      margin-bottom: 20px;
      color: var(--primary-blue);
    }

    .feature-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 15px;
    }

    .feature-description {
      color: #666;
      line-height: 1.7;
    }

    /* تحسينات للعرض التفاعلي */
    .interactive-section {
      padding: 100px 0;
      background: var(--light-gray);
    }

    .tab-container {
      background: var(--white);
      border-radius: 25px;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
    }

    .tab-header {
      display: flex;
      background: var(--gradient-primary);
      overflow-x: auto;
    }

    .tab-btn {
      background: none;
      border: none;
      padding: 20px 30px;
      color: var(--white);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .tab-btn.active {
      background: rgba(255,255,255,0.2);
    }

    .tab-content {
      padding: 40px;
    }

    .tab-pane {
      display: none;
    }

    .tab-pane.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* تحسينات للعرض على الجوال */
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--dark-navy);
      cursor: pointer;
    }

    /* ================================= نظام الاختبارات ================================= */
    .test-container {
      background: var(--white);
      border-radius: 20px;
      padding: 30px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 30px;
    }

    .test-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .test-title {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .test-info {
      display: flex;
      gap: 15px;
      color: #666;
    }

    .test-question {
      font-size: 1.2rem;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .test-options {
      list-style: none;
      margin-bottom: 30px;
    }

    .test-option {
      padding: 15px;
      margin-bottom: 10px;
      border: 2px solid #eee;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .test-option:hover {
      background: var(--light-gray);
    }

    .test-option.selected {
      border-color: var(--primary-blue);
      background: rgba(0, 86, 179, 0.05);
    }

    .test-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .test-progress {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .progress-text {
      font-size: 0.9rem;
      color: #666;
    }

    /* ================================= نظام العرض التدريجي ================================= */
    .accordion {
      margin-bottom: 20px;
    }

    .accordion-header {
      background: var(--gradient-primary);
      color: var(--white);
      padding: 20px;
      border-radius: 15px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    .accordion-header:hover {
      background: var(--primary-blue);
    }

    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: all 0.3s ease;
      background: var(--light-gray);
      border-radius: 0 0 15px 15px;
    }

    .accordion.active .accordion-content {
      max-height: 1000px;
      padding: 20px;
    }

    .accordion.active .accordion-header {
      border-radius: 15px 15px 0 0;
    }

    .accordion-icon {
      transition: transform 0.3s ease;
    }

    .accordion.active .accordion-icon {
      transform: rotate(180deg);
    }

    /* ================================= أزرار التراجع والإعادة ================================= */
    .undo-redo-container {
      position: fixed;
      bottom: 80px;
      left: 20px;
      display: flex;
      gap: 10px;
      z-index: 1000;
    }

    .undo-btn, .redo-btn {
      background: var(--white);
      color: var(--dark-navy);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-medium);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .undo-btn:hover, .redo-btn:hover {
      background: var(--primary-blue);
      color: var(--white);
    }

    .undo-btn:disabled, .redo-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: block;
      }

      .nav-links {
        position: fixed;
        top: 0;
        right: -100%;
        width: 80%;
        height: 100vh;
        background: var(--white);
        flex-direction: column;
        padding: 80px 30px 30px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-strong);
      }

      .nav-links.active {
        right: 0;
      }

      .mobile-menu-close {
        position: absolute;
        top: 20px;
        left: 20px;
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--dark-navy);
        cursor: pointer;
      }

      .language-switcher {
        top: 80px;
        right: 20px;
      }

      .score-badge {
        top: 80px;
        left: 20px;
      }
    }
  </style>
</head>
<body>

  <!-- ============================= شارة النقاط ============================= -->
  <div class="score-badge" id="scoreBadge">
    <i class="fas fa-star"></i>
    نقاط: <span class="score-value" id="scoreValue">0</span>
  </div>

  <!-- ============================= شريط اللغات ============================= -->
  <div class="language-switcher">
    <button class="language-btn active" data-lang="ar">العربية</button>
    <button class="language-btn" data-lang="en">English</button>
    <button class="language-btn" data-lang="fr">Français</button>
  </div>

  <!-- ============================= أزرار التراجع والإعادة ============================= -->
  <div class="undo-redo-container">
    <button class="undo-btn" id="undoBtn" title="تراجع">
      <i class="fas fa-undo"></i>
    </button>
    <button class="redo-btn" id="redoBtn" title="إعادة">
      <i class="fas fa-redo"></i>
    </button>
  </div>

  <!-- ============================= الهيدر الرئيسي ============================= -->
  <header>
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">🌍 GeoReady Pro</h1>
        <p class="hero-subtitle">منصة التدريب الجيولوجي المتكاملة | من الجامعة إلى سوق العمل</p>
        <div class="hero-cta">
          <a href="#start-journey" class="btn btn-primary">
            <i class="fas fa-rocket"></i>
            ابدأ رحلتك المهنية
          </a>
          <a href="#explore-paths" class="btn btn-outline">
            <i class="fas fa-compass"></i>
            استكشف المسارات
          </a>
          <button class="btn btn-outline" id="openQaModal">
            <i class="fas fa-question-circle"></i>
            مركز الأسئلة
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- ============================= شريط التنقل ============================= -->
  <nav class="navbar" id="navbar">
    <div class="container">
      <div class="nav-content">
        <div class="logo">GeoReady Pro</div>
        <button class="mobile-menu-btn" id="mobileMenuBtn">
          <i class="fas fa-bars"></i>
        </button>
        <ul class="nav-links" id="navLinks">
          <button class="mobile-menu-close" id="mobileMenuClose">
            <i class="fas fa-times"></i>
          </button>
          <li><a href="#dashboard" class="active"><i class="fas fa-tachometer-alt"></i> لوحة القيادة</a></li>
          <li><a href="#learning-paths"><i class="fas fa-graduation-cap"></i> مسارات التعلم</a></li>
          <li><a href="#interactive-tools"><i class="fas fa-tools"></i> الأدوات التفاعلية</a></li>
          <li><a href="#projects"><i class="fas fa-project-diagram"></i> المشاريع العملية</a></li>
          <li><a href="#certificates"><i class="fas fa-certificate"></i> الشهادات</a></li>
          <li><a href="#community"><i class="fas fa-users"></i> المجتمع</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ============================= لوحة القيادة المتقدمة ============================= -->
  <section id="dashboard" class="dashboard-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll">📊 لوحة القيادة الشخصية</h2>
      <p class="section-subtitle animate-on-scroll">تتبع تقدمك الأكاديمي والمهني بطريقة تفاعلية ومرئية</p>
      
      <div class="dashboard-grid animate-on-scroll">
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-trophy"></i></div>
          <div class="stat-number" id="totalPoints">2,847</div>
          <div class="stat-label">نقاط الخبرة الكلية</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-star"></i></div>
          <div class="stat-number" id="currentLevel">12</div>
          <div class="stat-label">المستوى الحالي</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
          <div class="stat-number" id="completedModules">28</div>
          <div class="stat-label">وحدة مكتملة</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-certificate"></i></div>
          <div class="stat-number" id="earnedCerts">5</div>
          <div class="stat-label">شهادة محققة</div>
        </div>
      </div>

      <div class="progress-section animate-on-scroll">
        <h3 style="margin-bottom: 30px; font-size: 2rem;">🎯 رحلتك نحو الاحتراف</h3>
        <div class="level-display">
          <div class="level-badge">
            <h4>المستوى الحالي</h4>
            <div style="font-size: 2rem; font-weight: 900;">12 - خبير متقدم</div>
          </div>
          <div class="level-badge">
            <h4>المستوى التالي</h4>
            <div style="font-size: 1.5rem;">13 - استشاري مبتدئ</div>
          </div>
          <div class="level-badge">
            <h4>التقدم المطلوب</h4>
            <div style="font-size: 1.5rem;">653 XP</div>
          </div>
        </div>
        
        <div class="progress-bar-container">
          <div class="progress-bar">
            <div class="progress-fill" style="width: 73%"></div>
          </div>
          <p>73% إلى المستوى التالي (1,847 / 2,500 XP)</p>
        </div>

        <div style="margin-top: 30px;">
          <h4 style="margin-bottom: 15px;">🏅 الإنجازات الأخيرة</h4>
          <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
            <span style="background: rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 25px;">
              🛢️ خبير البترول
            </span>
            <span style="background: rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 25px;">
              ⛏️ محلل التعدين
            </span>
            <span style="background: rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 25px;">
              💻 مبرمج GIS
            </span>
            <span style="background: rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 25px;">
              🏗️ مهندس جيوتقني
            </span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= قسم الميزات الحديثة ============================= -->
  <section class="interactive-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll">🚀 أحدث طرق العرض والتدريب</h2>
      <p class="section-subtitle animate-on-scroll">استمتع بتجربة تعلم تفاعلية باستخدام أحدث التقنيات والمنهجيات</p>
      
      <div class="tab-container animate-on-scroll">
        <div class="tab-header">
          <button class="tab-btn active" data-tab="virtual-reality">الواقع الافتراضي</button>
          <button class="tab-btn" data-tab="simulations">المحاكاة التفاعلية</button>
          <button class="tab-btn" data-tab="gamification">التلعيب</button>
          <button class="tab-btn" data-tab="microlearning">التعلم المصغر</button>
        </div>
        <div class="tab-content">
          <div class="tab-pane active" id="virtual-reality">
            <h3>تجارب الواقع الافتراضي المغمورة</h3>
            <p>استكشف المواقع الجيولوجية المعقدة من خلال تجارب الواقع الافتراضي المذهلة. تسلق الجبال، استكشف المناجم، واغوص في أعماق الأرض دون مغادرة منزلك.</p>
            <div class="feature-grid">
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-vr-cardboard"></i></div>
                <h4 class="feature-title">رحلات ميدانية افتراضية</h4>
                <p class="feature-description">زيارة مواقع جيولوجية حقيقية حول العالم بتقنية 360 درجة مع مرشدين متخصصين.</p>
              </div>
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-cube"></i></div>
                <h4 class="feature-title">نماذج ثلاثية الأبعاد تفاعلية</h4>
                <p class="feature-description">تفاعل مع النماذج الجيولوجية المعقدة من جميع الزوايا لفهم أفضل للهياكل.</p>
              </div>
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-users"></i></div>
                <h4 class="feature-title">فصول دراسية افتراضية</h4>
                <p class="feature-description">انضم إلى فصول دراسية تفاعلية مع زملاء من جميع أنحاء العالم في بيئة افتراضية.</p>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="simulations">
            <h3>محاكاة واقعية للعمليات الجيولوجية</h3>
            <p>تدرب على سيناريوهات حقيقية من خلال محاكيات متقدمة تعكس تحديات العمل الميداني والمكتبي في الصناعة.</p>
            <div class="feature-grid">
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-oil-well"></i></div>
                <h4 class="feature-title">محاكاة الحفر والاستكشاف</h4>
                <p class="feature-description">تدرب على عمليات الحفر والاستكشاف البترولي في بيئة آمنة وواقعية.</p>
              </div>
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                <h4 class="feature-title">محاكاة تحليل البيانات</h4>
                <p class="feature-description">تعلم تحليل البيانات الجيولوجية باستخدام أدوات محاكاة مطابقة للبرامج الاحترافية.</p>
              </div>
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-exclamation-triangle"></i></div>
                <h4 class="feature-title">محاكاة إدارة المخاطر</h4>
                <p class="feature-description">تدرب على التعامل مع المواقف الطارئة والمخاطر الجيولوجية المختلفة.</p>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="gamification">
            <h3>نظام التلعيب المتقدم</h3>
            <p>اجعل تعلمك أكثر متعة وفعالية من خلال نظام التلعيب الذي يحول المهام التعليمية إلى تحديات ممتعة.</p>
            <div class="feature-grid">
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-trophy"></i></div>
                <h4 class="feature-title">الإنجازات والشارات</h4>
                <p class="feature-description">اكسب شارات وإنجازات فريدة عند إكمال المهام والتحديات التعليمية.</p>
              </div>
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-medal"></i></div>
                <h4 class="feature-title">لوحة المتصدرين</h4>
                <p class="feature-description">تنافس مع زملائك وارتق في لوحة المتصدرين لتحفيزك على التميز.</p>
              </div>
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-puzzle-piece"></i></div>
                <h4 class="feature-title">التعلم القائم على الألغاز</h4>
                <p class="feature-description">حل الألغاز الجيولوجية المعقدة لتطوير مهاراتك التحليلية والإبداعية.</p>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="microlearning">
            <h3>التعلم المصغر والمرن</h3>
            <p>تعلم في أي وقت ومن أي مكان من خلال دروس مصغرة تركز على مهارات محددة يمكن إكمالها في جلسات قصيرة.</p>
            <div class="feature-grid">
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-mobile-alt"></i></div>
                <h4 class="feature-title">دروس متنقلة</h4>
                <p class="feature-description">استفد من وقتك في التنقل من خلال دروس مصغرة مصممة خصيصاً للهواتف.</p>
              </div>
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-bolt"></i></div>
                <h4 class="feature-title">جلسات سريعة</h4>
                <p class="feature-description">جلسات تعلم مركزة لمدة 5-10 دقائق تركز على مهارة أو مفهوم محدد.</p>
              </div>
              <div class="modern-card">
                <div class="feature-icon"><i class="fas fa-sync"></i></div>
                <h4 class="feature-title">التكرار المتباعد</h4>
                <p class="feature-description">تعزيز الذاكرة طويلة المدى من خلال مراجعة المادة في فترات متباعدة محسوبة.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= مسارات التعلم التخصصية ============================= -->
  <section id="learning-paths" class="learning-paths">
    <div class="container">
      <h2 class="section-title animate-on-scroll">🎓 مسارات التعلم التخصصية</h2>
      <p class="section-subtitle animate-on-scroll">مسارات شاملة مصممة بعناية لتأهيلك لسوق العمل في مختلف التخصصات الجيولوجية</p>
      
      <!-- نظام العرض التدريجي -->
      <div class="accordion-container">
        <div class="accordion" id="accordion-1">
          <div class="accordion-header">
            <h3>مسار جيولوجيا البترول المتقدم</h3>
            <span class="accordion-icon"><i class="fas fa-chevron-down"></i></span>
          </div>
          <div class="accordion-content">
            <div class="path-stats">
              <div class="stat-item">
                <div class="stat-item-value">24</div>
                <div class="stat-item-label">وحدة تدريبية</div>
              </div>
              <div class="stat-item">
                <div class="stat-item-value">180</div>
                <div class="stat-item-label">ساعة تدريب</div>
              </div>
              <div class="stat-item">
                <div class="stat-item-value">3,500</div>
                <div class="stat-item-label">XP كلية</div>
              </div>
            </div>
            
            <ul class="path-modules">
              <li>
                <div class="module-status completed"></div>
                <span>أساسيات جيولوجيا البترول والصخور المصدر</span>
              </li>
              <li>
                <div class="module-status completed"></div>
                <span>تحليل البيانات السيزمية وتفسير الخرائط</span>
              </li>
              <li>
                <div class="module-status completed"></div>
                <span>نمذجة المكامن باستخدام Petrel</span>
              </li>
              <li>
                <div class="module-status"></div>
                <span>تقييم وتطوير الحقول البترولية</span>
              </li>
              <li>
                <div class="module-status"></div>
                <span>محاكاة إنتاج البترول والغاز</span>
              </li>
              <li>
                <div class="module-status"></div>
                <span>الاقتصاد البترولي وتقييم المشاريع</span>
              </li>
            </ul>
            
            <div class="test-container" id="test-1">
              <div class="test-header">
                <h3 class="test-title">اختبار أساسيات جيولوجيا البترول</h3>
                <div class="test-info">
                  <span><i class="fas fa-clock"></i> 10 دقائق</span>
                  <span><i class="fas fa-star"></i> 25 نقطة</span>
                </div>
              </div>
              <div class="test-question">
                ما هي الصخور المصدر الرئيسية للنفط؟
              </div>
              <ul class="test-options">
                <li class="test-option" data-correct="false">الصخور النارية</li>
                <li class="test-option" data-correct="true">الصخور الرسوبية الغنية بالمواد العضوية</li>
                <li class="test-option" data-correct="false">الصخور المتحولة</li>
                <li class="test-option" data-correct="false">جميع أنواع الصخور</li>
              </ul>
              <div class="test-actions">
                <button class="btn btn-primary submit-test" data-test="test-1">إرسال الإجابة</button>
                <div class="test-progress">
                  <span class="progress-text">السؤال 1 من 5</span>
                </div>
              </div>
            </div>
            
            <a href="#petroleum-details" class="btn btn-primary" style="width: 100%; margin-top: 20px;">
              <i class="fas fa-play"></i>
              متابعة المسار
            </a>
          </div>
        </div>

        <div class="accordion" id="accordion-2">
          <div class="accordion-header">
            <h3>مسار التعدين والموارد المعدنية</h3>
            <span class="accordion-icon"><i class="fas fa-chevron-down"></i></span>
          </div>
          <div class="accordion-content">
            <div class="path-stats">
              <div class="stat-item">
                <div class="stat-item-value">20</div>
                <div class="stat-item-label">وحدة تدريبية</div>
              </div>
              <div class="stat-item">
                <div class="stat-item-value">150</div>
                <div class="stat-item-label">ساعة تدريب</div>
              </div>
              <div class="stat-item">
                <div class="stat-item-value">2,900</div>
                <div class="stat-item-label">XP كلية</div>
              </div>
            </div>
            
            <ul class="path-modules">
              <li>
                <div class="module-status completed"></div>
                <span>استكشاف الخامات والتنقيب الجيوفيزيائي</span>
              </li>
              <li>
                <div class="module-status completed"></div>
                <span>تقدير الموارد بالطرق الجيوإحصائية</span>
              </li>
              <li>
                <div class="module-status"></div>
                <span>تصميم المناجم والتخطيط الإنتاجي</span>
              </li>
              <li>
                <div class="module-status"></div>
                <span>هندسة الصخور وتقييم الاستقرار</span>
              </li>
              <li>
                <div class="module-status"></div>
                <span>معالجة الخامات والتركيز</span>
              </li>
              <li>
                <div class="module-status"></div>
                <span>الأثر البيئي والاستدامة في التعدين</span>
              </li>
            </ul>
            
            <div class="test-container" id="test-2">
              <div class="test-header">
                <h3 class="test-title">اختبار استكشاف الخامات</h3>
                <div class="test-info">
                  <span><i class="fas fa-clock"></i> 15 دقائق</span>
                  <span><i class="fas fa-star"></i> 50 نقطة</span>
                </div>
              </div>
              <div class="test-question">
                ما هي الطريقة الأكثر فعالية للكشف عن الخامات المعدنية في الأعماق؟
              </div>
              <ul class="test-options">
                <li class="test-option" data-correct="false">الحفر العشوائي</li>
                <li class="test-option" data-correct="true">الاستكشاف الجيوفيزيائي</li>
                <li class="test-option" data-correct="false">الملاحظة البصرية</li>
                <li class="test-option" data-correct="false">جميع ما سبق</li>
              </ul>
              <div class="test-actions">
                <button class="btn btn-primary submit-test" data-test="test-2">إرسال الإجابة</button>
                <div class="test-progress">
                  <span class="progress-text">السؤال 1 من 5</span>
                </div>
              </div>
            </div>
            
            <a href="#mining-details" class="btn btn-primary" style="width: 100%; margin-top: 20px;">
              <i class="fas fa-play"></i>
              بدء المسار
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= الأدوات التفاعلية ============================= -->
  <section id="interactive-tools" class="interactive-tools">
    <div class="container">
      <h2 class="section-title animate-on-scroll">🛠️ الأدوات التفاعلية والمحاكيات</h2>
      <p class="section-subtitle animate-on-scroll">أدوات متطورة للتدريب العملي والمحاكاة الواقعية لبيئة العمل المهنية</p>
      
      <div class="tools-grid">
        <div class="tool-card animate-on-scroll">
          <div class="tool-icon"><i class="fas fa-cube"></i></div>
          <h3 class="tool-title">محاكي النمذجة ثلاثية الأبعاد</h3>
          <p class="tool-description">أداة تفاعلية لبناء نماذج جيولوجية ثلاثية الأبعاد ومحاكاة الطبقات والهياكل الجيولوجية</p>
          <ul class="tool-features">
            <li>بناء نماذج الطبقات التفاعلية</li>
            <li>محاكاة التصدعات والطيات</li>
            <li>تصور البيانات البئرية</li>
            <li>تصدير النماذج لبرامج متخصصة</li>
          </ul>
          <button class="btn btn-primary start-tool" data-tool="3d-modeler" data-points="10">تجربة الأداة</button>
        </div>

        <div class="tool-card animate-on-scroll">
          <div class="tool-icon"><i class="fas fa-chart-area"></i></div>
          <h3 class="tool-title">محلل البيانات السيزمية</h3>
          <p class="tool-description">منصة متقدمة لتحليل وتفسير البيانات السيزمية مع أدوات الذكاء الاصطناعي</p>
          <ul class="tool-features">
            <li>تحليل المقاطع السيزمية</li>
            <li>كشف الهيدروكربونات تلقائياً</li>
            <li>مرشحات الضوضاء المتقدمة</li>
            <li>التفسير الجيولوجي المساعد</li>
          </ul>
          <button class="btn btn-primary start-tool" data-tool="seismic-analyzer" data-points="25">تجربة الأداة</button>
        </div>

        <div class="tool-card animate-on-scroll">
          <div class="tool-icon"><i class="fas fa-flask"></i></div>
          <h3 class="tool-title">مختبر التحليل الجيوكيميائي</h3>
          <p class="tool-description">مختبر افتراضي لإجراء التحاليل الجيوكيميائية وتفسير النتائج</p>
          <ul class="tool-features">
            <li>تحليل العينات الصخرية</li>
            <li>قياس نسب العناصر</li>
            <li>تحديد أنواع المعادن</li>
            <li>تقارير تلقائية مفصلة</li>
          </ul>
          <button class="btn btn-primary start-tool" data-tool="geochem-lab" data-points="15">دخول المختبر</button>
        </div>

        <div class="tool-card animate-on-scroll">
          <div class="tool-icon"><i class="fas fa-map-marked-alt"></i></div>
          <h3 class="tool-title">منصة GIS التفاعلية</h3>
          <p class="tool-description">نظام معلومات جغرافية متكامل مع أدوات التحليل المكاني المتقدم</p>
          <ul class="tool-features">
            <li>رسم الخرائط الجيولوجية</li>
            <li>التحليل المكاني الإحصائي</li>
            <li>معالجة صور الأقمار الصناعية</li>
            <li>إنشاء قواعد البيانات المكانية</li>
          </ul>
          <button class="btn btn-primary start-tool" data-tool="gis-platform" data-points="20">بدء المشروع</button>
        </div>

        <div class="tool-card animate-on-scroll">
          <div class="tool-icon"><i class="fas fa-water"></i></div>
          <h3 class="tool-title">محاكي المياه الجوفية</h3>
          <p class="tool-description">نمذجة تدفق المياه الجوفية ومحاكاة سيناريوهات الضخ والتلوث</p>
          <ul class="tool-features">
            <li>نمذجة أحواض المياه الجوفية</li>
            <li>محاكاة انتشار الملوثات</li>
            <li>تقييم تأثير الضخ</li>
            <li>تحسين شبكات الآبار</li>
          </ul>
          <button class="btn btn-primary start-tool" data-tool="groundwater-sim" data-points="30">بدء المحاكاة</button>
        </div>

        <div class="tool-card animate-on-scroll">
          <div class="tool-icon"><i class="fas fa-gem"></i></div>
          <h3 class="tool-title">منصة تقدير الموارد</h3>
          <p class="tool-description">أدوات جيوإحصائية متقدمة لتقدير الموارد المعدنية والبترولية</p>
          <ul class="tool-features">
            <li>تقدير الموارد بالكريجينج</li>
            <li>تحليل عدم اليقين</li>
            <li>تصنيف الموارد والاحتياطي</li>
            <li>التحليل الاقتصادي</li>
          </ul>
          <button class="btn btn-primary start-tool" data-tool="resource-estimator" data-points="40">بدء التقدير</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= المشاريع العملية ============================= -->
  <section id="projects" class="projects-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll" style="color: white;">🚀 المشاريع العملية والتطبيقية</h2>
      <p class="section-subtitle animate-on-scroll" style="color: rgba(255,255,255,0.9);">مشاريع حقيقية مبنية على بيانات فعلية من الصناعة لإعدادك لسوق العمل</p>
      
      <div class="projects-grid">
        <div class="project-card animate-on-scroll">
          <div class="project-image">
            <i class="fas fa-oil-can"></i>
          </div>
          <div class="project-info">
            <h3 class="project-title">مشروع تطوير حقل حاسي مسعود</h3>
            <p class="project-description">
              دراسة شاملة لتطوير أحد أهم الحقول الجزائرية باستخدام بيانات حقيقية وتقنيات النمذجة المتقدمة
            </p>
            <div class="project-tags">
              <span class="project-tag">نمذجة المكامن</span>
              <span class="project-tag">محاكاة الإنتاج</span>
              <span class="project-tag">التحليل الاقتصادي</span>
            </div>
            <div class="project-meta">
              <span><i class="fas fa-clock"></i> 6 أسابيع</span>
              <span><i class="fas fa-users"></i> مشروع جماعي</span>
              <span><i class="fas fa-star"></i> 500 XP</span>
            </div>
            <button class="btn btn-primary start-project" data-project="project-hassi-messaoud" data-points="500">بدء المشروع</button>
          </div>
        </div>

        <div class="project-card animate-on-scroll">
          <div class="project-image">
            <i class="fas fa-mountain"></i>
          </div>
          <div class="project-info">
            <h3 class="project-title">استكشاف خامات الحديد بالونزة</h3>
            <p class="project-description">
              مشروع استكشاف وتقدير الموارد لمنجم الحديد بالونزة مع تطبيق أحدث تقنيات التنقيب والتحليل
            </p>
            <div class="project-tags">
              <span class="project-tag">الاستكشاف الجيوفيزيائي</span>
              <span class="project-tag">تقدير الموارد</span>
              <span class="project-tag">التخطيط التعديني</span>
            </div>
            <div class="project-meta">
              <span><i class="fas fa-clock"></i> 8 أسابيع</span>
              <span><i class="fas fa-user"></i> مشروع فردي</span>
              <span><i class="fas fa-star"></i> 450 XP</span>
            </div>
            <button class="btn btn-primary start-project" data-project="project-ouenza" data-points="450">بدء المشروع</button>
          </div>
        </div>

        <div class="project-card animate-on-scroll">
          <div class="project-image">
            <i class="fas fa-tint"></i>
          </div>
          <div class="project-info">
            <h3 class="project-title">إدارة المياه الجوفية بالواحات</h3>
            <p class="project-description">
              مشروع متكامل لإدارة وحماية المياه الجوفية في المناطق الصحراوية مع التركيز على الاستدامة
            </p>
            <div class="project-tags">
              <span class="project-tag">الهيدروجيولوجيا</span>
              <span class="project-tag">نمذجة MODFLOW</span>
              <span class="project-tag">الإدارة المستدامة</span>
            </div>
            <div class="project-meta">
              <span><i class="fas fa-clock"></i> 5 أسابيع</span>
              <span><i class="fas fa-users"></i> مشروع جماعي</span>
              <span><i class="fas fa-star"></i> 400 XP</span>
            </div>
            <button class="btn btn-primary start-project" data-project="project-groundwater" data-points="400">بدء المشروع</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= نظام الشهادات ============================= -->
  <section id="certificates" class="certificates-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll">🏆 نظام الشهادات المهنية</h2>
      <p class="section-subtitle animate-on-scroll">شهادات معتمدة ومعترف بها دولياً تعزز من فرصك المهنية في سوق العمل</p>
      
      <div class="cert-grid">
        <div class="cert-card animate-on-scroll">
          <div class="cert-icon"><i class="fas fa-medal"></i></div>
          <h3 class="cert-title">شهادة خبير جيولوجيا البترول</h3>
          <ul class="cert-requirements">
            <li>إكمال مسار جيولوجيا البترول بالكامل</li>
            <li>إنجاز 3 مشاريع عملية متقدمة</li>
            <li>اجتياز الاختبار النهائي بنسبة 85%</li>
            <li>تقديم مشروع تخرج معتمد</li>
            <li>120 ساعة تدريب عملي موثقة</li>
          </ul>
          <div style="margin-top: 20px;">
            <strong style="color: var(--success-green);">المكافآت:</strong>
            <p>1000 XP + إمكانية التوظيف المباشر + شبكة علاقات مهنية</p>
          </div>
          <button class="btn btn-primary start-certificate" data-cert="cert-petroleum" data-points="1000">التقدم للشهادة</button>
        </div>

        <div class="cert-card animate-on-scroll">
          <div class="cert-icon"><i class="fas fa-gem"></i></div>
          <h3 class="cert-title">شهادة مختص تقدير الموارد</h3>
          <ul class="cert-requirements">
            <li>إتقان تقنيات الجيوإحصاء المتقدمة</li>
            <li>خبرة في برامج النمذجة الاحترافية</li>
            <li>إنجاز مشروع تقدير موارد كامل</li>
            <li>فهم المعايير الدولية (JORC, NI 43-101)</li>
            <li>اجتياز ورشة عمل ميدانية</li>
          </ul>
          <div style="margin-top: 20px;">
            <strong style="color: var(--success-green);">المكافآت:</strong>
            <p>800 XP + تأهيل للعمل في الشركات العالمية + ورشة متقدمة</p>
          </div>
          <button class="btn btn-primary start-certificate" data-cert="cert-resources" data-points="800">التقدم للشهادة</button>
        </div>

        <div class="cert-card animate-on-scroll">
          <div class="cert-icon"><i class="fas fa-tint"></i></div>
          <h3 class="cert-title">شهادة مهندس هيدروجيولوجي</h3>
          <ul class="cert-requirements">
            <li>إتقان نمذجة المياه الجوفية</li>
            <li>خبرة في تقييم جودة المياه</li>
            <li>مشروع إدارة موارد مائية</li>
            <li>فهم القوانين البيئية المحلية والدولية</li>
            <li>تدريب ميداني 40 ساعة</li>
          </ul>
          <div style="margin-top: 20px;">
            <strong style="color: var(--success-green);">المكافآت:</strong>
            <p>750 XP + شراكة مع وزارة الموارد المائية + دورة تخصصية</p>
          </div>
          <button class="btn btn-primary start-certificate" data-cert="cert-hydro" data-points="750">التقدم للشهادة</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= المجتمع والدعم ============================= -->
  <section id="community" class="community-section">
    <div class="container">
      <h2 class="section-title animate-on-scroll">👥 المجتمع المهني والدعم</h2>
      <p class="section-subtitle animate-on-scroll">انضم إلى مجتمع نشط من الجيولوجيين المحترفين والخبراء من مختلف أنحاء العالم</p>
      
      <div class="community-grid">
        <div class="community-card animate-on-scroll">
          <div style="font-size: 3rem; margin-bottom: 25px; color: var(--primary-blue);">
            <i class="fas fa-comments"></i>
          </div>
          <h3 style="font-size: 1.5rem; margin-bottom: 20px; color: var(--dark-navy);">منتديات النقاش التخصصية</h3>
          <p style="color: #666; line-height: 1.8; margin-bottom: 25px;">
            منتديات متخصصة لكل مجال جيولوجي مع خبراء دوليين للإجابة على استفساراتك وتبادل الخبرات
          </p>
          <ul style="list-style: none; margin-bottom: 25px; text-align: right;">
            <li style="padding: 8px 0;">💬 أكثر من 15,000 عضو نشط</li>
            <li style="padding: 8px 0;">🌍 خبراء من 40 دولة</li>
            <li style="padding: 8px 0;">⚡ استجابة خلال ساعتين</li>
            <li style="padding: 8px 0;">📚 مكتبة معرفية ضخمة</li>
          </ul>
          <button class="btn btn-primary start-activity" data-activity="forums" data-points="5">انضم للمنتديات</button>
        </div>

        <div class="community-card animate-on-scroll">
          <div style="font-size: 3rem; margin-bottom: 25px; color: var(--success-green);">
            <i class="fas fa-user-tie"></i>
          </div>
          <h3 style="font-size: 1.5rem; margin-bottom: 20px; color: var(--dark-navy);">برنامج التوجيه المهني</h3>
          <p style="color: #666; line-height: 1.8; margin-bottom: 25px;">
            ربط مباشر مع خبراء الصناعة لجلسات توجيه شخصية ومساعدتك في التخطيط المهني والتطوير
          </p>
          <ul style="list-style: none; margin-bottom: 25px; text-align: right;">
            <li style="padding: 8px 0;">👨‍🏫 جلسات توجيه أسبوعية</li>
            <li style="padding: 8px 0;">🎯 خطة مهنية شخصية</li>
            <li style="padding: 8px 0;">🔗 شبكة علاقات مهنية</li>
            <li style="padding: 8px 0;">📈 متابعة التطور المهني</li>
          </ul>
          <button class="btn btn-primary start-activity" data-activity="mentorship" data-points="10">احجز جلسة توجيه</button>
        </div>

        <div class="community-card animate-on-scroll">
          <div style="font-size: 3rem; margin-bottom: 25px; color: var(--warning-orange);">
            <i class="fas fa-briefcase"></i>
          </div>
          <h3 style="font-size: 1.5rem; margin-bottom: 20px; color: var(--dark-navy);">مركز الفرص المهنية</h3>
          <p style="color: #666; line-height: 1.8; margin-bottom: 25px;">
            منصة توظيف متخصصة بشراكة مع أكبر الشركات في القطاع لضمان حصولك على الفرصة المناسبة
          </p>
          <ul style="list-style: none; margin-bottom: 25px; text-align: right;">
            <li style="padding: 8px 0;">💼 +500 فرصة عمل شهرياً</li>
            <li style="padding: 8px 0;">🏢 شراكة مع 150+ شركة</li>
            <li style="padding: 8px 0;">📝 مساعدة في كتابة السيرة</li>
            <li style="padding: 8px 0;">🎪 معارض التوظيف الافتراضية</li>
          </ul>
          <button class="btn btn-primary start-activity" data-activity="careers" data-points="15">استكشف الفرص</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= الفوتر ============================= -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>🌍 GeoReady Pro</h3>
          <p style="color: #ccc; line-height: 1.8;">
            منصة التدريب الجيولوجي الأولى في المنطقة العربية، نهدف إلى تأهيل جيل جديد من الجيولوجيين المحترفين القادرين على مواجهة تحديات المستقبل.
          </p>
          <div style="margin-top: 20px;">
            <a href="#" style="color: #ccc; font-size: 1.5rem; margin-left: 15px;"><i class="fab fa-facebook"></i></a>
            <a href="#" style="color: #ccc; font-size: 1.5rem; margin-left: 15px;"><i class="fab fa-twitter"></i></a>
            <a href="#" style="color: #ccc; font-size: 1.5rem; margin-left: 15px;"><i class="fab fa-linkedin"></i></a>
            <a href="#" style="color: #ccc; font-size: 1.5rem; margin-left: 15px;"><i class="fab fa-youtube"></i></a>
          </div>
        </div>

        <div class="footer-section">
          <h3>المسارات التعليمية</h3>
          <ul>
            <li><a href="#petroleum">جيولوجيا البترول</a></li>
            <li><a href="#mining">التعدين والموارد</a></li>
            <li><a href="#hydrogeology">الهيدروجيولوجيا</a></li>
            <li><a href="#engineering">الجيولوجيا الهندسية</a></li>
            <li><a href="#gis">التقنيات الرقمية</a></li>
            <li><a href="#entrepreneurship">ريادة الأعمال</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>الأدوات والخدمات</h3>
          <ul>
            <li><a href="#3d-modeling">النمذجة ثلاثية الأبعاد</a></li>
            <li><a href="#seismic-analysis">التحليل السيزمي</a></li>
            <li><a href="#geochem-lab">المختبر الجيوكيميائي</a></li>
            <li><a href="#gis-platform">منصة GIS</a></li>
            <li><a href="#resource-estimation">تقدير الموارد</a></li>
            <li><a href="#project-management">إدارة المشاريع</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>المجتمع والدعم</h3>
          <ul>
            <li><a href="#forums">المنتديات التخصصية</a></li>
            <li><a href="#mentorship">برنامج التوجيه</a></li>
            <li><a href="#career-center">مركز التوظيف</a></li>
            <li><a href="#events">الفعاليات والمؤتمرات</a></li>
            <li><a href="#support">الدعم الفني</a></li>
            <li><a href="#contact">تواصل معنا</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2025 GeoReady Pro. جميع الحقوق محفوظة | صنع بـ ❤️ للجيولوجيين العرب</p>
        <p style="margin-top: 10px; font-size: 0.9rem;">
          شريك تقني معتمد: <strong>Schlumberger</strong> | <strong>Halliburton</strong> | <strong>Baker Hughes</strong> | <strong>ESRI</strong>
        </p>
      </div>
    </div>
  </footer>

  <!-- ============================= نافذة الأسئلة والأجوبة ============================= -->
  <div class="qa-modal" id="qaModal">
    <div class="qa-container">
      <div class="qa-header">
        <h2>مركز الأسئلة والأجوبة</h2>
        <button class="close-btn" id="closeQaModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="qa-body">
        <div class="search-box">
          <input type="text" class="search-input" id="qaSearch" placeholder="ابحث في قاعدة المعرفة الجيولوجية...">
        </div>
        
        <div class="qa-results" id="qaResults">
          <!-- سيتم ملء هذا القسم ديناميكياً -->
        </div>
        
        <div class="ask-question-form">
          <h3 style="margin-bottom: 20px;">اطرح سؤالك</h3>
          <div class="form-group">
            <label class="form-label">عنوان السؤال</label>
            <input type="text" class="form-input" id="questionTitle" placeholder="اكتب عنواناً موجزاً لسؤالك">
          </div>
          <div class="form-group">
            <label class="form-label">تفاصيل السؤال</label>
            <textarea class="form-textarea" id="questionDetails" placeholder="صف سؤالك بتفصيل أكثر..."></textarea>
          </div>
          <button class="btn btn-primary" id="submitQuestion">إرسال السؤال</button>
        </div>
      </div>
    </div>
  </div>

  <!-- العنصر العائم للمساعدة -->
  <div class="floating-action" onclick="openHelpChat()">
    <i class="fas fa-question-circle"></i>
    <div class="notification-badge">3</div>
  </div>

  <!-- نافذة الإنجاز المنبثقة -->
  <div class="achievement-popup" id="achievementPopup">
    <div style="display: flex; align-items: center;">
      <span class="achievement-icon">🏆</span>
      <div>
        <strong>إنجاز جديد!</strong><br>
        <span id="achievementText">لقد حصلت على شارة "محلل البيانات"</span>
      </div>
    </div>
  </div>

  <script>
    // ================================= نظام النقاط والتقدم =================================
    const STORAGE_KEY = 'geoready_progress_v1';
    const API_BASE_URL = '/api'; // سيتم تعديل هذا في الإنتاج

    // حالة التطبيق
    let appState = {
      score: 0,
      completed: [],
      currentSection: null,
      lastSaved: new Date().toISOString(),
      history: [],
      historyIndex: -1
    };

    // ================================= وظائف التخزين =================================
    function loadProgress() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (raw) {
          const saved = JSON.parse(raw);
          appState = { ...appState, ...saved };
          console.log('تم تحميل التقدم:', appState);
        }
      } catch (e) {
        console.error('خطأ في تحميل التقدم:', e);
        logError('loadProgress', e.message);
      }
      updateScoreBadge();
    }

    function saveProgress() {
      try {
        appState.lastSaved = new Date().toISOString();
        localStorage.setItem(STORAGE_KEY, JSON.stringify(appState));
        console.log('تم حفظ التقدم:', appState);
        
        // إذا كان المستخدم مسجلاً، أرسل البيانات للخادم
        if (window.USER_ID) {
          syncWithServer();
        }
      } catch (e) {
        console.error('خطأ في حفظ التقدم:', e);
        logError('saveProgress', e.message);
      }
    }

    function syncWithServer() {
      fetch(`${API_BASE_URL}/progress/save`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          userId: window.USER_ID,
          score: appState.score,
          completed: appState.completed,
          currentSection: appState.currentSection
        })
      })
      .then(response => response.json())
      .then(data => {
        console.log('تمت المزامنة مع الخادم:', data);
      })
      .catch(err => {
        console.error('فشلت المزامنة مع الخادم:', err);
        logError('syncWithServer', err.message);
      });
    }

    // ================================= نظام النقاط =================================
    function addPoints(points, source, details = {}) {
      // حفظ الحالة الحالية في التاريخ للتراجع
      saveToHistory();
      
      const oldScore = appState.score;
      appState.score += points;
      
      // تسجيل النشاط المكتمل
      appState.completed.push({
        source,
        points,
        date: new Date().toISOString(),
        ...details
      });
      
      // حفظ التقدم
      saveProgress();
      
      // تحديث الواجهة
      updateScoreBadge();
      
      // عرض إشعار
      showAchievement(`مبروك! لقد ربحت ${points} نقطة`);
      
      // تسجيل الحدث
      logEvent('points_earned', { points, source, oldScore, newScore: appState.score });
      
      console.log(`تمت إضافة ${points} نقطة من ${source}. النقاط الإجمالية: ${appState.score}`);
    }

    function updateScoreBadge() {
      const scoreValue = document.getElementById('scoreValue');
      if (scoreValue) {
        scoreValue.textContent = appState.score;
        
        // تأثير مرئي عند تحديث النقاط
        scoreValue.style.transform = 'scale(1.2)';
        setTimeout(() => {
          scoreValue.style.transform = 'scale(1)';
        }, 300);
      }
    }

    // ================================= نظام التراجع والإعادة =================================
    function saveToHistory() {
      // إزالة أي حالات بعد الفهرس الحالي
      if (appState.historyIndex < appState.history.length - 1) {
        appState.history = appState.history.slice(0, appState.historyIndex + 1);
      }
      
      // إضافة الحالة الحالية إلى التاريخ
      appState.history.push(JSON.parse(JSON.stringify(appState)));
      appState.historyIndex = appState.history.length - 1;
      
      // تحديث أزرار التراجع والإعادة
      updateUndoRedoButtons();
    }

    function undo() {
      if (appState.historyIndex > 0) {
        appState.historyIndex--;
        appState = JSON.parse(JSON.stringify(appState.history[appState.historyIndex]));
        saveProgress();
        updateScoreBadge();
        updateUndoRedoButtons();
        console.log('تم التراجع إلى الحالة السابقة');
      }
    }

    function redo() {
      if (appState.historyIndex < appState.history.length - 1) {
        appState.historyIndex++;
        appState = JSON.parse(JSON.stringify(appState.history[appState.historyIndex]));
        saveProgress();
        updateScoreBadge();
        updateUndoRedoButtons();
        console.log('تم الإعادة إلى الحالة التالية');
      }
    }

    function updateUndoRedoButtons() {
      const undoBtn = document.getElementById('undoBtn');
      const redoBtn = document.getElementById('redoBtn');
      
      if (undoBtn) undoBtn.disabled = appState.historyIndex <= 0;
      if (redoBtn) redoBtn.disabled = appState.historyIndex >= appState.history.length - 1;
    }

    // ================================= نظام العرض التدريجي =================================
    function initAccordions() {
      document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', function() {
          const accordion = this.parentElement;
          const isActive = accordion.classList.contains('active');
          
          // إغلاق جميع الأكورديونات الأخرى
          document.querySelectorAll('.accordion').forEach(acc => {
            if (acc !== accordion) {
              acc.classList.remove('active');
            }
          });
          
          // تبديل الحالة الحالية
          accordion.classList.toggle('active', !isActive);
          
          // تسجيل الحدث
          logEvent('accordion_toggled', { 
            accordionId: accordion.id, 
            isOpen: !isActive 
          });
        });
      });
    }

    // ================================= نظام الاختبارات =================================
    function initTests() {
      // معالجة اختيار خيارات الاختبار
      document.querySelectorAll('.test-option').forEach(option => {
        option.addEventListener('click', function() {
          const options = this.parentElement.querySelectorAll('.test-option');
          options.forEach(opt => opt.classList.remove('selected'));
          this.classList.add('selected');
        });
      });
      
      // معالجة إرسال الاختبارات
      document.querySelectorAll('.submit-test').forEach(btn => {
        btn.addEventListener('click', function() {
          const testId = this.getAttribute('data-test');
          const testContainer = document.getElementById(testId);
          const selectedOption = testContainer.querySelector('.test-option.selected');
          
          if (!selectedOption) {
            alert('يرجى اختيار إجابة قبل الإرسال');
            return;
          }
          
          const isCorrect = selectedOption.getAttribute('data-correct') === 'true';
          const points = isCorrect ? parseInt(this.getAttribute('data-points') || 25) : 0;
          
          if (isCorrect) {
            addPoints(points, `test_${testId}`, { testId, correct: true });
            showAchievement(`إجابة صحيحة! ربحت ${points} نقطة`);
          } else {
            showAchievement('إجابة خاطئة، حاول مرة أخرى!');
          }
          
          // الانتقال للسؤال التالي أو إنهاء الاختبار
          // (هنا يمكن إضافة منطق أكثر تعقيداً للاختبارات متعددة الأسئلة)
          this.textContent = 'تم الإرسال';
          this.disabled = true;
        });
      });
    }

    // ================================= نظام التفاعل العام =================================
    function initInteractions() {
      // معالجة أزرار البدء
      document.querySelectorAll('.start-tool, .start-project, .start-certificate, .start-activity').forEach(btn => {
        btn.addEventListener('click', function() {
          const points = parseInt(this.getAttribute('data-points') || 10);
          const type = this.classList.contains('start-tool') ? 'tool' :
                      this.classList.contains('start-project') ? 'project' :
                      this.classList.contains('start-certificate') ? 'certificate' : 'activity';
          const id = this.getAttribute(`data-${type}`);
          
          addPoints(points, `${type}_${id}`, { type, id });
        });
      });
      
      // معالجة أزرار اللغات
      document.querySelectorAll('.language-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const lang = this.getAttribute('data-lang');
          document.querySelectorAll('.language-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          // هنا يمكن إضافة منطق تغيير اللغة
          console.log(`تم تغيير اللغة إلى: ${lang}`);
          logEvent('language_changed', { language: lang });
        });
      });
      
      // معالجة أزرار التراجع والإعادة
      document.getElementById('undoBtn').addEventListener('click', undo);
      document.getElementById('redoBtn').addEventListener('click', redo);
    }

    // ================================= نظام التسجيل والتحليلات =================================
    function logEvent(eventName, data = {}) {
      const eventData = {
        event: eventName,
        timestamp: new Date().toISOString(),
        userId: window.USER_ID || 'anonymous',
        score: appState.score,
        ...data
      };
      
      console.log('Event logged:', eventData);
      
      // إرسال البيانات للخادم إذا كان متاحاً
      if (window.USER_ID) {
        fetch(`${API_BASE_URL}/events/log`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(eventData)
        }).catch(err => console.error('Failed to log event:', err));
      }
    }

    function logError(context, message) {
      const errorData = {
        context,
        message,
        timestamp: new Date().toISOString(),
        userId: window.USER_ID || 'anonymous',
        userAgent: navigator.userAgent,
        url: window.location.href
      };
      
      console.error('Error logged:', errorData);
      
      // إرسال الخطأ للخادم
      fetch(`${API_BASE_URL}/errors/log`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(errorData)
      }).catch(err => console.error('Failed to log error:', err));
    }

    // ================================= وظائف المساعدة =================================
    function showAchievement(text) {
      const popup = document.getElementById('achievementPopup');
      const textElement = document.getElementById('achievementText');
      textElement.textContent = text;
      popup.classList.add('show');
      
      setTimeout(() => {
        popup.classList.remove('show');
      }, 4000);
    }

    function openHelpChat() {
      alert('مرحباً! كيف يمكننا مساعدتك اليوم؟\n\n• استفسارات تقنية\n• مساعدة في المشاريع\n• توجيه مهني\n• مشاكل في الحساب');
    }

    // ================================= التهيئة عند التحميل =================================
    document.addEventListener('DOMContentLoaded', function() {
      // تحميل التقدم المحفوظ
      loadProgress();
      
      // تهيئة المكونات
      initAccordions();
      initTests();
      initInteractions();
      
      // حفظ الحالة الأولية في التاريخ
      saveToHistory();
      
      // تسجيل زيارة الصفحة
      logEvent('page_visited', { page: window.location.href });
      
      console.log('تم تهيئة GeoReady Pro بنجاح!');
    });

    // ================================= معالجة الأخطاء العالمية =================================
    window.addEventListener('error', function(e) {
      logError('global_error', e.message);
    });

    window.addEventListener('unhandledrejection', function(e) {
      logError('unhandled_promise_rejection', e.reason?.message || 'Unknown promise rejection');
    });

    // ================================= التحميل المتأخر للصور =================================
    function lazyLoadImages() {
      const images = document.querySelectorAll('img[data-src]');
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.classList.remove('lazy');
            imageObserver.unobserve(img);
          }
        });
      });

      images.forEach(img => imageObserver.observe(img));
    }

    // ================================= الرسوم المتحركة عند الظهور =================================
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, observerOptions);

    document.querySelectorAll('.animate-on-scroll').forEach(el => {
      observer.observe(el);
    });

    // ================================= تحديث شريط التنقل عند التمرير =================================
    window.addEventListener('scroll', function() {
      const navbar = document.getElementById('navbar');
      if (window.scrollY > 100) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });

    // ================================= التنقل السلس =================================
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // ================================= نظام التنقل النشط =================================
    window.addEventListener('scroll', function() {
      const sections = document.querySelectorAll('section[id]');
      const navLinks = document.querySelectorAll('.nav-links a');
      
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop - 100;
        if (scrollY >= sectionTop) {
          current = section.getAttribute('id');
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
          link.classList.add('active');
        }
      });
    });

    // ================================= نظام التبويب التفاعلي =================================
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const tabId = this.getAttribute('data-tab');
        
        // إزالة النشاط من جميع الأزرار
        document.querySelectorAll('.tab-btn').forEach(b => {
          b.classList.remove('active');
        });
        
        // إضافة النشاط للزر المحدد
        this.classList.add('active');
        
        // إخفاء جميع المحتويات
        document.querySelectorAll('.tab-pane').forEach(pane => {
          pane.classList.remove('active');
        });
        
        // إظهار المحتوى المحدد
        document.getElementById(tabId).classList.add('active');
      });
    });

    // ================================= نظام الأسئلة والأجوبة =================================
    const qaDatabase = [
      {
        question: "ما هي أنواع الصخور النارية الرئيسية؟",
        answer: "تنقسم الصخور النارية إلى ثلاثة أنواع رئيسية: 1) الصخور النارية الجوفية (البلوتونية) التي تتكون في أعماق الأرض مثل الجرانيت، 2) الصخور النارية السطحية (البركانية) التي تتكون على سطح الأرض مثل البازلت، 3) الصخور النارية تحت السطحية التي تتكون على أعماق متوسطة مثل الديوريت."
      },
      {
        question: "كيف يتم تحديد عمر الصخور؟",
        answer: "يتم تحديد عمر الصخور باستخدام عدة طرق منها: 1) التأريخ الإشعاعي (مثل البوتاسيوم-أرجون واليورانيوم-رصاص)، 2) التأريخ النسبي باستخدام الأحافير ومبدأ تعاقب الطبقات، 3) التأريخ باستخدام النظائر المشعة، 4) التأريخ باستخدام الحلقات السنوية للأشجار أو الطبقات السنوية في الرواسب."
      }
    ];

    function populateQAResults() {
      const qaResults = document.getElementById('qaResults');
      qaResults.innerHTML = '';
      
      qaDatabase.forEach((qa, index) => {
        const qaItem = document.createElement('div');
        qaItem.className = 'qa-item';
        qaItem.innerHTML = `
          <div class="qa-question">${qa.question}</div>
          <div class="qa-answer">${qa.answer}</div>
        `;
        
        qaItem.addEventListener('click', function() {
          // إغلاق جميع العناصر النشطة
          document.querySelectorAll('.qa-item').forEach(item => {
            if (item !== this) {
              item.classList.remove('active');
            }
          });
          
          // تبديل حالة العنصر الحالي
          this.classList.toggle('active');
        });
        
        qaResults.appendChild(qaItem);
      });
    }

    // البحث في الأسئلة والأجوبة
    document.getElementById('qaSearch').addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      const qaItems = document.querySelectorAll('.qa-item');
      
      qaItems.forEach((item, index) => {
        const question = qaDatabase[index].question.toLowerCase();
        const answer = qaDatabase[index].answer.toLowerCase();
        
        if (question.includes(searchTerm) || answer.includes(searchTerm)) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    });

    // إرسال سؤال جديد
    document.getElementById('submitQuestion').addEventListener('click', function() {
      const title = document.getElementById('questionTitle').value;
      const details = document.getElementById('questionDetails').value;
      
      if (title && details) {
        addPoints(5, 'question_submitted', { title });
        alert('شكراً لسؤالك! سيتم الرد عليك في أقرب وقت ممكن.');
        document.getElementById('questionTitle').value = '';
        document.getElementById('questionDetails').value = '';
      } else {
        alert('يرجى ملء جميع الحقول المطلوبة.');
      }
    });

    // فتح وإغلاق نافذة الأسئلة والأجوبة
    document.getElementById('openQaModal').addEventListener('click', function() {
      document.getElementById('qaModal').classList.add('active');
      populateQAResults();
    });

    document.getElementById('closeQaModal').addEventListener('click', function() {
      document.getElementById('qaModal').classList.remove('active');
    });

    // إغلاق نافذة الأسئلة والأجوبة بالنقر خارجها
    document.getElementById('qaModal').addEventListener('click', function(e) {
      if (e.target === this) {
        this.classList.remove('active');
      }
    });

    // القائمة المتنقلة
    document.getElementById('mobileMenuBtn').addEventListener('click', function() {
      document.getElementById('navLinks').classList.add('active');
    });

    document.getElementById('mobileMenuClose').addEventListener('click', function() {
      document.getElementById('navLinks').classList.remove('active');
    });

    // الحفظ التلقائي كل 30 ثانية
    setInterval(saveProgress, 30000);

    // التحميل المتأخر للصور
    window.addEventListener('load', lazyLoadImages);
  </script>
</body>
</html>